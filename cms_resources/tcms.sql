/*
Navicat MySQL Data Transfer

Source Server         : localhost
Source Server Version : 50516
Source Host           : localhost:3306
Source Database       : tcms

Target Server Type    : MYSQL
Target Server Version : 50516
File Encoding         : 65001

Date: 2017-03-09 17:24:31
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `td_c_category`
-- ----------------------------
DROP TABLE IF EXISTS `td_c_category`;
CREATE TABLE `td_c_category` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `is_show` bit(1) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `name_en` varchar(100) NOT NULL,
  `seq_num` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_c_category
-- ----------------------------
INSERT INTO `td_c_category` VALUES ('1', '', '招聘', 'JOB', '3');
INSERT INTO `td_c_category` VALUES ('2', '', '分享', 'Share', '1');
INSERT INTO `td_c_category` VALUES ('3', '', '问题', 'QA', '2');

-- ----------------------------
-- Table structure for `td_c_discuss`
-- ----------------------------
DROP TABLE IF EXISTS `td_c_discuss`;
CREATE TABLE `td_c_discuss` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `author` varchar(50) DEFAULT NULL,
  `message` varchar(500) DEFAULT NULL,
  `post_id` bigint(20) NOT NULL,
  `reply` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_c_discuss
-- ----------------------------

-- ----------------------------
-- Table structure for `td_c_posts`
-- ----------------------------
DROP TABLE IF EXISTS `td_c_posts`;
CREATE TABLE `td_c_posts` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `author` varchar(100) DEFAULT NULL,
  `category_id` bigint(20) NOT NULL,
  `clicks` bigint(20) DEFAULT NULL,
  `content` text,
  `is_hot` bit(1) DEFAULT NULL,
  `tag_id` bigint(20) NOT NULL,
  `title` varchar(500) DEFAULT NULL,
  `voter` varchar(1500) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=674 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_c_posts
-- ----------------------------
INSERT INTO `td_c_posts` VALUES ('671', null, '2017-03-09 15:41:47', 'admin', '0755', '', 'admin', '2017-03-09 16:02:01', 'admin', '2', '6', '<pre>does not contain a property (or public field) named ‘字段名称’</pre><p>此类错类是因为变量没有进行赋值，通俗点说是没有get输出，解决办法：</p><p>1，声明@Property如：</p><pre>@Property\r\nprivate String posts;</pre><p>2，使用get方法输出</p><pre>public String getPosts(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;return \"Create a posts\";\r\n}</pre><p>3，返回类型写错，如使用&lt;t:if test=\"name\"&gt;&lt;/t:if&gt;时，返回类型必须是boolean，不能是Boolean。</p><pre>//错误写法，抛异常\r\npublic Boolean isName(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;return false;\r\n}\r\n	\r\n//正确写法\r\npublic boolean isName(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;return false;\r\n}<br></pre>', '', '5', 'Tapestry error: does not contain a property (or public field) named \'posts\'', null);
INSERT INTO `td_c_posts` VALUES ('672', null, '2017-03-09 15:51:27', 'admin', '0755', '', 'admin', '2017-03-09 15:51:27', 'admin', '2', '0', '<p>此类错误大多由于资源没加载进来，或者资源加载错误，如t5base2.css路径错误：</p><pre><h3 style=\"font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: 500; font-size: 24px; white-space: normal;\">java.lang.reflect.InvocationTargetException</h3><dl style=\"font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: normal;\"><dt style=\"line-height: 1.42857;\">targetException</dt><dd style=\"line-height: 1.42857;\">org.apache.tapestry5.ioc.internal.OperationException: Unable to locate asset \'context:assets/tlayout/styles/t5base2.css\' (the file does not exist).</dd></dl></pre>', '', '5', 'Tapestry error: java.lang.reflect.InvocationTargetException', null);
INSERT INTO `td_c_posts` VALUES ('673', null, '2017-03-09 16:09:25', 'admin', '0755', '', 'admin', '2017-03-09 16:13:32', 'admin', '2', '2', '<p>Tapestry中文乱码，大多是编码不一致引起，建议统一使用utf-8，解决办法参考<a href=\"http://cms.flywind.org/blogdetial/124\" target=\"_blank\">[TS v1.1]第五十讲：tapestry乱码问题Invalid byte 3 of 3-byte UTF-8 sequence</a></p>', '', '5', 'Tapestry error: Invalid byte 3 of 3-byte UTF-8 sequence', null);

-- ----------------------------
-- Table structure for `td_c_tags`
-- ----------------------------
DROP TABLE IF EXISTS `td_c_tags`;
CREATE TABLE `td_c_tags` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `tag_value` varchar(100) NOT NULL,
  `seq_num` int(11) DEFAULT NULL,
  `is_show` bit(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_c_tags
-- ----------------------------
INSERT INTO `td_c_tags` VALUES ('1', 'Tapestry 5.4', '1', '');
INSERT INTO `td_c_tags` VALUES ('2', 'Tapestry 5.3', '1', '');
INSERT INTO `td_c_tags` VALUES ('3', 'Tapestry 5.2', '1', '');
INSERT INTO `td_c_tags` VALUES ('4', 'Tapestry 5.1', '1', '');
INSERT INTO `td_c_tags` VALUES ('5', 'Tapestry 5', '1', '');
INSERT INTO `td_c_tags` VALUES ('6', 'Tapestry 4', '1', '');
INSERT INTO `td_c_tags` VALUES ('7', 'Tapestry 3', '1', '');
INSERT INTO `td_c_tags` VALUES ('8', 'Nodejs', '1', '');
INSERT INTO `td_c_tags` VALUES ('9', 'Java', '1', '');
INSERT INTO `td_c_tags` VALUES ('10', 'Angularjs', '1', '');
INSERT INTO `td_c_tags` VALUES ('11', 'Other', '1', '');

-- ----------------------------
-- Table structure for `td_c_technology`
-- ----------------------------
DROP TABLE IF EXISTS `td_c_technology`;
CREATE TABLE `td_c_technology` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `content` text,
  `smallImgurl` varchar(400) DEFAULT NULL,
  `technologyType` int(11) DEFAULT NULL,
  `title` varchar(200) DEFAULT NULL,
  `content_en` text,
  `title_en` varchar(200) DEFAULT NULL,
  `is_hot` bit(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=241 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_c_technology
-- ----------------------------
INSERT INTO `td_c_technology` VALUES ('4', null, '2015-12-15 10:39:33', 'admin', '0755', '', 'admin', '2016-05-13 16:09:45', '<p>Tapestry开发环境所需软件安装（安装中出现问题可加入技术交流QQ群:41138107或33106572询问）：<br /></p><p>1,JDK------<a target=\"_blank\" title=\"\" href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html\">下载网址</a></p><p>JDK安装完成之后，需配置下环境变量。</p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627104303_1340764983265886.jpg\" /></p><p>新建全局变量JAVA_HOME：jdk安装目录</p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627105021_1340765421781804.jpg\" /></p><p>设置全局变量Path：%JAVA_HOME%\\bin</p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627105652_1340765812937846.jpg\" /></p><p>&nbsp;</p><p>2,eclipse3.7.2----<span class=\"title\"><a href=\"http://www.eclipse.org/downloads/packages/eclipse-classic-372/indigosr2\">Eclipse Classic 3.7.2</a></span>,---官方下载地址：<a target=\"_blank\" title=\"\" href=\"http://www.eclipse.org/downloads/\">http://www.eclipse.org/downloads/</a></p><p>只要jdk正确安装，eclipse直接解压就可以使用了。</p><p>&nbsp;</p><p>3,maven客户端----官方下载地址：<a target=\"_blank\" title=\"\" href=\"http://maven.apache.org/\">http://maven.apache.org/</a></p><p>注意：下载的时候选择.zip的文件，另外的.tar.gz是源文件无需下载。解压放到电脑上，我的电脑路径：D:\\java\\apache-maven-3.0.4</p><p>配置maven环境变量：</p><p>新建M2_HOME：maven安装路径;</p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627112906_1340767746562269.jpg\" /></p><p>增加path:%M2_HOME%\\bin;</p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627113324_1340768004578452.jpg\" /></p><p>测试：点击电脑-开始-附件-命令提示符(如果是W7请点右键以管理员身份运行),输入mvn -v结果如下，说明安装成功。</p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627114005_1340768405296327.jpg\" /></p><p>&nbsp;</p><p>4,runJettyRun、maven----eclipse的插件：安装方法可查看本站<a target=\"_self\" title=\"\" href=\"/technologydetail/11\">eclipse常用插件地址</a>与<a target=\"_self\" title=\"\" href=\"/technologydetail/10/technologydetail/10\">eclipse开发环境(支持tomcat、maven、jetty、JBoss)</a></p><p>RunJettyRun Eclipse插件，选择help--Install new software---add然后输入RunJettyRun，地址：<a class=\"external-link\" href=\"http://run-jetty-run.googlecode.com/svn/trunk/updatesite\">http://run-jetty-run.googlecode.com/svn/trunk/updatesite</a></p><p>&nbsp;<img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627120701_1340770021703961.jpg\" /></p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627120937_1340770177828454.jpg\" /></p><p>安装maven eclipse插件，地址：<a href=\"http://m2eclipse.sonatype.org/sites/m2e\">http://m2eclipse.sonatype.org/sites/m2e</a>&nbsp;如果安装不了请使用这个链接：<a title=\"http://download.eclipse.org/technology/m2e/releases/\" rel=\"nofollow\" target=\"_blank\" href=\"http://download.eclipse.org/technology/m2e/releases/\">http://download.eclipse.org/technology/m2e/releases/</a></p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627125229_1340772749046151.jpg\" /></p><p><img alt=\"\" style=\"float:none;margin:0px;\" src=\"/uploadImages/technology/20120627125242_1340772762000079.jpg\" /><span>&nbsp;</span></p><p>&nbsp;</p>', '/tapestry-cms/uploadImages/contentData/technology_b330d6d2-d8b9-4807-a052-8329be98bdd0.png', '17', 'tapestry开发环境所需软件安装', '<p>Tapestry development environment required for software installation (installation problems can be added to the technical exchange QQ group: 41138107 or 33106572):<br /></p><p>1,JDK------<a target=\"_blank\" title=\"\" href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html\">Dwonload</a></p><p>JDK installation is completed, the windows environment needs to be configured under variable.</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627104303_1340764983265886.jpg\" style=\"float: none; margin: 0px;\" /></p><p>New global variable&nbsp;JAVA_HOME:jdk installation directory</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627105021_1340765421781804.jpg\" style=\"float: none; margin: 0px;\" /></p><p>Set global variables&nbsp;Path：%JAVA_HOME%\\bin</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627105652_1340765812937846.jpg\" style=\"float: none; margin: 0px;\" /></p><p>&nbsp;</p><p>2,eclipse3.7.2----<span class=\"title\"><a href=\"http://www.eclipse.org/downloads/packages/eclipse-classic-372/indigosr2\">Eclipse Classic 3.7.2</a></span>,---Official download：<a target=\"_blank\" title=\"\" href=\"http://www.eclipse.org/downloads/\">http://www.eclipse.org/downloads/</a></p><p>Complete the correct installation of JDK, eclipse&nbsp;can be used.</p><p>3,maven----Official download：<a target=\"_blank\" title=\"\" href=\"http://maven.apache.org/\">http://maven.apache.org/</a></p><p>Note: download the time to select Zip file, the tar.gz is the source file does not need to download. Decompression on the computer, my computer path：D:\\java\\apache-maven-3.0.4</p><p></p>Configure Maven environment variables:<br />New M2_HOME:maven installation path;<p></p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627112906_1340767746562269.jpg\" style=\"float: none; margin: 0px;\" /></p><p>&nbsp;New path:%M2_HOME%\\bin;</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627113324_1340768004578452.jpg\" style=\"float: none; margin: 0px;\" /></p><p>Test: click on the computer - start - Accessories - the command prompt (if it is Win7 please right click to run as administrator), MVN - V input results are as follows. It shows that the installation was successful.</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627114005_1340768405296327.jpg\" style=\"float: none; margin: 0px;\" /></p><p>&nbsp;</p><p>4,runJettyRun、maven----eclipse plugin：Install&nbsp;<a target=\"_self\" title=\"\" href=\"http://www.flywind.org/technologydetail/11\">eclipse</a>&nbsp;and&nbsp;<a target=\"_self\" title=\"\" href=\"http://www.flywind.org/technologydetail/10/technologydetail/10\">eclipse dev(for tomcat、maven、jetty、JBoss)</a></p><p>RunJettyRun Eclipse plugin，select help--Install new software---add and enter text RunJettyRun，adress：<a class=\"external-link\" href=\"http://run-jetty-run.googlecode.com/svn/trunk/updatesite\">http://run-jetty-run.googlecode.com/svn/trunk/updatesite</a></p><p>&nbsp;<img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627120701_1340770021703961.jpg\" style=\"float: none; margin: 0px;\" /></p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627120937_1340770177828454.jpg\" style=\"float: none; margin: 0px;\" /></p><p>Intasll maven eclipse plugin，url：<a href=\"http://m2eclipse.sonatype.org/sites/m2e\">http://m2eclipse.sonatype.org/sites/m2e</a>&nbsp;Please use this url if you are not installed.：<a title=\"http://download.eclipse.org/technology/m2e/releases/\" rel=\"nofollow\" target=\"_blank\" href=\"http://download.eclipse.org/technology/m2e/releases/\">http://download.eclipse.org/technology/m2e/releases/</a></p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627125229_1340772749046151.jpg\" style=\"float: none; margin: 0px;\" /></p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120627125242_1340772762000079.jpg\" style=\"float: none; margin: 0px;\" />&nbsp;</p><p>&nbsp;</p>', 'Tapestry development environment required for software installation', '');
INSERT INTO `td_c_technology` VALUES ('6', null, '2015-12-15 10:41:11', 'admin', '0755', '', 'admin', '2016-12-20 09:04:27', '<p>1、在eclipse工程目录下创建项目：<br /></p><p>第一次运行eclipse的时候会弹出选择工程项目存放地点，如我的存放路径D:\\workspace。我们就把tapestry创建的项目放到这个目录方便统一管理。</p><p>打开系统的命令提示符界面，以windows为例，路径：开始--附件--命令提示符。注意如果您的系统是vista或W7，必须右键选择以管理员身份运行。</p><p>打开界面，输入d:按回车键进入d盘。输入cd&nbsp;D:\\workspace按回车进入工作空间目录。</p><p><img alt=\"\" src=\"/uploadImages/technology/20120210094116_1328838076609228.jpg\" style=\"float:none;margin:0px;\" /></p><p>输入：mvn archetype:generate -DarchetypeCatalog=http://tapestry.apache.org回车，选择1回车，选择6回车，输入groupId值com.tapestry回车，输入aftifactId值tapestryStart回车，输入版本号为1.0回车，输入包的名字为com.tapestry.app回车,输入Y回车创建成功！</p><p><img alt=\"\" src=\"/uploadImages/technology/20120210095154_1328838714609540.jpg\" style=\"float:none;margin:0px;\" /></p><p>打开D:\\workspace会看到已经创建了一个文件夹名为tapestryStart的tapestry工程，在提示命令符中输入cd tapestryStart回车进入该项目，再输入mvn eclipse:eclipse -DdownloadSources=true回车下载eclipse所需的jar文件，到此所有创建完成。</p><p><img alt=\"\" src=\"/uploadImages/technology/20120210095847_1328839127296602.jpg\" style=\"float:none;margin:0px;\" /></p><p>输入mvn jetty:run回车运行该项目后，打开浏览器输入<a href=\"http://localhost:8080/tapestryStart/\">http://localhost:8080/tapestryStart/</a>可以看到已经跑起来了。<img alt=\"\" src=\"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/11.gif\" /></p>', '/upload\\technology_57c5fce8-faff-4ad0-9f93-690fe66d7006.jpg', '17', 'Tapestry 项目创建', '<p>1, in the eclipse workspace directory to create projects:<br /></p><p>As my storage path D:\\workspace. We put the project on the tapestry to facilitate unified management of this directory.</p><p>Open cmd,<span style=\"font-family: Arial, sans-serif; font-size: 15.1999998092651px; line-height: 19.7600002288818px; background-color: rgb(255, 255, 255);\">execute the following command:</span></p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120210094116_1328838076609228.jpg\" style=\"float: none; margin: 0px;\" /></p><p>Enter：mvn archetype:generate -DarchetypeCatalog=http://tapestry.apache.org press the keyboard Enter key，select 1 press the keyboard Enter key，select 6 press the keyboard Enter key.Enter groupId:com.tapestry press the keyboard Enter key.Enter aftifactId:tapestryStart press the keyboard Enter key.Enter version:1.0 press the keyboard Enter key.Enter pages name :com.tapestry.app press the keyboard Enter key,Enter&nbsp;Y finished！</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120210095154_1328838714609540.jpg\" style=\"float: none; margin: 0px;\" /></p><p><span style=\"font-family: Arial, sans-serif; font-size: 15.1999998092651px; line-height: 19.7600002288818px; background-color: rgb(255, 255, 255);\">execute the following command&nbsp;</span>mvn eclipse:eclipse -DdownloadSources=true。</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120210095847_1328839127296602.jpg\" style=\"float: none; margin: 0px;\" /></p><p>execute mvn jetty:run，open the browser to access the link after completion&nbsp;<a href=\"http://localhost:8080/tapestryStart/\">http://localhost:8080/tapestryStart/</a><img alt=\"\" src=\"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/11.gif\" /></p>', 'Tapestry project creation', '');
INSERT INTO `td_c_technology` VALUES ('9', null, '2016-03-16 11:28:43', 'admin', '0755', '', 'admin', '2016-05-13 17:02:13', '<p>&nbsp; &nbsp; &nbsp;tapestry具体的介绍，大家可以去官网<a href=\"http://tapestry.apache.org/\">http://tapestry.apache.org/</a>了解，apache的强大大家也有目共睹。<br /></p><p>&nbsp; &nbsp; &nbsp;tapestry使用了组件开发模式，很大的提高了工作效率，速度也很快，特别的5.3之后版本，官方文档也很齐全可惜是全英文，英文不好的很头疼，版本升级超级容易等等好处实在是很多啊！有兴趣的可去官网了解，编写这个教程是为了给初学着，或者没有学过程序开发又想从事程序开发的童鞋有很大的参考价值。</p><p>&nbsp;</p><p>&nbsp; &nbsp; &nbsp;个人简单介绍下，我并非专业计算机出身而是广美毕业，毕业后一直从事IT行业，之前在小公司写过几年的PHP，有同类经验的童鞋都知道，在小公司你会多东西越多，老板越赏识加上个人对程序开发有很大兴趣，对java也是第一次写，所以有写错的地方请大家指正、也很乐意与各位前辈交流学习、希望tapestry在国内能早日像他的兄弟框架struts那么流行。本编系列教程初定为tapestryStart,为了能正确运行案例，需要的可以<a href=\"/uploadImages/other/tapestryStart.zip\" target=\"_self\" title=\"\">下载tapestryStart源码</a>仅供参考。安装方法请看<a href=\"/technologydetail/18\" target=\"_blank\" title=\"\">eclipse导入tapestry创建的项目与运行</a>。</p><p>&nbsp;</p><p>&nbsp; &nbsp; &nbsp; 言归正传，tapestry分开发模式与产品模式(生产模式)两类，我们开发的时候使用开发模式，打包部署的时候使用产品模式。却换非常简单，只要简单设置就行了。本系列教程开发模式：tapestryX+tapestry-hibernate+mySql。在开发模式下一个页面由一个.java跟一个配对的.tml文件组成。</p><p>&nbsp;</p><p>&nbsp; &nbsp; &nbsp;来看下tapestry项目，官方推荐使用maven管理项目，我们之前创建的项目也是maven项目，下面我们来看下结构。如图</p><p><img alt=\"\" src=\"/uploadImages/technology/20120210112958_1328844598500700.jpg\" style=\"margin:0px;float:none;\" /></p><p>components存放组件的文件夹，page存放页面的文件夹，services存放服务的文件夹，默认就这3个，我们在开发中可自己增加相应文件夹，常用的有entities存放实体，until存放常用的java转换静态函数，data存放枚举，mixins混合,base可被继承的基础类等等。</p><p><a href=\"/examples/ts1/tapestrystart\" target=\"_blank\">查看demo</a></p><p>hello tapestryStart。</p><p>在com.tapestry.app.pages下创建一个TapestryStart.java文件，在webapp下创建TapestryStart.tml文件。下面看下他们的源代码。</p><p>&nbsp;</p><p>TapestryStart.java在这个文件中创建了一个私有变量hello，tapestry读写是使用get+变量名字(首字母大写)与set+变量名字(首字母大写)函数。也就是说hello读使用getHello函数、写使用setHello函数，以此类推。这里其实不用写setHello，写上是方便大家好理解。读写一起的时候可以使用简写@Property private String hello;这样的话读写都已经有了，以后会讲到。</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>public class TapestryStart {</div><div>&nbsp;</div><div>private String hello;</div><div>&nbsp;</div><div>public String getHello() {</div><div>return &quot;hello Tapestry Start&quot;;</div><div>}</div><div>&nbsp;</div><div>public void setHello(String hello) {</div><div>this.hello = hello;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>&nbsp;</p><p>TapestryStart.tm</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot;</span></div><div>&nbsp; &nbsp; &nbsp; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;p style=&quot;color:#ff6600&quot;&gt;${hello}&lt;/p&gt;</div><div>&nbsp;</div><div>&lt;/html&gt;</div></div>', null, '17', '第一讲：Hello tapestry', '<p><span style=\"white-space:pre\">	</span>Tapestry sub development and product two categories, we develop the time to use the development, when the deployment of packaged products. But change is very simple, as long as the simple set on the line. This series of tutorial development model: tapestryX+tapestry-hibernate+mySql. In the development mode, a page is composed of a.Tml with a pair of.Java files.</p><p></p><pre class=\"prettyprint lang-java\">configuration.add(SymbolConstants.PRODUCTION_MODE, false);</pre><p></p><p>&nbsp; &nbsp; &nbsp;Look under the tapestry project, the official recommended the use of Maven management project, we created the project is also Maven project, the following we look at the structure. Figure</p><p><img alt=\"\" src=\"http://www.flywind.org/uploadImages/technology/20120210112958_1328844598500700.jpg\" style=\"margin: 0px; float: none;\" /></p><p>Components to store components folder page storage pages folder, folder services storage service, the default of the three, we in the development can increase the appropriate folder, commonly used have entities stored entity, until deposited commonly used java conversion static function, data storage enumeration, mixed mixins, base can be inherited base class and so on.</p><p>hello tapestryStart。</p><p></p>Create a TapestryStart.java file under TapestryStart.tml, create a com.tapestry.app.pages file in webapp. The following look at their source code.<br /><p>TapestryStart.java in this file to create a private variable tapestry, hello read and write is the use of get+ variable names (initials) and set+ variable name (first letter) function. That is to say, using the getHello function hello to read and write using the setHello function, and so on. Here, in fact, do not have to write setHello, to write a good understanding of the convenience. Read and write together when you can use abbreviated @Property private string Hello, so read and write is already there, and later will be talked about.</p><p>TapestryStart.java<br /></p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\npublic class TapestryStart {\r\n\r\n	private String hello;\r\n\r\n	public String getHello() {\r\n		return &quot;hello Tapestry Start&quot;;\r\n	}\r\n\r\n	public void setHello(String hello) {\r\n		this.hello = hello;\r\n	}\r\n}</pre></p><p>TapestryStart.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot;\r\n      xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n \r\n    &lt;p style=&quot;color:#ff6600&quot;&gt;${hello}&lt;/p&gt;\r\n \r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 1：Hello tapestry', '');
INSERT INTO `td_c_technology` VALUES ('10', null, '2016-03-16 11:29:47', 'admin', '0755', '', 'admin', '2016-05-16 10:28:54', '<p>增、删、改、查。这是开发程序最基本的、必须掌握的事。如果看不懂可以先跳过此文，先看看后面的再回来仔细阅读，应该能更好理解。</p><p>&nbsp;</p><p>实现使用了tapestry ioc的接口开发方式，也就是一个接口DAO，一个接口方法Impl，使用的时候调用接口的方法。要做增删改查还需要实体entity以及数据库，这里使用mySql。实体与数据库的连接使用tapestry-hibernate、c3p0、mysql-connector-java.</p><p>&nbsp;</p><p>打开项目根目录下的pom.xml，增加需要的tapestry-hibernate、c3p0、mysql-connector-java、tapestry-upload连接，代码如下：</p><p>&nbsp;</p><div class=\"code\"><div>&lt;dependency&gt;</div><div>&lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;</div><div>&lt;artifactId&gt;tapestry-hibernate&lt;/artifactId&gt;</div><div>&lt;version&gt;${tapestry-release-version}&lt;/version&gt;</div><div>&lt;/dependency&gt;</div><p>&nbsp;&lt;dependency&gt;</p><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;tapestry-upload&lt;/artifactId&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;${tapestry-release-version}&lt;/version&gt;</div><div>&lt;/dependency&gt;</div><div>&lt;dependency&gt;</div><div>&lt;groupId&gt;c3p0&lt;/groupId&gt;</div><div>&lt;artifactId&gt;c3p0&lt;/artifactId&gt;</div><div>&lt;version&gt;0.9.1.2&lt;/version&gt;</div><div>&lt;/dependency&gt;</div><div>&lt;dependency&gt;</div><div>&lt;groupId&gt;mysql&lt;/groupId&gt;</div><div>&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</div><div>&lt;version&gt;5.1.17&lt;/version&gt;</div><div>&lt;/dependency&gt;</div></div><p>&nbsp;</p><p>修改服务，打开com.tapestry.app.services下的AppModule.java文件进行配置，源码如下：</p><div class=\"code\"><p>&nbsp;package com.tapestry.app.services;</p><div>&nbsp;</div><div>import java.io.IOException;</div><div>&nbsp;</div><div>import org.apache.tapestry5.*;</div><div>import org.apache.tapestry5.hibernate.HibernateCoreModule;</div><div>import org.apache.tapestry5.hibernate.HibernateModule;</div><div>import org.apache.tapestry5.hibernate.HibernateSymbols;</div><div>import org.apache.tapestry5.hibernate.HibernateTransactionAdvisor;</div><div>import org.apache.tapestry5.ioc.MappedConfiguration;</div><div>import org.apache.tapestry5.ioc.MethodAdviceReceiver;</div><div>import org.apache.tapestry5.ioc.OrderedConfiguration;</div><div>import org.apache.tapestry5.ioc.ServiceBinder;</div><div>import org.apache.tapestry5.ioc.annotations.Local;</div><div>import org.apache.tapestry5.ioc.annotations.Match;</div><div>import org.apache.tapestry5.ioc.annotations.SubModule;</div><div>import org.apache.tapestry5.services.Request;</div><div>import org.apache.tapestry5.services.RequestFilter;</div><div>import org.apache.tapestry5.services.RequestHandler;</div><div>import org.apache.tapestry5.services.Response;</div><div>import org.apache.tapestry5.upload.services.UploadModule;</div><div>import org.apache.tapestry5.upload.services.UploadSymbols;</div><div>import org.slf4j.Logger;</div><div>&nbsp;</div><div>@SubModule({HibernateModule.class, HibernateCoreModule.class,UploadModule.class})</div><div>public class AppModule</div><div>{</div><div>&nbsp; &nbsp; public static void bind(ServiceBinder binder)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; // binder.bind(MyServiceInterface.class, MyServiceImpl.class);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public static void contributeFactoryDefaults(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MappedConfiguration&lt;String, Object&gt; configuration)</div><div>&nbsp; &nbsp; {&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public static void contributeApplicationDefaults(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MappedConfiguration&lt;String, Object&gt; configuration)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(SymbolConstants.PRODUCTION_MODE, &quot;false&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(UploadSymbols.FILESIZE_MAX, &quot;50000000&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(SymbolConstants.APPLICATION_VERSION, &quot;1.0-SNAPSHOT&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration</div><div>.add(HibernateSymbols.ENTITY_SESSION_STATE_PERSISTENCE_STRATEGY_ENABLED,</div><div>&quot;true&quot;);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; @Match(&quot;*DAO&quot;)</div><div>public static void adviseTransactions(HibernateTransactionAdvisor advisor,</div><div>MethodAdviceReceiver receiver) {</div><div>advisor.addTransactionCommitAdvice(receiver);</div><div>}</div><div>&nbsp;</div><div>&nbsp; &nbsp; public RequestFilter buildTimingFilter(final Logger log)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return new RequestFilter()</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public boolean service(Request request, Response response, RequestHandler handler)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throws IOException</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; long startTime = System.currentTimeMillis();</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return handler.service(request, response);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } finally</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; long elapsed = System.currentTimeMillis() - startTime;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log.info(String.format(&quot;Request time: %d ms&quot;, elapsed));</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; };</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp;</div><div>&nbsp; &nbsp; public void contributeRequestHandler(OrderedConfiguration&lt;RequestFilter&gt; configuration,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@Local</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RequestFilter filter)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(&quot;Timing&quot;, filter);</div><div>&nbsp; &nbsp; }</div><div>}</div><div>&nbsp;</div></div><p>&nbsp;</p><p>在src/main/resources下增加hibernate.cfg.xml文件，代码如下：</p><div class=\"code\"><div>&lt;?xml version=\'1.0\' encoding=\'utf-8\'?&gt;</div><div>&lt;!--</div><div>&nbsp; &nbsp;Copyright 2007 The Apache Software Foundation</div><div>&nbsp;</div><div>&nbsp; &nbsp;Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</div><div>&nbsp; &nbsp;you may not use this file except in compliance with the License.</div><div>&nbsp; &nbsp;You may obtain a copy of the License at</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp;http://www.apache.org/licenses/LICENSE-2.0</div><div>&nbsp;</div><div>&nbsp; &nbsp;Unless required by applicable law or agreed to in writing, software</div><div>&nbsp; &nbsp;distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</div><div>&nbsp; &nbsp;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div>&nbsp; &nbsp;See the License for the specific language governing permissions and</div><div>&nbsp; &nbsp;limitations under the License.</div><div>--&gt;</div><div>&nbsp;</div><div>&lt;!DOCTYPE hibernate-configuration PUBLIC</div><div>&nbsp; &nbsp; &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;</div><div>&nbsp; &nbsp; &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;</div><div>&nbsp;</div><div>&lt;hibernate-configuration&gt;</div><div>&nbsp;</div><div>&nbsp; &lt;session-factory&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql:///example?useUnicode=true&amp;amp;characterEncoding=UTF-8&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.connection.password&quot;&gt;root&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;300&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;50&lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.c3p0.idle_test_period&quot;&gt;3000&lt;/property&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;property name=&quot;hibernate.generate_statistics&quot;&gt;true&lt;/property&gt;</div><div>&nbsp; &lt;/session-factory&gt;</div><div>&nbsp;</div><div>&nbsp;</div><div>&lt;/hibernate-configuration&gt;</div><div>&nbsp;</div></div><p>在数据库里面创建名为example的数据库。</p><p>创建com.tapestry.app.entities包，在包内创建User.java的实体。代码如下：</p><p>&nbsp;</p><div class=\"code\"><div>package com.tapestry.app.entities;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import javax.persistence.Column;</div><div>import javax.persistence.Entity;</div><div>import javax.persistence.GeneratedValue;</div><div>import javax.persistence.GenerationType;</div><div>import javax.persistence.Id;</div><div>&nbsp;</div><div>@Entity</div><div>public class User {</div><div>&nbsp;</div><div>@Id</div><div>@GeneratedValue(strategy = GenerationType.AUTO)</div><div>@Column(name=&quot;user_id&quot;)</div><div>private Long id;</div><div>&nbsp;</div><div>private String name;</div><div>&nbsp;</div><div>private int age;</div><div>&nbsp;</div><div>private Date time;</div><div>&nbsp;</div><div>public Long getId() {</div><div>return id;</div><div>}</div><div>&nbsp;</div><div>public void setId(Long id) {</div><div>this.id = id;</div><div>}</div><div>&nbsp;</div><div>public String getName() {</div><div>return name;</div><div>}</div><div>&nbsp;</div><div>public void setName(String name) {</div><div>this.name = name;</div><div>}</div><div>&nbsp;</div><div>public int getAge() {</div><div>return age;</div><div>}</div><div>&nbsp;</div><div>public void setAge(int age) {</div><div>this.age = age;</div><div>}</div><div>&nbsp;</div><div>public Date getTime() {</div><div>return time;</div><div>}</div><div>&nbsp;</div><div>public void setTime(Date time) {</div><div>this.time = time;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>创建com.tapestry.app.pages.crud包，包内创建UserCreate.java。在webapp下创建crud文件夹，文件夹内创建UserCreate.tml。他们的代码如下：</p><p>UserCreate.java</p><div class=\"code\"><p>&nbsp;</p><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.User;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class UserCreate {</div><div>&nbsp;</div><div>@Property</div><div>private User user;</div><div>&nbsp;</div><div>//导入服务接口</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//初始化user实体</div><div>void onPrepare(){</div><div>user = new User();</div><div>}</div><div>&nbsp;</div><div>//提交表单的时候执行存储,返回当前页面</div><div>Object onSuccess(){</div><div>//如果时间为空值输入系统当前时间</div><div>if(user.getTime() == null){</div><div>user.setTime(new Date());</div><div>}</div><div>dao.create(user);</div><div>return this;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>UserCreate.tml</p><div class=\"code\"><p>&nbsp;</p><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;t:form&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:errors/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;用户名：&lt;t:textfield t:id=&quot;name&quot; value=&quot;user.name&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;年龄：&lt;t:textfield t:id=&quot;age&quot; value=&quot;user.age&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;创建&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;&lt;/t:form&gt;</div><div>&nbsp;&lt;/html&gt;</div></div><p>创建服务，在com.tapestry.app.services包里创建操作数据的接口与方法：StartDAO.java与StartDAOImpl.java这是我写的增删改查代码，已经封装过很方便以后使用。源码如下：</p><p>StartDAO.java</p><div class=\"code\"><div>package com.tapestry.app.services;</div><div>&nbsp;</div><div>import java.io.Serializable;</div><div>import java.util.List;</div><div>import java.util.Map;</div><div>&nbsp;</div><div>import org.apache.tapestry5.hibernate.annotations.CommitAfter;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>public interface StartDAO {</div><div>&nbsp;</div><div>&nbsp;</div><div>&lt;T, PK extends Serializable&gt; T findByID(Class&lt;T&gt; type, PK id);</div><div>&nbsp;</div><div>@CommitAfter</div><div>&lt;T&gt; T create(T t);</div><div>&nbsp;</div><div>@CommitAfter</div><div>&lt;T&gt; T update(T t);</div><div>&nbsp;</div><div>@CommitAfter</div><div>&lt;T, PK extends Serializable&gt; void deleteByID(Class&lt;T&gt; type, PK id);</div><div>&nbsp;</div><div>&lt;T&gt; List&lt;T&gt; findWithNameQuery(String queryName, int num);</div><div>&lt;T&gt; List&lt;T&gt; findWithQuery(String queryName);</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>StartDAOImpl.java</p><div class=\"code\"><p>&nbsp;package com.tapestry.app.services;</p><div>&nbsp;</div><div>import java.io.Serializable;</div><div>import java.util.List;</div><div>import java.util.Map;</div><div>import java.util.Map.Entry;</div><div>import java.util.Set;</div><div>&nbsp;</div><div>import org.hibernate.Query;</div><div>import org.hibernate.Session;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>public class StartDAOImpl implements StartDAO {</div><div>&nbsp;</div><div>private Session session;</div><div>&nbsp;</div><div>public StartDAOImpl(Session session){</div><div>this.session = session;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>@SuppressWarnings(&quot;unchecked&quot;)</div><div>public &lt;T, PK extends Serializable&gt; T findByID(Class&lt;T&gt; type, PK id){<span style=\"white-space:pre;\"> </span></div><div>return (T) session.get(type, id);</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>public &lt;T&gt; T create(T t){</div><div>session.persist(t);</div><div>session.flush();</div><div>session.refresh(t);</div><div>//session.save(t);</div><div>return t;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>public &lt;T&gt; T update(T t){</div><div>session.merge(t);</div><div>return t;</div><div>}</div><div>&nbsp;</div><div>public &lt;T, PK extends Serializable&gt; void deleteByID(Class&lt;T&gt; type, PK id){</div><div>@SuppressWarnings(&quot;unchecked&quot;)</div><div>T t = (T) session.get(type, id);</div><div>session.delete(t);</div><div>}</div><div>&nbsp;</div><div>@SuppressWarnings(&quot;unchecked&quot;)</div><div>public &lt;T&gt; List&lt;T&gt; findWithNameQuery(String queryName, int num){</div><div>return session.createQuery(queryName).setMaxResults(num).list();</div><div>}</div><div>&nbsp;</div><div><div>@SuppressWarnings(&quot;unchecked&quot;)</div><div>public &lt;T&gt; List&lt;T&gt; findWithQuery(String queryName){</div><div>return session.createQuery(queryName).list();</div><div>}</div></div><div>&nbsp; &nbsp;&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>最后修改下AppModule.java把服务绑定起来，代码如下：</p><div class=\"code\"><div>package com.tapestry.app.services;</div><div>&nbsp;</div><div>import java.io.IOException;</div><div>&nbsp;</div><div>import org.apache.tapestry5.*;</div><div>import org.apache.tapestry5.hibernate.HibernateCoreModule;</div><div>import org.apache.tapestry5.hibernate.HibernateModule;</div><div>import org.apache.tapestry5.hibernate.HibernateSymbols;</div><div>import org.apache.tapestry5.hibernate.HibernateTransactionAdvisor;</div><div>import org.apache.tapestry5.ioc.MappedConfiguration;</div><div>import org.apache.tapestry5.ioc.MethodAdviceReceiver;</div><div>import org.apache.tapestry5.ioc.OrderedConfiguration;</div><div>import org.apache.tapestry5.ioc.ServiceBinder;</div><div>import org.apache.tapestry5.ioc.annotations.Local;</div><div>import org.apache.tapestry5.ioc.annotations.Match;</div><div>import org.apache.tapestry5.ioc.annotations.SubModule;</div><div>import org.apache.tapestry5.services.Request;</div><div>import org.apache.tapestry5.services.RequestFilter;</div><div>import org.apache.tapestry5.services.RequestHandler;</div><div>import org.apache.tapestry5.services.Response;</div><div>import org.apache.tapestry5.upload.services.UploadModule;</div><div>import org.apache.tapestry5.upload.services.UploadSymbols;</div><div>import org.slf4j.Logger;</div><div>&nbsp;</div><div>@SubModule({HibernateModule.class, HibernateCoreModule.class,UploadModule.class})</div><div>public class AppModule</div><div>{</div><div>&nbsp; &nbsp; public static void bind(ServiceBinder binder)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; binder.bind(StartDAO.class, StartDAOImpl.class);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public static void contributeFactoryDefaults(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MappedConfiguration&lt;String, Object&gt; configuration)</div><div>&nbsp; &nbsp; {&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public static void contributeApplicationDefaults(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MappedConfiguration&lt;String, Object&gt; configuration)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(SymbolConstants.PRODUCTION_MODE, &quot;false&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(UploadSymbols.FILESIZE_MAX, &quot;50000000&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(SymbolConstants.APPLICATION_VERSION, &quot;1.0-SNAPSHOT&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration</div><div>.add(HibernateSymbols.ENTITY_SESSION_STATE_PERSISTENCE_STRATEGY_ENABLED,</div><div>&quot;true&quot;);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; @Match(&quot;*DAO&quot;)</div><div>public static void adviseTransactions(HibernateTransactionAdvisor advisor,</div><div>MethodAdviceReceiver receiver) {</div><div>advisor.addTransactionCommitAdvice(receiver);</div><div>}</div><div>&nbsp;</div><div>&nbsp; &nbsp; public RequestFilter buildTimingFilter(final Logger log)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return new RequestFilter()</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public boolean service(Request request, Response response, RequestHandler handler)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throws IOException</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; long startTime = System.currentTimeMillis();</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return handler.service(request, response);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } finally</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; long elapsed = System.currentTimeMillis() - startTime;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log.info(String.format(&quot;Request time: %d ms&quot;, elapsed));</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; };</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp;</div><div>&nbsp; &nbsp; public void contributeRequestHandler(OrderedConfiguration&lt;RequestFilter&gt; configuration,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@Local</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RequestFilter filter)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(&quot;Timing&quot;, filter);</div><div>&nbsp; &nbsp; }</div><div>}</div></div><div>&nbsp;运行<a href=\"http://localhost:8080/tapestryStart/crud/usercreate\" target=\"_blank\" title=\"\">http://localhost:8080/tapestryStart/crud/usercreate</a>可以添加数据了<img alt=\"\" src=\"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/32.gif\" /></div>', null, '17', '第二讲：tapestry增删改查---添加数据', '<p><span style=\"color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; background-color: rgb(255, 255, 255);\"></span></p><p></p>Implementation of the use of IOC tapestry interface development, that is, an interface DAO, an interface method Impl, the use of the time to call the interface method. Do crud also need entity entity and database, this is the use of mySql. Entity and database connection using c3p0, tapestry-hibernate, mysql-connector-java.<br />Open the project under the root directory of the pom.xml, the need to increase the tapestry-hibernate, c3p0, mysql-connector-java, tapestry-upload connection, the code is as follows:<p></p><p></p><pre class=\"prettyprint lang-html\">&lt;dependency&gt;\r\n&lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n&lt;artifactId&gt;tapestry-hibernate&lt;/artifactId&gt;\r\n&lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n\r\n            &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tapestry-upload&lt;/artifactId&gt;\r\n            &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;c3p0&lt;/groupId&gt;\r\n&lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n&lt;version&gt;0.9.1.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&lt;version&gt;5.1.17&lt;/version&gt;\r\n&lt;/dependency&gt;</pre><p></p><p>Modify the service, open the AppModule.java file under the com.tapestry.app.services configuration, the source code is as follows:</p><p></p><pre class=\"prettyprint lang-java\">package com.tapestry.app.services;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.apache.tapestry5.*;\r\nimport org.apache.tapestry5.hibernate.HibernateCoreModule;\r\nimport org.apache.tapestry5.hibernate.HibernateModule;\r\nimport org.apache.tapestry5.hibernate.HibernateSymbols;\r\nimport org.apache.tapestry5.hibernate.HibernateTransactionAdvisor;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.MethodAdviceReceiver;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Local;\r\nimport org.apache.tapestry5.ioc.annotations.Match;\r\nimport org.apache.tapestry5.ioc.annotations.SubModule;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.RequestFilter;\r\nimport org.apache.tapestry5.services.RequestHandler;\r\nimport org.apache.tapestry5.services.Response;\r\nimport org.apache.tapestry5.upload.services.UploadModule;\r\nimport org.apache.tapestry5.upload.services.UploadSymbols;\r\nimport org.slf4j.Logger;\r\n\r\n@SubModule({ HibernateModule.class, HibernateCoreModule.class, UploadModule.class })\r\npublic class AppModule {\r\n	public static void bind(ServiceBinder binder) {\r\n		// binder.bind(MyServiceInterface.class, MyServiceImpl.class);\r\n	}\r\n\r\n	public static void contributeFactoryDefaults(MappedConfiguration&lt;String, Object&gt; configuration) {\r\n		configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);\r\n	}\r\n\r\n	public static void contributeApplicationDefaults(MappedConfiguration&lt;String, Object&gt; configuration) {\r\n		configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en&quot;);\r\n		configuration.add(SymbolConstants.PRODUCTION_MODE, &quot;false&quot;);\r\n		configuration.add(UploadSymbols.FILESIZE_MAX, &quot;50000000&quot;);\r\n		configuration.add(SymbolConstants.APPLICATION_VERSION, &quot;1.0-SNAPSHOT&quot;);\r\n		configuration.add(HibernateSymbols.ENTITY_SESSION_STATE_PERSISTENCE_STRATEGY_ENABLED, &quot;true&quot;);\r\n	}\r\n\r\n	@Match(&quot;*DAO&quot;)\r\n	public static void adviseTransactions(HibernateTransactionAdvisor advisor, MethodAdviceReceiver receiver) {\r\n		advisor.addTransactionCommitAdvice(receiver);\r\n	}\r\n\r\n	public RequestFilter buildTimingFilter(final Logger log) {\r\n		return new RequestFilter() {\r\n			public boolean service(Request request, Response response, RequestHandler handler) throws IOException {\r\n				long startTime = System.currentTimeMillis();\r\n\r\n				try {\r\n					return handler.service(request, response);\r\n				} finally {\r\n					long elapsed = System.currentTimeMillis() - startTime;\r\n\r\n					log.info(String.format(&quot;Request time: %d ms&quot;, elapsed));\r\n				}\r\n			}\r\n		};\r\n	}\r\n\r\n	public void contributeRequestHandler(OrderedConfiguration&lt;RequestFilter&gt; configuration,\r\n			@Local RequestFilter filter) {\r\n		configuration.add(&quot;Timing&quot;, filter);\r\n	}\r\n}</pre><p></p><p>In src/main/resources to increase the hibernate.cfg.xml file, the code is as follows:</p><p></p><pre class=\"prettyprint lang-html\">&lt;?xml version=\'1.0\' encoding=\'utf-8\'?&gt;\r\n&lt;!--\r\n   Copyright 2007 The Apache Software Foundation\r\n \r\n   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n \r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n \r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n--&gt;\r\n \r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n    &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\r\n    &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n \r\n&lt;hibernate-configuration&gt;\r\n \r\n  &lt;session-factory&gt;\r\n    &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql:///example?useUnicode=true&amp;characterEncoding=UTF-8&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.connection.password&quot;&gt;root&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n \r\n    &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n    &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n \r\n    &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;300&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;50&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.idle_test_period&quot;&gt;3000&lt;/property&gt;\r\n \r\n    &lt;property name=&quot;hibernate.generate_statistics&quot;&gt;true&lt;/property&gt;\r\n  &lt;/session-factory&gt;\r\n \r\n \r\n&lt;/hibernate-configuration&gt;</pre><p></p><p></p>Create a database named example in the database.<br /><p>Create a com.tapestry.app.entities package, create a User.java entity within the package. Code as follows:</p><p></p><pre class=\"prettyprint lang-java\">package com.tapestry.app.entities;\r\n\r\nimport java.util.Date;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class User {\r\n\r\n	@Id\r\n	@GeneratedValue(strategy = GenerationType.AUTO)\r\n	@Column(name = &quot;user_id&quot;)\r\n	private Long id;\r\n\r\n	private String name;\r\n\r\n	private int age;\r\n\r\n	private Date time;\r\n\r\n	public Long getId() {\r\n		return id;\r\n	}\r\n\r\n	public void setId(Long id) {\r\n		this.id = id;\r\n	}\r\n\r\n	public String getName() {\r\n		return name;\r\n	}\r\n\r\n	public void setName(String name) {\r\n		this.name = name;\r\n	}\r\n\r\n	public int getAge() {\r\n		return age;\r\n	}\r\n\r\n	public void setAge(int age) {\r\n		this.age = age;\r\n	}\r\n\r\n	public Date getTime() {\r\n		return time;\r\n	}\r\n\r\n	public void setTime(Date time) {\r\n		this.time = time;\r\n	}\r\n}</pre><br /><p></p><p>Create pages com.tapestry.app.pages.crud，then create UserCreate.java。In webapp create folder name is crud，in the folder create UserCreate.tml。Code as follows:<br /></p><p>UserCreate.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.User;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class UserCreate {\r\n\r\n	@Property\r\n	private User user;\r\n\r\n	// 导入服务接口\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 初始化user实体\r\n	void onPrepare() {\r\n		user = new User();\r\n	}\r\n\r\n	// 提交表单的时候执行存储,返回当前页面\r\n	Object onSuccess() {\r\n		// 如果时间为空值输入系统当前时间\r\n		if (user.getTime() == null) {\r\n			user.setTime(new Date());\r\n		}\r\n		dao.create(user);\r\n		return this;\r\n	}\r\n}</pre><p></p><div><div>UserCreate.tml</div><div><br /></div><div><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;t:form&gt;\r\n  &lt;t:errors/&gt;\r\n  &lt;p&gt;用户名：&lt;t:textfield t:id=&quot;name&quot; value=&quot;user.name&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;年龄：&lt;t:textfield t:id=&quot;age&quot; value=&quot;user.age&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;创建&quot;/&gt;&lt;/p&gt;\r\n &lt;/t:form&gt;\r\n &lt;/html&gt;</pre><br /></div></div><p>Create service，in com.tapestry.app.services：StartDAO.java and StartDAOImpl.java.Code as follows：</p><p>StartDAO.java</p><p></p><pre class=\"prettyprint lang-java\">package com.tapestry.app.services;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport org.apache.tapestry5.hibernate.annotations.CommitAfter;\r\n\r\npublic interface StartDAO {\r\n\r\n	&lt;T, PK extends Serializable&gt; T findByID(Class&lt;T&gt; type, PK id);\r\n\r\n	@CommitAfter\r\n	&lt;T&gt; T create(T t);\r\n\r\n	@CommitAfter\r\n	&lt;T&gt; T update(T t);\r\n\r\n	@CommitAfter\r\n	&lt;T, PK extends Serializable&gt; void deleteByID(Class&lt;T&gt; type, PK id);\r\n\r\n	&lt;T&gt; List&lt;T&gt; findWithNameQuery(String queryName, int num);\r\n\r\n	&lt;T&gt; List&lt;T&gt; findWithQuery(String queryName);\r\n\r\n}</pre><p></p><p>StartDAOImpl.java</p><p></p><pre class=\"prettyprint lang-java\">package com.tapestry.app.services;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Map.Entry;\r\nimport java.util.Set;\r\n\r\nimport org.hibernate.Query;\r\nimport org.hibernate.Session;\r\n\r\npublic class StartDAOImpl implements StartDAO {\r\n\r\n	private Session session;\r\n\r\n	public StartDAOImpl(Session session) {\r\n		this.session = session;\r\n	}\r\n\r\n	@SuppressWarnings(&quot;unchecked&quot;)\r\n	public &lt;T, PK extends Serializable&gt; T findByID(Class&lt;T&gt; type, PK id) {\r\n		return (T) session.get(type, id);\r\n	}\r\n\r\n	public &lt;T&gt; T create(T t) {\r\n		session.persist(t);\r\n		session.flush();\r\n		session.refresh(t);\r\n		// session.save(t);\r\n		return t;\r\n	}\r\n\r\n	public &lt;T&gt; T update(T t) {\r\n		session.merge(t);\r\n		return t;\r\n	}\r\n\r\n	public &lt;T, PK extends Serializable&gt; void deleteByID(Class&lt;T&gt; type, PK id) {\r\n		@SuppressWarnings(&quot;unchecked&quot;)\r\n		T t = (T) session.get(type, id);\r\n		session.delete(t);\r\n	}\r\n\r\n	@SuppressWarnings(&quot;unchecked&quot;)\r\n	public &lt;T&gt; List&lt;T&gt; findWithNameQuery(String queryName, int num) {\r\n		return session.createQuery(queryName).setMaxResults(num).list();\r\n	}\r\n\r\n	@SuppressWarnings(&quot;unchecked&quot;)\r\n	public &lt;T&gt; List&lt;T&gt; findWithQuery(String queryName) {\r\n		return session.createQuery(queryName).list();\r\n	}\r\n\r\n}</pre><p></p><p>Last modified&nbsp;AppModule.java and bind services.Code as follows：</p><p></p><pre class=\"prettyprint lang-java\">package com.tapestry.app.services;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.apache.tapestry5.*;\r\nimport org.apache.tapestry5.hibernate.HibernateCoreModule;\r\nimport org.apache.tapestry5.hibernate.HibernateModule;\r\nimport org.apache.tapestry5.hibernate.HibernateSymbols;\r\nimport org.apache.tapestry5.hibernate.HibernateTransactionAdvisor;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.MethodAdviceReceiver;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Local;\r\nimport org.apache.tapestry5.ioc.annotations.Match;\r\nimport org.apache.tapestry5.ioc.annotations.SubModule;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.RequestFilter;\r\nimport org.apache.tapestry5.services.RequestHandler;\r\nimport org.apache.tapestry5.services.Response;\r\nimport org.apache.tapestry5.upload.services.UploadModule;\r\nimport org.apache.tapestry5.upload.services.UploadSymbols;\r\nimport org.slf4j.Logger;\r\n\r\n@SubModule({ HibernateModule.class, HibernateCoreModule.class, UploadModule.class })\r\npublic class AppModule {\r\n	public static void bind(ServiceBinder binder) {\r\n		binder.bind(StartDAO.class, StartDAOImpl.class);\r\n	}\r\n\r\n	public static void contributeFactoryDefaults(MappedConfiguration&lt;String, Object&gt; configuration) {\r\n		configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);\r\n	}\r\n\r\n	public static void contributeApplicationDefaults(MappedConfiguration&lt;String, Object&gt; configuration) {\r\n		configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en&quot;);\r\n		configuration.add(SymbolConstants.PRODUCTION_MODE, &quot;false&quot;);\r\n		configuration.add(UploadSymbols.FILESIZE_MAX, &quot;50000000&quot;);\r\n		configuration.add(SymbolConstants.APPLICATION_VERSION, &quot;1.0-SNAPSHOT&quot;);\r\n		configuration.add(HibernateSymbols.ENTITY_SESSION_STATE_PERSISTENCE_STRATEGY_ENABLED, &quot;true&quot;);\r\n	}\r\n\r\n	@Match(&quot;*DAO&quot;)\r\n	public static void adviseTransactions(HibernateTransactionAdvisor advisor, MethodAdviceReceiver receiver) {\r\n		advisor.addTransactionCommitAdvice(receiver);\r\n	}\r\n\r\n	public RequestFilter buildTimingFilter(final Logger log) {\r\n		return new RequestFilter() {\r\n			public boolean service(Request request, Response response, RequestHandler handler) throws IOException {\r\n				long startTime = System.currentTimeMillis();\r\n\r\n				try {\r\n					return handler.service(request, response);\r\n				} finally {\r\n					long elapsed = System.currentTimeMillis() - startTime;\r\n\r\n					log.info(String.format(&quot;Request time: %d ms&quot;, elapsed));\r\n				}\r\n			}\r\n		};\r\n	}\r\n\r\n	public void contributeRequestHandler(OrderedConfiguration&lt;RequestFilter&gt; configuration,\r\n			@Local RequestFilter filter) {\r\n		configuration.add(&quot;Timing&quot;, filter);\r\n	}\r\n}</pre><p></p><div>run&nbsp;<a href=\"http://localhost:8080/tapestryStart/crud/usercreate\" target=\"_blank\" title=\"\">http://localhost:8080/tapestryStart/crud/usercreate</a><img alt=\"\" src=\"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/32.gif\" /></div>', 'Lesson 2：Tapestry CRUD---Create', '');
INSERT INTO `td_c_technology` VALUES ('19', null, '2016-04-18 16:38:53', 'admin', '0755', '', 'admin', '2016-06-24 16:12:09', '<p>Tapestry cms技术架构：</p><p>后端:</p><p>Tapestry5.4</p><p>Tapestry-widget &nbsp;飞风开发的tapestry组件库</p><p>Tapestry-security 基于shiro系统安全框架组件，官方文档：<a href=\"http://www.tynamo.org/tapestry-security+guide/\" target=\"_blank\">http://www.tynamo.org/tapestry-security+guide/</a></p><p>Hibernate4.3.6+Spring4.0.3</p><p>Tapestry-resteasy 基于<a href=\"http://www.jboss.org/resteasy\" style=\"box-sizing: border-box; color: rgb(66, 139, 202); font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; background-color: rgb(255, 255, 255);\">JBoss’ RESTEasy</a>的rest框架，官方文档：<a href=\"http://www.tynamo.org/tapestry-resteasy+guide/\" target=\"_blank\">http://www.tynamo.org/tapestry-resteasy+guide/</a><br /></p><p>Redis+MongoDB</p><p>前端:jQuery+requireJS+bootstrap+AdminLTE</p><p>访问地址:http://www.flywind.org/login</p><h4><span style=\"font-family:Microsoft YaHei;color:#ff0000;\">测试 账号/密码:&nbsp;tapestrycms/123456</span></h4><p><span style=\"color:#ff6600;\">注意：日志管理存储使用免费的MongoDB，数据从国外的<a href=\"https://mlab.com/login/\" target=\"_blank\">Mlab</a>提供<span style=\"color: rgb(255, 102, 0);\">免费<span style=\"color: rgb(255, 102, 0);\">500M&nbsp;</span></span>MongoDB获得，请求时间可能比较长，请耐心等待...</span></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160623112825.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160623112845.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160623112901.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"http://www.flywind.org/uploadImages/editor/20160527115729.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160527115729.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160527115742.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160527115752.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160527115812.png\" alt=\"\" /><br /></p>', '/uploadImages/contentData/technology_1b6c52fa-78cd-4037-bec1-858110fd32e2.gif', '15', 'Tapestry cms', '<p>Tapestry cms&nbsp;technology framework:</p><p>Back end:</p><p>Tapestry5.4</p><p>Tapestry-widget &nbsp;Tapestry component library for the development of flywind</p><p>Tapestry-security Based on the Shiro system security framework components, the official document:<a href=\"http://www.tynamo.org/tapestry-security+guide/\" target=\"_blank\">http://www.tynamo.org/tapestry-security+guide/</a></p><p>Hibernate4.3.6+Spring4.0.3</p><p>Tapestry-resteasy Based on&nbsp;<a href=\"http://www.jboss.org/resteasy\" style=\"box-sizing: border-box; color: rgb(66, 139, 202); font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; background-color: rgb(255, 255, 255);\">JBoss’ RESTEasy</a>,&nbsp;the official document:<a href=\"http://www.tynamo.org/tapestry-resteasy+guide/\" target=\"_blank\">http://www.tynamo.org/tapestry-resteasy+guide/</a><br /></p><p>Redis+MongoDB<br /></p><p>front end:jQuery+requireJS+bootstrap+AdminLTE</p><p>URL:http://www.flywind.org/login</p><h4><span style=\"font-family:Microsoft YaHei;color:#ff0000;\">Test account/password:&nbsp;tapestrycms/123456</span></h4><p><span style=\"color:#ff9900;\">Note:using free MongoDB, data from foreign <a href=\"https://mlab.com/login/\" target=\"_blank\">Mlab</a> to provide free MongoDB 500M storage to recore &nbsp;log management ,data request time may be relatively long, please wait patiently...</span><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160623112825.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160623112845.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"/uploadImages/editor/20160623112901.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"http://www.flywind.org/uploadImages/editor/20160527115729.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"http://www.flywind.org/uploadImages/editor/20160527115742.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"http://www.flywind.org/uploadImages/editor/20160527115752.png\" alt=\"\" /><br /></p><p><img class=\"img-responsive\" src=\"http://www.flywind.org/uploadImages/editor/20160527115812.png\" alt=\"\" /></p>', 'Tapestry cms', '');
INSERT INTO `td_c_technology` VALUES ('20', null, '2016-04-18 16:44:47', 'admin', '0755', '', 'admin', '2016-06-07 17:12:45', '<p>Tapestry Widgets based on jQuery integration for Tapestry 5.4,is a component lib.</p><p>pom.xml</p><p></p><pre class=\"prettyprint lang-html\">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;org.flywind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tapestry-widgets&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;name&gt;tapestry-widgets Tapestry 5 Application&lt;/name&gt;\r\n        &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tapestry-core&lt;/artifactId&gt;\r\n      &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tapestry-spring&lt;/artifactId&gt;\r\n      &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tapestry-upload&lt;/artifactId&gt;\r\n      &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n			&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n			&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n			&lt;version&gt;${javax.servlet.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n \r\n    &lt;dependency&gt;\r\n			&lt;groupId&gt;org.tynamo&lt;/groupId&gt;\r\n			&lt;artifactId&gt;tynamo-common&lt;/artifactId&gt;\r\n			&lt;version&gt;0.0.3&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.tynamo&lt;/groupId&gt;\r\n			&lt;artifactId&gt;tynamo-test&lt;/artifactId&gt;\r\n			&lt;version&gt;0.1.1&lt;/version&gt;\r\n			&lt;scope&gt;test&lt;/scope&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入log4依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n			&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n			&lt;version&gt;${slf4j.log4j12.verison}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- UTILS begin --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;${commons-lang3.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8.3&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- UTILS end --&gt;\r\n        &lt;!-- json处理jar --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n            &lt;classifier&gt;jdk15&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;xom&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xom&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.5&lt;/version&gt;\r\n	        &lt;exclusions&gt;  \r\n	            &lt;exclusion&gt;\r\n	                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;  \r\n	                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n	            &lt;/exclusion&gt;\r\n	            &lt;exclusion&gt;  \r\n                    &lt;artifactId&gt;xerces&lt;/artifactId&gt;  \r\n                    &lt;groupId&gt;xercesImpl&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;  \r\n                    &lt;artifactId&gt;xalan&lt;/artifactId&gt;  \r\n                    &lt;groupId&gt;xalan&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n	        &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- json处理jar --&gt;\r\n		\r\n		&lt;!-- spring框架jar包 start --&gt;\r\n		&lt;!-- 加入spring mvc依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入spring-orm依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入spring-beans依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		   \r\n		&lt;!-- 加入spring-context-support依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入spring测试依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入MySQL数据库连接的依赖包 start--&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n			&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n			&lt;version&gt;5.1.17&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入MySQL数据库连接的依赖包 end--&gt;\r\n\r\n		&lt;!-- 加入druid依赖包 start--&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n			&lt;artifactId&gt;druid&lt;/artifactId&gt;\r\n			&lt;version&gt;0.2.23&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入druid依赖包 end--&gt;\r\n		\r\n		&lt;!-- 加入hibernate-core依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n			&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- Spring AOP start --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n			&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n			&lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n			&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n			&lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- Spring AOP end --&gt;\r\n		\r\n		&lt;!-- 加入fastjson依赖包  start--&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n			&lt;artifactId&gt;fastjson&lt;/artifactId&gt;\r\n			&lt;version&gt;${fastjson.verison}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入fastjson依赖包  end--&gt;\r\n		\r\n		&lt;!-- &lt;dependency&gt;\r\n		  &lt;groupId&gt;org.tynamo&lt;/groupId&gt;\r\n		  &lt;artifactId&gt;tapestry-ckeditor&lt;/artifactId&gt;\r\n		  &lt;version&gt;0.0.1&lt;/version&gt;\r\n		&lt;/dependency&gt; --&gt;\r\n        \r\n  &lt;/dependencies&gt;\r\n \r\n  &lt;build&gt;\r\n  &lt;finalName&gt;tapestry-widgets&lt;/finalName&gt;\r\n  		&lt;resources&gt;\r\n			&lt;resource&gt;\r\n				&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n			&lt;/resource&gt;\r\n		&lt;/resources&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n				&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n				&lt;configuration&gt;\r\n					&lt;suiteXmlFiles&gt;\r\n						&lt;suiteXmlFile&gt;src/test/conf/testng.xml&lt;/suiteXmlFile&gt;\r\n					&lt;/suiteXmlFiles&gt;\r\n					&lt;argLine&gt;-Xmx500m&lt;/argLine&gt;\r\n					&lt;redirectTestOutputToFile&gt;false&lt;/redirectTestOutputToFile&gt;\r\n				&lt;/configuration&gt;\r\n			&lt;/plugin&gt;\r\n \r\n      &lt;plugin&gt;\r\n           &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n           &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n           &lt;configuration&gt;\r\n           &lt;archive&gt;\r\n             &lt;manifestEntries&gt;\r\n               &lt;Tapestry-Module-Classes&gt;org.flywind.widgets.services.WidgetModule&lt;/Tapestry-Module-Classes&gt;\r\n             &lt;/manifestEntries&gt;\r\n           &lt;/archive&gt;\r\n           &lt;/configuration&gt;\r\n       &lt;/plugin&gt;\r\n       \r\n       &lt;plugin&gt;\r\n				&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n				&lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;\r\n				&lt;version&gt;9.2.4.v20141103&lt;/version&gt;\r\n				&lt;configuration&gt;\r\n					&lt;contextPath&gt;/&lt;/contextPath&gt;\r\n					&lt;useTestClasspath&gt;true&lt;/useTestClasspath&gt;\r\n					&lt;webAppSourceDirectory&gt;${basedir}/src/test/webapp&lt;/webAppSourceDirectory&gt;\r\n					&lt;systemProperties&gt;\r\n						&lt;systemProperty&gt;\r\n							&lt;name&gt;jetty.port&lt;/name&gt;\r\n							&lt;value&gt;666&lt;/value&gt;\r\n						&lt;/systemProperty&gt;\r\n						&lt;systemProperty&gt;\r\n							&lt;name&gt;tapestry.compress-whitespace&lt;/name&gt;\r\n							&lt;value&gt;false&lt;/value&gt;\r\n						&lt;/systemProperty&gt;\r\n						&lt;systemProperty&gt;\r\n							&lt;name&gt;tapestry.production-mode&lt;/name&gt;\r\n							&lt;value&gt;false&lt;/value&gt;\r\n						&lt;/systemProperty&gt;\r\n					&lt;/systemProperties&gt;\r\n				&lt;/configuration&gt;\r\n			&lt;/plugin&gt;\r\n \r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;properties&gt;\r\n    &lt;tapestry-release-version&gt;5.4.1&lt;/tapestry-release-version&gt;\r\n    &lt;javax.servlet.version&gt;2.5&lt;/javax.servlet.version&gt;\r\n    &lt;slf4j.log4j12.verison&gt;1.7.5&lt;/slf4j.log4j12.verison&gt;\r\n    &lt;commons-lang3.version&gt;3.1&lt;/commons-lang3.version&gt;\r\n    &lt;spring.version&gt;4.0.3.RELEASE&lt;/spring.version&gt;\r\n    &lt;cms.business.version&gt;1.0-SNAPSHOT&lt;/cms.business.version&gt;\r\n    &lt;hibernate.version&gt;4.3.6.Final&lt;/hibernate.version&gt;\r\n    &lt;aspectj.version&gt;1.7.3&lt;/aspectj.version&gt;\r\n    &lt;fastjson.verison&gt;1.1.37&lt;/fastjson.verison&gt;\r\n  &lt;/properties&gt;\r\n&lt;/project&gt;\r\n</pre>WidgetModule.java<br /><p></p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.widgets.services;\r\n\r\nimport org.apache.tapestry5.SymbolConstants;\r\nimport org.apache.tapestry5.annotations.Path;\r\nimport org.apache.tapestry5.ioc.Configuration;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.Resource;\r\nimport org.apache.tapestry5.ioc.ScopeConstants;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Contribute;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.ioc.services.FactoryDefaults;\r\nimport org.apache.tapestry5.ioc.services.SymbolProvider;\r\nimport org.apache.tapestry5.services.HttpServletRequestFilter;\r\nimport org.apache.tapestry5.services.LibraryMapping;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptModuleConfiguration;\r\nimport org.apache.tapestry5.services.javascript.ModuleManager;\r\nimport org.flywind.widgets.WidgetSymbolConstants;\r\n\r\n/**\r\n * &lt;p&gt;tapestry ioc配置&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2015年10月30日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class WidgetModule\r\n{\r\n	/**\r\n     * 服务的绑定，绑定之后可以使用@Inject注入，在项目中调用\r\n     * @param binder 服务绑定器\r\n     */\r\n    public static void bind(ServiceBinder binder)\r\n    {\r\n    	//ajax上传的服务\r\n    	binder.bind(AjaxUploadDecoder.class, AjaxUploadDecoderImpl.class).scope(ScopeConstants.PERTHREAD);\r\n    }\r\n    \r\n    /**\r\n     * 提供工厂默认配置，也可自己定义\r\n     * @param configuration IOC配置\r\n     */\r\n    @Contribute(SymbolProvider.class)\r\n	@FactoryDefaults\r\n	public static void contributeFactoryDefaults(\r\n			MappedConfiguration&lt;String, Object&gt; configuration) {\r\n    	//定义资源路径\r\n        configuration.add(WidgetSymbolConstants.WIDGET_PLUGINS_PATH, &quot;classpath:/META-INF/modules/plugins&quot;);\r\n        configuration.add(WidgetSymbolConstants.WIDGET_PLUGINS_ASSETS_PATH, &quot;classpath:/META-INF/assets/plugins&quot;);\r\n        configuration.add(WidgetSymbolConstants.WIDGET_MODULES_PATH, &quot;classpath:/META-INF/modules&quot;);\r\n        configuration.add(WidgetSymbolConstants.WIDGET_KISSY_PATH, &quot;classpath:org/flywind/widgets/build&quot;);\r\n        \r\n      \r\n\r\n    }\r\n    \r\n    public static void contributeApplicationDefaults(\r\n            MappedConfiguration&lt;String, Object&gt; configuration)\r\n    {\r\n    	//定义jQuery模块的名称\r\n        configuration.add(SymbolConstants.JAVASCRIPT_INFRASTRUCTURE_PROVIDER, &quot;jquery&quot;);\r\n        //压缩JS，在开发模式建议设为false方便开发测试\r\n        //configuration.add(SymbolConstants.MINIFICATION_ENABLED, true);\r\n        \r\n    }\r\n    \r\n    /**\r\n     * 组件名称定义\r\n     * @param configuration\r\n     */\r\n    public static void contributeComponentClassResolver(Configuration&lt;LibraryMapping&gt; configuration)\r\n	{\r\n		configuration.add(new LibraryMapping(&quot;widgets&quot;, &quot;org.flywind.widgets&quot;));\r\n	}\r\n    \r\n    /**\r\n     * 贡献组件静态资源目录，组件开发时未贡献的目录在项目中无法调用\r\n     * @param configuration\r\n     */\r\n    public static void contributeClasspathAssetAliasManager(\r\n			MappedConfiguration&lt;String, String&gt; configuration) {\r\n		//定义modules资源路径,如果是modules也可以不定义，默认会是modules这个文件夹\r\n		configuration.add(&quot;widget.modules.path&quot;, &quot;META-INF/modules&quot;);\r\n	}\r\n    \r\n    /**\r\n     * requireJS shim---注册jQuery模块\r\n     */\r\n    @Contribute(ModuleManager.class)\r\n	public static void setupComponentsShims(\r\n			MappedConfiguration&lt;String, Object&gt; configuration,\r\n			@Inject @Path(&quot;${widget.plugins.path}/datatables/jquery.dataTables.js&quot;) Resource datatable,\r\n			@Inject @Path(&quot;${widget.plugins.path}/jquery/ui/widget.js&quot;) Resource widget,\r\n			@Inject @Path(&quot;${widget.plugins.path}/jquery/ui/jquery.fileuploader.js&quot;) Resource fileupload,\r\n			@Inject @Path(&quot;${widget.plugins.path}/jquery/jquery.json-2.4.js&quot;) Resource json,\r\n			@Inject @Path(&quot;${widget.plugins.path}/datetimepicker/jquery.datetimepicker.js&quot;) Resource datetimepicker,\r\n			@Inject @Path(&quot;${widget.plugins.path}/easyui/jquery.easyui.min.js&quot;) Resource easyui,\r\n			@Inject @Path(&quot;${widget.plugins.path}/easyui/datagrid-detailview.js&quot;) Resource griddetailview,\r\n			@Inject @Path(&quot;${widget.plugins.path}/paginate/bootstrap-paginator.js&quot;) Resource pager,\r\n			@Inject @Path(&quot;${widget.plugins.path}/artdialog/jquery.artDialog.min.js&quot;) Resource artdialog) {\r\n\r\n		configuration.add(&quot;plugin/datatable&quot;,new JavaScriptModuleConfiguration(datatable).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/widget&quot;,new JavaScriptModuleConfiguration(widget).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/fileupload&quot;,new JavaScriptModuleConfiguration(fileupload).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/json&quot;,new JavaScriptModuleConfiguration(json).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/datetimepicker&quot;,new JavaScriptModuleConfiguration(datetimepicker).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/easyui&quot;,new JavaScriptModuleConfiguration(easyui).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/griddetailview&quot;,new JavaScriptModuleConfiguration(griddetailview).dependsOn(&quot;jquery&quot;,&quot;plugin/easyui&quot;));\r\n		configuration.add(&quot;plugin/pager&quot;,new JavaScriptModuleConfiguration(pager).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/adialog&quot;,new JavaScriptModuleConfiguration(artdialog).dependsOn(&quot;jquery&quot;));\r\n\r\n		\r\n	} \r\n    \r\n    /**\r\n     * ajax文件上传HttpServletRequestFilter\r\n     * @param configuration\r\n     * @param ajaxUploadDecoder\r\n     */\r\n    public static void contributeHttpServletRequestHandler(\r\n			final OrderedConfiguration&lt;HttpServletRequestFilter&gt; configuration,\r\n			final AjaxUploadDecoder ajaxUploadDecoder) {\r\n		configuration.add(&quot;AjaxUploadFilter&quot;,new AjaxUploadServletRequestFilter(ajaxUploadDecoder),&quot;after:IgnoredPaths&quot;);\r\n	}\r\n    \r\n}\r\n</pre><p>WidgetSymbolConstants.java</p><p><pre class=\"prettyprint lang-java\">package org.flywind.widgets;\r\n\r\npublic class WidgetSymbolConstants {\r\n	/**\r\n	 * 插件路径\r\n	 */\r\n	public static final String WIDGET_PLUGINS_PATH = &quot;widget.plugins.path&quot;;\r\n	\r\n	/**\r\n	 * 插件路径\r\n	 */\r\n	public static final String WIDGET_PLUGINS_ASSETS_PATH = &quot;widget.plugins.assets.path&quot;;\r\n\r\n	/**\r\n	 * 模块路径\r\n	 */\r\n	public static final String WIDGET_MODULES_PATH = &quot;widget.modules.path&quot;;\r\n	\r\n	/**\r\n	 * easyui datagrid\r\n	 */\r\n	public static final String EASYUI_DATAGRID_DATA = &quot;easyuiDatagridData&quot;;\r\n	\r\n	/**\r\n	 * easyui datagrid触发\r\n	 */\r\n	public static final String EASYUI_DATAGRID_LOAD_DATA = &quot;easyuiDatagridLoadData&quot;;\r\n	\r\n	/**\r\n	 * easyui subgrid\r\n	 */\r\n	public static final String EASYUI_SUBGRID_DATA = &quot;easyuiSubgridData&quot;;\r\n	\r\n	/**\r\n	 * easyui subgrid触发\r\n	 */\r\n	public static final String EASYUI_SUBGRID_LOAD_DATA = &quot;easyuiSubgridLoadData&quot;;\r\n	\r\n	/**\r\n	 * datatable\r\n	 */\r\n	public static final String DATA_TABLE_DATA = &quot;dataTableData&quot;;\r\n	\r\n	/**\r\n	 * datatable触发\r\n	 */\r\n	public static final String DATA_TABLE_LOAD_DATA = &quot;dataTableLoadData&quot;;\r\n	\r\n	/**\r\n     * datatable 触发过滤数据\r\n     */\r\n    public static final String DATA_TABLE_FILTER_DATA = &quot;dataTableFilterData&quot;;\r\n\r\n\r\n    /**\r\n     * datatable 触发数据排序\r\n     */\r\n    public static final String DATA_TABLE_SORT_DATA = &quot;dataTableSortData&quot;;\r\n    \r\n    /**\r\n     * ajax文件上传参数\r\n     */\r\n    public static final String FILE_UPLOAD_PARAMETER = &quot;qqfile&quot;;\r\n    \r\n    /**\r\n     * ajax触发上传\r\n     */\r\n    public static final String FILE_UPLOAD = &quot;upload&quot;;\r\n    \r\n    /**\r\n     * 触发ajax文件上传\r\n     */\r\n    public static final String AJAX_UPLOAD = &quot;ajaxFileUpload&quot;;\r\n    \r\n    /**\r\n     * 触发无ajax上传\r\n     */\r\n    public static final String NON_XHR_UPLOAD = &quot;fileUpload&quot;;\r\n    \r\n    /**\r\n     * 触发分页组件\r\n     */\r\n    public static final String PAGER_DATA = &quot;pagerData&quot;;\r\n    \r\n    /**\r\n     * 触发分页数据\r\n     */\r\n    public static final String PAGER_LOAD_DATA = &quot;pagerLoadData&quot;;\r\n    \r\n    /**\r\n     * 文本内容替换事件\r\n     */\r\n    public static final String EDIROR_VALUE_CHANGE = &quot;editorValueChange&quot;;\r\n    \r\n    public static final String EDITOR_UPLOAD_IMG = &quot;editorUploadImg&quot;;\r\n    \r\n    public static final String WIDGET_KISSY_PATH = &quot;kissy.path&quot;;\r\n    \r\n    \r\n}\r\n</pre>AbstractField.java<br /></p><p><pre class=\"prettyprint lang-java\">// Copyright 2006, 2007, 2008, 2010, 2011 The Apache Software Foundation\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\npackage org.flywind.widgets.base;\r\n\r\nimport java.io.Serializable;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ComponentAction;\r\nimport org.apache.tapestry5.Field;\r\nimport org.apache.tapestry5.ValidationDecorator;\r\nimport org.apache.tapestry5.Validator;\r\nimport org.apache.tapestry5.annotations.AfterRender;\r\nimport org.apache.tapestry5.annotations.Environmental;\r\nimport org.apache.tapestry5.annotations.Mixin;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.annotations.SetupRender;\r\nimport org.apache.tapestry5.annotations.SupportsInformalParameters;\r\nimport org.apache.tapestry5.corelib.base.BaseClientElement;\r\nimport org.apache.tapestry5.corelib.mixins.DiscardBody;\r\nimport org.apache.tapestry5.corelib.mixins.RenderDisabled;\r\nimport org.apache.tapestry5.corelib.mixins.RenderInformals;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.ComponentDefaultProvider;\r\nimport org.apache.tapestry5.services.FormSupport;\r\n\r\n/**\r\n * 改变了clientId、name的生成规则:可指定为固定值，若不指定则为自动生成&lt;br&gt;\r\n * 增加了isLastProcessSubmissionAction方法，用于表单提交时是否最后处理submit动作&lt;br&gt;\r\n * Provides initialization of the clientId and elementName properties. In\r\n * addition, adds the {@link RenderInformals}, {@link RenderDisabled} and\r\n * {@link DiscardBody} mixins.\r\n */\r\n@SupportsInformalParameters\r\npublic abstract class AbstractField extends BaseClientElement implements Field {\r\n\r\n	@Parameter(name = &quot;name&quot;, defaultPrefix = BindingConstants.LITERAL)\r\n	protected String name;\r\n\r\n	/**\r\n	 * The user presentable label for the field. If not provided, a reasonable\r\n	 * label is generated from the component\'s id, first by looking for a\r\n	 * message key named &quot;id-label&quot; (substituting the component\'s actual id),\r\n	 * then by converting the actual id to a presentable string (for example,\r\n	 * &quot;userId&quot; to &quot;User Id&quot;).\r\n	 */\r\n	@Parameter(defaultPrefix = BindingConstants.LITERAL)\r\n	protected String label;\r\n\r\n	/**\r\n	 * If true, then the field will render out with a disabled attribute (to\r\n	 * turn off client-side behavior). When the form is submitted, the bound\r\n	 * value is evaluated again and, if true, the field\'s value is ignored (not\r\n	 * even validated) and the component\'s events are not fired.\r\n	 */\r\n	@Parameter(&quot;false&quot;)\r\n	protected boolean disabled;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Mixin\r\n	private DiscardBody discardBody;\r\n\r\n	@Environmental\r\n	private ValidationDecorator decorator;\r\n\r\n	static class Setup implements ComponentAction&lt;AbstractField&gt;, Serializable {\r\n		private static final long serialVersionUID = 2690270808212097020L;\r\n\r\n		private final String controlName;\r\n\r\n		public Setup(String controlName) {\r\n			this.controlName = controlName;\r\n		}\r\n\r\n		public void execute(AbstractField component) {\r\n			component.setupControlName(controlName);\r\n		}\r\n\r\n		@Override\r\n		public String toString() {\r\n			return String.format(&quot;AbstractField.Setup[%s]&quot;, controlName);\r\n		}\r\n	}\r\n\r\n	static class ProcessSubmission implements ComponentAction&lt;AbstractField&gt;,\r\n			Serializable {\r\n		private static final long serialVersionUID = -4346426414137434418L;\r\n\r\n		public void execute(AbstractField component) {\r\n			component.processSubmission();\r\n		}\r\n\r\n		@Override\r\n		public String toString() {\r\n			return &quot;AbstractField.ProcessSubmission&quot;;\r\n		}\r\n	}\r\n\r\n	/**\r\n	 * Used a shared instance for all types of fields, for efficiency.\r\n	 */\r\n	private static final ProcessSubmission PROCESS_SUBMISSION_ACTION = new ProcessSubmission();\r\n\r\n	private String controlName;\r\n\r\n	@Environmental(false)\r\n	private FormSupport formSupport;\r\n\r\n	@Inject\r\n	private ComponentDefaultProvider defaultProvider;\r\n\r\n	final String defaultLabel() {\r\n		return defaultProvider.defaultLabel(resources);\r\n	}\r\n\r\n	public final String getLabel() {\r\n		return label;\r\n	}\r\n\r\n	@SetupRender\r\n	final void setup() {\r\n		// By default, use the component id as the (base) client id. If the\r\n		// clientid\r\n		// parameter is bound, then that is the value to use.\r\n\r\n		String id = getClientId();\r\n\r\n		// Often, these controlName and clientId will end up as the same value.\r\n		// There are many\r\n		// exceptions, including a form that renders inside a loop, or a form\r\n		// inside a component\r\n		// that is used multiple times.\r\n\r\n		if (formSupport == null)\r\n			throw new RuntimeException(String.format(\r\n					&quot;Component %s must be enclosed by a Form component.&quot;,\r\n					resources.getCompleteId()));\r\n\r\n		String controlName = null;\r\n		if (resources.isBound(&quot;name&quot;)) {\r\n			controlName = name;\r\n		} else {\r\n			controlName = formSupport.allocateControlName(id);\r\n		}\r\n\r\n		formSupport.storeAndExecute(this, new Setup(controlName));\r\n\r\n		if (!isLastProcessSubmissionAction()) {\r\n			formSupport.store(this, PROCESS_SUBMISSION_ACTION);\r\n		}\r\n	}\r\n\r\n	@AfterRender\r\n	void after() {\r\n		if (isLastProcessSubmissionAction()) {\r\n			formSupport.store(this, PROCESS_SUBMISSION_ACTION);\r\n		}\r\n	}\r\n\r\n	protected boolean isLastProcessSubmissionAction() {\r\n		return false;\r\n	}\r\n\r\n	public final String getClientId() {\r\n		return super.getClientId();\r\n	}\r\n\r\n	public final String getControlName() {\r\n		return controlName;\r\n	}\r\n\r\n	public final boolean isDisabled() {\r\n		return disabled;\r\n	}\r\n\r\n	/**\r\n	 * Invoked from within a ComponentCommand callback, to restore the\r\n	 * component\'s elementName.\r\n	 */\r\n	private void setupControlName(String controlName) {\r\n		this.controlName = controlName;\r\n	}\r\n\r\n	private void processSubmission() {\r\n		if (!disabled)\r\n			processSubmission(controlName);\r\n	}\r\n\r\n	/**\r\n	 * Method implemented by subclasses to actually do the work of processing\r\n	 * the submission of the form. The element\'s controlName property will\r\n	 * already have been set. This method is only invoked if the field is\r\n	 * &lt;strong&gt;not {@link #isDisabled() disabled}&lt;/strong&gt;.\r\n	 * \r\n	 * @param controlName\r\n	 *            the control name of the rendered element (used to find the\r\n	 *            correct parameter in the request)\r\n	 */\r\n	protected abstract void processSubmission(String controlName);\r\n\r\n	// [-]Alex\r\n	// /**\r\n	// * Allows the validation decorator to write markup before the field itself\r\n	// * writes markup.\r\n	// */\r\n	// @BeginRender\r\n	// final void beforeDecorator() {\r\n	// decorator.beforeField(this);\r\n	// }\r\n	//\r\n	// /**\r\n	// * Allows the validation decorator to write markup after the field has\r\n	// * written all of its markup.\r\n	// */\r\n	// @AfterRender\r\n	// final void afterDecorator() {\r\n	// decorator.afterField(this);\r\n	// }\r\n\r\n	/**\r\n	 * Invoked from subclasses after they have written their tag and (where\r\n	 * appropriate) their informal parameters &lt;em&gt;and&lt;/em&gt; have allowed their\r\n	 * {@link Validator} to write markup as well.\r\n	 */\r\n	protected final void decorateInsideField() {\r\n		decorator.insideField(this);\r\n	}\r\n\r\n	protected final void setDecorator(ValidationDecorator decorator) {\r\n		this.decorator = decorator;\r\n	}\r\n\r\n	protected final void setFormSupport(FormSupport formSupport) {\r\n		this.formSupport = formSupport;\r\n	}\r\n\r\n	/**\r\n	 * Returns false; most components do not support declarative validation.\r\n	 */\r\n	public boolean isRequired() {\r\n		return false;\r\n	}\r\n\r\n	// protected void putPropertyNameIntoBeanValidationContext(String\r\n	// parameterName) {\r\n	// String propertyName = ((InternalComponentResources) resources)\r\n	// .getPropertyName(parameterName);\r\n	//\r\n	// BeanValidationContext beanValidationContext = environment\r\n	// .peek(BeanValidationContext.class);\r\n	//\r\n	// if (beanValidationContext == null)\r\n	// return;\r\n	//\r\n	// // If field is inside BeanEditForm, then property is already set\r\n	// if (beanValidationContext.getCurrentProperty() == null) {\r\n	// beanValidationContext.setCurrentProperty(propertyName);\r\n	// }\r\n	// }\r\n	//\r\n	// protected void removePropertyNameFromBeanValidationContext() {\r\n	// BeanValidationContext beanValidationContext = environment\r\n	// .peek(BeanValidationContext.class);\r\n	//\r\n	// if (beanValidationContext == null)\r\n	// return;\r\n	//\r\n	// beanValidationContext.setCurrentProperty(null);\r\n	// }\r\n}\r\n</pre>AbstractExtendableComponent.java<br /></p><p><pre class=\"prettyprint lang-java\">package org.flywind.widgets.base;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.AfterRender;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\npublic class AbstractExtendableComponent implements ClientElement\r\n{\r\n    @Parameter(defaultPrefix = BindingConstants.LITERAL)\r\n    private String clientId;\r\n\r\n    @Parameter(defaultPrefix = BindingConstants.LITERAL)\r\n    private String initMethod;\r\n\r\n    private String defaultInitMethod;\r\n\r\n    @Inject\r\n    private JavaScriptSupport support;\r\n\r\n    @Inject\r\n    private ComponentResources resources;\r\n\r\n    protected final void setDefaultMethod(String methodName)\r\n    {\r\n        this.defaultInitMethod = methodName;\r\n    }\r\n\r\n    @AfterRender\r\n    protected void addJSResources()\r\n    {\r\n    }\r\n\r\n    @AfterRender\r\n    protected void addCSSResources()\r\n    {\r\n    }\r\n\r\n    public void setInitMethod(String initMethod)\r\n    {\r\n        this.initMethod = initMethod;\r\n    }\r\n\r\n    public String getInitMethod()\r\n    {\r\n        return (initMethod == null) ? defaultInitMethod : initMethod;\r\n    }\r\n\r\n    public String getClientId()\r\n    {\r\n        if (clientId == null)\r\n        {\r\n            clientId = support.allocateClientId(resources);\r\n        }\r\n\r\n        return this.clientId;\r\n    }\r\n}\r\n</pre><br /></p><p></p>', null, '14', '[TW1.0]第一讲：Tapestry Widgets组件库', '<p>Tapestry Widgets based on jQuery integration for Tapestry 5.4,is a component lib.</p><p>pom.xml</p><p></p><pre class=\"prettyprint lang-html\">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;org.flywind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tapestry-widgets&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;name&gt;tapestry-widgets Tapestry 5 Application&lt;/name&gt;\r\n        &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tapestry-core&lt;/artifactId&gt;\r\n      &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tapestry-spring&lt;/artifactId&gt;\r\n      &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tapestry-upload&lt;/artifactId&gt;\r\n      &lt;version&gt;${tapestry-release-version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n			&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n			&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n			&lt;version&gt;${javax.servlet.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n \r\n    &lt;dependency&gt;\r\n			&lt;groupId&gt;org.tynamo&lt;/groupId&gt;\r\n			&lt;artifactId&gt;tynamo-common&lt;/artifactId&gt;\r\n			&lt;version&gt;0.0.3&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.tynamo&lt;/groupId&gt;\r\n			&lt;artifactId&gt;tynamo-test&lt;/artifactId&gt;\r\n			&lt;version&gt;0.1.1&lt;/version&gt;\r\n			&lt;scope&gt;test&lt;/scope&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入log4依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n			&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n			&lt;version&gt;${slf4j.log4j12.verison}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- UTILS begin --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;${commons-lang3.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8.3&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- UTILS end --&gt;\r\n        &lt;!-- json处理jar --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n            &lt;classifier&gt;jdk15&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;xom&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xom&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.5&lt;/version&gt;\r\n	        &lt;exclusions&gt;  \r\n	            &lt;exclusion&gt;\r\n	                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;  \r\n	                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n	            &lt;/exclusion&gt;\r\n	            &lt;exclusion&gt;  \r\n                    &lt;artifactId&gt;xerces&lt;/artifactId&gt;  \r\n                    &lt;groupId&gt;xercesImpl&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;  \r\n                    &lt;artifactId&gt;xalan&lt;/artifactId&gt;  \r\n                    &lt;groupId&gt;xalan&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n	        &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- json处理jar --&gt;\r\n		\r\n		&lt;!-- spring框架jar包 start --&gt;\r\n		&lt;!-- 加入spring mvc依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入spring-orm依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入spring-beans依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		   \r\n		&lt;!-- 加入spring-context-support依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入spring测试依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- 加入MySQL数据库连接的依赖包 start--&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n			&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n			&lt;version&gt;5.1.17&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入MySQL数据库连接的依赖包 end--&gt;\r\n\r\n		&lt;!-- 加入druid依赖包 start--&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n			&lt;artifactId&gt;druid&lt;/artifactId&gt;\r\n			&lt;version&gt;0.2.23&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入druid依赖包 end--&gt;\r\n		\r\n		&lt;!-- 加入hibernate-core依赖包 --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n			&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		\r\n		&lt;!-- Spring AOP start --&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n			&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n			&lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n			&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n			&lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n			&lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n			&lt;version&gt;${spring.version}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- Spring AOP end --&gt;\r\n		\r\n		&lt;!-- 加入fastjson依赖包  start--&gt;\r\n		&lt;dependency&gt;\r\n			&lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n			&lt;artifactId&gt;fastjson&lt;/artifactId&gt;\r\n			&lt;version&gt;${fastjson.verison}&lt;/version&gt;\r\n		&lt;/dependency&gt;\r\n		&lt;!-- 加入fastjson依赖包  end--&gt;\r\n		\r\n		&lt;!-- &lt;dependency&gt;\r\n		  &lt;groupId&gt;org.tynamo&lt;/groupId&gt;\r\n		  &lt;artifactId&gt;tapestry-ckeditor&lt;/artifactId&gt;\r\n		  &lt;version&gt;0.0.1&lt;/version&gt;\r\n		&lt;/dependency&gt; --&gt;\r\n        \r\n  &lt;/dependencies&gt;\r\n \r\n  &lt;build&gt;\r\n  &lt;finalName&gt;tapestry-widgets&lt;/finalName&gt;\r\n  		&lt;resources&gt;\r\n			&lt;resource&gt;\r\n				&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n			&lt;/resource&gt;\r\n		&lt;/resources&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n				&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n				&lt;configuration&gt;\r\n					&lt;suiteXmlFiles&gt;\r\n						&lt;suiteXmlFile&gt;src/test/conf/testng.xml&lt;/suiteXmlFile&gt;\r\n					&lt;/suiteXmlFiles&gt;\r\n					&lt;argLine&gt;-Xmx500m&lt;/argLine&gt;\r\n					&lt;redirectTestOutputToFile&gt;false&lt;/redirectTestOutputToFile&gt;\r\n				&lt;/configuration&gt;\r\n			&lt;/plugin&gt;\r\n \r\n      &lt;plugin&gt;\r\n           &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n           &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n           &lt;configuration&gt;\r\n           &lt;archive&gt;\r\n             &lt;manifestEntries&gt;\r\n               &lt;Tapestry-Module-Classes&gt;org.flywind.widgets.services.WidgetModule&lt;/Tapestry-Module-Classes&gt;\r\n             &lt;/manifestEntries&gt;\r\n           &lt;/archive&gt;\r\n           &lt;/configuration&gt;\r\n       &lt;/plugin&gt;\r\n       \r\n       &lt;plugin&gt;\r\n				&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n				&lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;\r\n				&lt;version&gt;9.2.4.v20141103&lt;/version&gt;\r\n				&lt;configuration&gt;\r\n					&lt;contextPath&gt;/&lt;/contextPath&gt;\r\n					&lt;useTestClasspath&gt;true&lt;/useTestClasspath&gt;\r\n					&lt;webAppSourceDirectory&gt;${basedir}/src/test/webapp&lt;/webAppSourceDirectory&gt;\r\n					&lt;systemProperties&gt;\r\n						&lt;systemProperty&gt;\r\n							&lt;name&gt;jetty.port&lt;/name&gt;\r\n							&lt;value&gt;666&lt;/value&gt;\r\n						&lt;/systemProperty&gt;\r\n						&lt;systemProperty&gt;\r\n							&lt;name&gt;tapestry.compress-whitespace&lt;/name&gt;\r\n							&lt;value&gt;false&lt;/value&gt;\r\n						&lt;/systemProperty&gt;\r\n						&lt;systemProperty&gt;\r\n							&lt;name&gt;tapestry.production-mode&lt;/name&gt;\r\n							&lt;value&gt;false&lt;/value&gt;\r\n						&lt;/systemProperty&gt;\r\n					&lt;/systemProperties&gt;\r\n				&lt;/configuration&gt;\r\n			&lt;/plugin&gt;\r\n \r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;properties&gt;\r\n    &lt;tapestry-release-version&gt;5.4.1&lt;/tapestry-release-version&gt;\r\n    &lt;javax.servlet.version&gt;2.5&lt;/javax.servlet.version&gt;\r\n    &lt;slf4j.log4j12.verison&gt;1.7.5&lt;/slf4j.log4j12.verison&gt;\r\n    &lt;commons-lang3.version&gt;3.1&lt;/commons-lang3.version&gt;\r\n    &lt;spring.version&gt;4.0.3.RELEASE&lt;/spring.version&gt;\r\n    &lt;cms.business.version&gt;1.0-SNAPSHOT&lt;/cms.business.version&gt;\r\n    &lt;hibernate.version&gt;4.3.6.Final&lt;/hibernate.version&gt;\r\n    &lt;aspectj.version&gt;1.7.3&lt;/aspectj.version&gt;\r\n    &lt;fastjson.verison&gt;1.1.37&lt;/fastjson.verison&gt;\r\n  &lt;/properties&gt;\r\n&lt;/project&gt;\r\n</pre>WidgetModule.java<br /><p></p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.widgets.services;\r\n\r\nimport org.apache.tapestry5.SymbolConstants;\r\nimport org.apache.tapestry5.annotations.Path;\r\nimport org.apache.tapestry5.ioc.Configuration;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.Resource;\r\nimport org.apache.tapestry5.ioc.ScopeConstants;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Contribute;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.ioc.services.FactoryDefaults;\r\nimport org.apache.tapestry5.ioc.services.SymbolProvider;\r\nimport org.apache.tapestry5.services.HttpServletRequestFilter;\r\nimport org.apache.tapestry5.services.LibraryMapping;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptModuleConfiguration;\r\nimport org.apache.tapestry5.services.javascript.ModuleManager;\r\nimport org.flywind.widgets.WidgetSymbolConstants;\r\n\r\n/**\r\n * &lt;p&gt;tapestry ioc配置&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2015年10月30日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class WidgetModule\r\n{\r\n	/**\r\n     * 服务的绑定，绑定之后可以使用@Inject注入，在项目中调用\r\n     * @param binder 服务绑定器\r\n     */\r\n    public static void bind(ServiceBinder binder)\r\n    {\r\n    	//ajax上传的服务\r\n    	binder.bind(AjaxUploadDecoder.class, AjaxUploadDecoderImpl.class).scope(ScopeConstants.PERTHREAD);\r\n    }\r\n    \r\n    /**\r\n     * 提供工厂默认配置，也可自己定义\r\n     * @param configuration IOC配置\r\n     */\r\n    @Contribute(SymbolProvider.class)\r\n	@FactoryDefaults\r\n	public static void contributeFactoryDefaults(\r\n			MappedConfiguration&lt;String, Object&gt; configuration) {\r\n    	//定义资源路径\r\n        configuration.add(WidgetSymbolConstants.WIDGET_PLUGINS_PATH, &quot;classpath:/META-INF/modules/plugins&quot;);\r\n        configuration.add(WidgetSymbolConstants.WIDGET_PLUGINS_ASSETS_PATH, &quot;classpath:/META-INF/assets/plugins&quot;);\r\n        configuration.add(WidgetSymbolConstants.WIDGET_MODULES_PATH, &quot;classpath:/META-INF/modules&quot;);\r\n        configuration.add(WidgetSymbolConstants.WIDGET_KISSY_PATH, &quot;classpath:org/flywind/widgets/build&quot;);\r\n        \r\n      \r\n\r\n    }\r\n    \r\n    public static void contributeApplicationDefaults(\r\n            MappedConfiguration&lt;String, Object&gt; configuration)\r\n    {\r\n    	//定义jQuery模块的名称\r\n        configuration.add(SymbolConstants.JAVASCRIPT_INFRASTRUCTURE_PROVIDER, &quot;jquery&quot;);\r\n        //压缩JS，在开发模式建议设为false方便开发测试\r\n        //configuration.add(SymbolConstants.MINIFICATION_ENABLED, true);\r\n        \r\n    }\r\n    \r\n    /**\r\n     * 组件名称定义\r\n     * @param configuration\r\n     */\r\n    public static void contributeComponentClassResolver(Configuration&lt;LibraryMapping&gt; configuration)\r\n	{\r\n		configuration.add(new LibraryMapping(&quot;widgets&quot;, &quot;org.flywind.widgets&quot;));\r\n	}\r\n    \r\n    /**\r\n     * 贡献组件静态资源目录，组件开发时未贡献的目录在项目中无法调用\r\n     * @param configuration\r\n     */\r\n    public static void contributeClasspathAssetAliasManager(\r\n			MappedConfiguration&lt;String, String&gt; configuration) {\r\n		//定义modules资源路径,如果是modules也可以不定义，默认会是modules这个文件夹\r\n		configuration.add(&quot;widget.modules.path&quot;, &quot;META-INF/modules&quot;);\r\n	}\r\n    \r\n    /**\r\n     * requireJS shim---注册jQuery模块\r\n     */\r\n    @Contribute(ModuleManager.class)\r\n	public static void setupComponentsShims(\r\n			MappedConfiguration&lt;String, Object&gt; configuration,\r\n			@Inject @Path(&quot;${widget.plugins.path}/datatables/jquery.dataTables.js&quot;) Resource datatable,\r\n			@Inject @Path(&quot;${widget.plugins.path}/jquery/ui/widget.js&quot;) Resource widget,\r\n			@Inject @Path(&quot;${widget.plugins.path}/jquery/ui/jquery.fileuploader.js&quot;) Resource fileupload,\r\n			@Inject @Path(&quot;${widget.plugins.path}/jquery/jquery.json-2.4.js&quot;) Resource json,\r\n			@Inject @Path(&quot;${widget.plugins.path}/datetimepicker/jquery.datetimepicker.js&quot;) Resource datetimepicker,\r\n			@Inject @Path(&quot;${widget.plugins.path}/easyui/jquery.easyui.min.js&quot;) Resource easyui,\r\n			@Inject @Path(&quot;${widget.plugins.path}/easyui/datagrid-detailview.js&quot;) Resource griddetailview,\r\n			@Inject @Path(&quot;${widget.plugins.path}/paginate/bootstrap-paginator.js&quot;) Resource pager,\r\n			@Inject @Path(&quot;${widget.plugins.path}/artdialog/jquery.artDialog.min.js&quot;) Resource artdialog) {\r\n\r\n		configuration.add(&quot;plugin/datatable&quot;,new JavaScriptModuleConfiguration(datatable).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/widget&quot;,new JavaScriptModuleConfiguration(widget).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/fileupload&quot;,new JavaScriptModuleConfiguration(fileupload).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/json&quot;,new JavaScriptModuleConfiguration(json).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/datetimepicker&quot;,new JavaScriptModuleConfiguration(datetimepicker).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/easyui&quot;,new JavaScriptModuleConfiguration(easyui).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/griddetailview&quot;,new JavaScriptModuleConfiguration(griddetailview).dependsOn(&quot;jquery&quot;,&quot;plugin/easyui&quot;));\r\n		configuration.add(&quot;plugin/pager&quot;,new JavaScriptModuleConfiguration(pager).dependsOn(&quot;jquery&quot;));\r\n		configuration.add(&quot;plugin/adialog&quot;,new JavaScriptModuleConfiguration(artdialog).dependsOn(&quot;jquery&quot;));\r\n\r\n		\r\n	} \r\n    \r\n    /**\r\n     * ajax文件上传HttpServletRequestFilter\r\n     * @param configuration\r\n     * @param ajaxUploadDecoder\r\n     */\r\n    public static void contributeHttpServletRequestHandler(\r\n			final OrderedConfiguration&lt;HttpServletRequestFilter&gt; configuration,\r\n			final AjaxUploadDecoder ajaxUploadDecoder) {\r\n		configuration.add(&quot;AjaxUploadFilter&quot;,new AjaxUploadServletRequestFilter(ajaxUploadDecoder),&quot;after:IgnoredPaths&quot;);\r\n	}\r\n    \r\n}\r\n</pre><p>WidgetSymbolConstants.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.widgets;\r\n\r\npublic class WidgetSymbolConstants {\r\n	/**\r\n	 * 插件路径\r\n	 */\r\n	public static final String WIDGET_PLUGINS_PATH = &quot;widget.plugins.path&quot;;\r\n	\r\n	/**\r\n	 * 插件路径\r\n	 */\r\n	public static final String WIDGET_PLUGINS_ASSETS_PATH = &quot;widget.plugins.assets.path&quot;;\r\n\r\n	/**\r\n	 * 模块路径\r\n	 */\r\n	public static final String WIDGET_MODULES_PATH = &quot;widget.modules.path&quot;;\r\n	\r\n	/**\r\n	 * easyui datagrid\r\n	 */\r\n	public static final String EASYUI_DATAGRID_DATA = &quot;easyuiDatagridData&quot;;\r\n	\r\n	/**\r\n	 * easyui datagrid触发\r\n	 */\r\n	public static final String EASYUI_DATAGRID_LOAD_DATA = &quot;easyuiDatagridLoadData&quot;;\r\n	\r\n	/**\r\n	 * easyui subgrid\r\n	 */\r\n	public static final String EASYUI_SUBGRID_DATA = &quot;easyuiSubgridData&quot;;\r\n	\r\n	/**\r\n	 * easyui subgrid触发\r\n	 */\r\n	public static final String EASYUI_SUBGRID_LOAD_DATA = &quot;easyuiSubgridLoadData&quot;;\r\n	\r\n	/**\r\n	 * datatable\r\n	 */\r\n	public static final String DATA_TABLE_DATA = &quot;dataTableData&quot;;\r\n	\r\n	/**\r\n	 * datatable触发\r\n	 */\r\n	public static final String DATA_TABLE_LOAD_DATA = &quot;dataTableLoadData&quot;;\r\n	\r\n	/**\r\n     * datatable 触发过滤数据\r\n     */\r\n    public static final String DATA_TABLE_FILTER_DATA = &quot;dataTableFilterData&quot;;\r\n\r\n\r\n    /**\r\n     * datatable 触发数据排序\r\n     */\r\n    public static final String DATA_TABLE_SORT_DATA = &quot;dataTableSortData&quot;;\r\n    \r\n    /**\r\n     * ajax文件上传参数\r\n     */\r\n    public static final String FILE_UPLOAD_PARAMETER = &quot;qqfile&quot;;\r\n    \r\n    /**\r\n     * ajax触发上传\r\n     */\r\n    public static final String FILE_UPLOAD = &quot;upload&quot;;\r\n    \r\n    /**\r\n     * 触发ajax文件上传\r\n     */\r\n    public static final String AJAX_UPLOAD = &quot;ajaxFileUpload&quot;;\r\n    \r\n    /**\r\n     * 触发无ajax上传\r\n     */\r\n    public static final String NON_XHR_UPLOAD = &quot;fileUpload&quot;;\r\n    \r\n    /**\r\n     * 触发分页组件\r\n     */\r\n    public static final String PAGER_DATA = &quot;pagerData&quot;;\r\n    \r\n    /**\r\n     * 触发分页数据\r\n     */\r\n    public static final String PAGER_LOAD_DATA = &quot;pagerLoadData&quot;;\r\n    \r\n    /**\r\n     * 文本内容替换事件\r\n     */\r\n    public static final String EDIROR_VALUE_CHANGE = &quot;editorValueChange&quot;;\r\n    \r\n    public static final String EDITOR_UPLOAD_IMG = &quot;editorUploadImg&quot;;\r\n    \r\n    public static final String WIDGET_KISSY_PATH = &quot;kissy.path&quot;;\r\n    \r\n    \r\n}\r\n</pre>AbstractField.java<br /><p></p><p></p><pre class=\"prettyprint lang-java\">// Copyright 2006, 2007, 2008, 2010, 2011 The Apache Software Foundation\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\npackage org.flywind.widgets.base;\r\n\r\nimport java.io.Serializable;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ComponentAction;\r\nimport org.apache.tapestry5.Field;\r\nimport org.apache.tapestry5.ValidationDecorator;\r\nimport org.apache.tapestry5.Validator;\r\nimport org.apache.tapestry5.annotations.AfterRender;\r\nimport org.apache.tapestry5.annotations.Environmental;\r\nimport org.apache.tapestry5.annotations.Mixin;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.annotations.SetupRender;\r\nimport org.apache.tapestry5.annotations.SupportsInformalParameters;\r\nimport org.apache.tapestry5.corelib.base.BaseClientElement;\r\nimport org.apache.tapestry5.corelib.mixins.DiscardBody;\r\nimport org.apache.tapestry5.corelib.mixins.RenderDisabled;\r\nimport org.apache.tapestry5.corelib.mixins.RenderInformals;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.ComponentDefaultProvider;\r\nimport org.apache.tapestry5.services.FormSupport;\r\n\r\n/**\r\n * 改变了clientId、name的生成规则:可指定为固定值，若不指定则为自动生成&lt;br&gt;\r\n * 增加了isLastProcessSubmissionAction方法，用于表单提交时是否最后处理submit动作&lt;br&gt;\r\n * Provides initialization of the clientId and elementName properties. In\r\n * addition, adds the {@link RenderInformals}, {@link RenderDisabled} and\r\n * {@link DiscardBody} mixins.\r\n */\r\n@SupportsInformalParameters\r\npublic abstract class AbstractField extends BaseClientElement implements Field {\r\n\r\n	@Parameter(name = &quot;name&quot;, defaultPrefix = BindingConstants.LITERAL)\r\n	protected String name;\r\n\r\n	/**\r\n	 * The user presentable label for the field. If not provided, a reasonable\r\n	 * label is generated from the component\'s id, first by looking for a\r\n	 * message key named &quot;id-label&quot; (substituting the component\'s actual id),\r\n	 * then by converting the actual id to a presentable string (for example,\r\n	 * &quot;userId&quot; to &quot;User Id&quot;).\r\n	 */\r\n	@Parameter(defaultPrefix = BindingConstants.LITERAL)\r\n	protected String label;\r\n\r\n	/**\r\n	 * If true, then the field will render out with a disabled attribute (to\r\n	 * turn off client-side behavior). When the form is submitted, the bound\r\n	 * value is evaluated again and, if true, the field\'s value is ignored (not\r\n	 * even validated) and the component\'s events are not fired.\r\n	 */\r\n	@Parameter(&quot;false&quot;)\r\n	protected boolean disabled;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Mixin\r\n	private DiscardBody discardBody;\r\n\r\n	@Environmental\r\n	private ValidationDecorator decorator;\r\n\r\n	static class Setup implements ComponentAction&lt;AbstractField&gt;, Serializable {\r\n		private static final long serialVersionUID = 2690270808212097020L;\r\n\r\n		private final String controlName;\r\n\r\n		public Setup(String controlName) {\r\n			this.controlName = controlName;\r\n		}\r\n\r\n		public void execute(AbstractField component) {\r\n			component.setupControlName(controlName);\r\n		}\r\n\r\n		@Override\r\n		public String toString() {\r\n			return String.format(&quot;AbstractField.Setup[%s]&quot;, controlName);\r\n		}\r\n	}\r\n\r\n	static class ProcessSubmission implements ComponentAction&lt;AbstractField&gt;,\r\n			Serializable {\r\n		private static final long serialVersionUID = -4346426414137434418L;\r\n\r\n		public void execute(AbstractField component) {\r\n			component.processSubmission();\r\n		}\r\n\r\n		@Override\r\n		public String toString() {\r\n			return &quot;AbstractField.ProcessSubmission&quot;;\r\n		}\r\n	}\r\n\r\n	/**\r\n	 * Used a shared instance for all types of fields, for efficiency.\r\n	 */\r\n	private static final ProcessSubmission PROCESS_SUBMISSION_ACTION = new ProcessSubmission();\r\n\r\n	private String controlName;\r\n\r\n	@Environmental(false)\r\n	private FormSupport formSupport;\r\n\r\n	@Inject\r\n	private ComponentDefaultProvider defaultProvider;\r\n\r\n	final String defaultLabel() {\r\n		return defaultProvider.defaultLabel(resources);\r\n	}\r\n\r\n	public final String getLabel() {\r\n		return label;\r\n	}\r\n\r\n	@SetupRender\r\n	final void setup() {\r\n		// By default, use the component id as the (base) client id. If the\r\n		// clientid\r\n		// parameter is bound, then that is the value to use.\r\n\r\n		String id = getClientId();\r\n\r\n		// Often, these controlName and clientId will end up as the same value.\r\n		// There are many\r\n		// exceptions, including a form that renders inside a loop, or a form\r\n		// inside a component\r\n		// that is used multiple times.\r\n\r\n		if (formSupport == null)\r\n			throw new RuntimeException(String.format(\r\n					&quot;Component %s must be enclosed by a Form component.&quot;,\r\n					resources.getCompleteId()));\r\n\r\n		String controlName = null;\r\n		if (resources.isBound(&quot;name&quot;)) {\r\n			controlName = name;\r\n		} else {\r\n			controlName = formSupport.allocateControlName(id);\r\n		}\r\n\r\n		formSupport.storeAndExecute(this, new Setup(controlName));\r\n\r\n		if (!isLastProcessSubmissionAction()) {\r\n			formSupport.store(this, PROCESS_SUBMISSION_ACTION);\r\n		}\r\n	}\r\n\r\n	@AfterRender\r\n	void after() {\r\n		if (isLastProcessSubmissionAction()) {\r\n			formSupport.store(this, PROCESS_SUBMISSION_ACTION);\r\n		}\r\n	}\r\n\r\n	protected boolean isLastProcessSubmissionAction() {\r\n		return false;\r\n	}\r\n\r\n	public final String getClientId() {\r\n		return super.getClientId();\r\n	}\r\n\r\n	public final String getControlName() {\r\n		return controlName;\r\n	}\r\n\r\n	public final boolean isDisabled() {\r\n		return disabled;\r\n	}\r\n\r\n	/**\r\n	 * Invoked from within a ComponentCommand callback, to restore the\r\n	 * component\'s elementName.\r\n	 */\r\n	private void setupControlName(String controlName) {\r\n		this.controlName = controlName;\r\n	}\r\n\r\n	private void processSubmission() {\r\n		if (!disabled)\r\n			processSubmission(controlName);\r\n	}\r\n\r\n	/**\r\n	 * Method implemented by subclasses to actually do the work of processing\r\n	 * the submission of the form. The element\'s controlName property will\r\n	 * already have been set. This method is only invoked if the field is\r\n	 * &lt;strong&gt;not {@link #isDisabled() disabled}&lt;/strong&gt;.\r\n	 * \r\n	 * @param controlName\r\n	 *            the control name of the rendered element (used to find the\r\n	 *            correct parameter in the request)\r\n	 */\r\n	protected abstract void processSubmission(String controlName);\r\n\r\n	// [-]Alex\r\n	// /**\r\n	// * Allows the validation decorator to write markup before the field itself\r\n	// * writes markup.\r\n	// */\r\n	// @BeginRender\r\n	// final void beforeDecorator() {\r\n	// decorator.beforeField(this);\r\n	// }\r\n	//\r\n	// /**\r\n	// * Allows the validation decorator to write markup after the field has\r\n	// * written all of its markup.\r\n	// */\r\n	// @AfterRender\r\n	// final void afterDecorator() {\r\n	// decorator.afterField(this);\r\n	// }\r\n\r\n	/**\r\n	 * Invoked from subclasses after they have written their tag and (where\r\n	 * appropriate) their informal parameters &lt;em&gt;and&lt;/em&gt; have allowed their\r\n	 * {@link Validator} to write markup as well.\r\n	 */\r\n	protected final void decorateInsideField() {\r\n		decorator.insideField(this);\r\n	}\r\n\r\n	protected final void setDecorator(ValidationDecorator decorator) {\r\n		this.decorator = decorator;\r\n	}\r\n\r\n	protected final void setFormSupport(FormSupport formSupport) {\r\n		this.formSupport = formSupport;\r\n	}\r\n\r\n	/**\r\n	 * Returns false; most components do not support declarative validation.\r\n	 */\r\n	public boolean isRequired() {\r\n		return false;\r\n	}\r\n\r\n	// protected void putPropertyNameIntoBeanValidationContext(String\r\n	// parameterName) {\r\n	// String propertyName = ((InternalComponentResources) resources)\r\n	// .getPropertyName(parameterName);\r\n	//\r\n	// BeanValidationContext beanValidationContext = environment\r\n	// .peek(BeanValidationContext.class);\r\n	//\r\n	// if (beanValidationContext == null)\r\n	// return;\r\n	//\r\n	// // If field is inside BeanEditForm, then property is already set\r\n	// if (beanValidationContext.getCurrentProperty() == null) {\r\n	// beanValidationContext.setCurrentProperty(propertyName);\r\n	// }\r\n	// }\r\n	//\r\n	// protected void removePropertyNameFromBeanValidationContext() {\r\n	// BeanValidationContext beanValidationContext = environment\r\n	// .peek(BeanValidationContext.class);\r\n	//\r\n	// if (beanValidationContext == null)\r\n	// return;\r\n	//\r\n	// beanValidationContext.setCurrentProperty(null);\r\n	// }\r\n}\r\n</pre>AbstractExtendableComponent.java<br /><p></p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.widgets.base;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.AfterRender;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\npublic class AbstractExtendableComponent implements ClientElement\r\n{\r\n    @Parameter(defaultPrefix = BindingConstants.LITERAL)\r\n    private String clientId;\r\n\r\n    @Parameter(defaultPrefix = BindingConstants.LITERAL)\r\n    private String initMethod;\r\n\r\n    private String defaultInitMethod;\r\n\r\n    @Inject\r\n    private JavaScriptSupport support;\r\n\r\n    @Inject\r\n    private ComponentResources resources;\r\n\r\n    protected final void setDefaultMethod(String methodName)\r\n    {\r\n        this.defaultInitMethod = methodName;\r\n    }\r\n\r\n    @AfterRender\r\n    protected void addJSResources()\r\n    {\r\n    }\r\n\r\n    @AfterRender\r\n    protected void addCSSResources()\r\n    {\r\n    }\r\n\r\n    public void setInitMethod(String initMethod)\r\n    {\r\n        this.initMethod = initMethod;\r\n    }\r\n\r\n    public String getInitMethod()\r\n    {\r\n        return (initMethod == null) ? defaultInitMethod : initMethod;\r\n    }\r\n\r\n    public String getClientId()\r\n    {\r\n        if (clientId == null)\r\n        {\r\n            clientId = support.allocateClientId(resources);\r\n        }\r\n\r\n        return this.clientId;\r\n    }\r\n}\r\n</pre><div><br /></div>', '[TW1.0]Lesson 1：Tapestry Widgets', '');
INSERT INTO `td_c_technology` VALUES ('24', null, '2016-05-12 09:04:53', 'admin', '0755', '', 'admin', '2016-05-16 11:44:20', '<p>思路：使用loop组件循环显示每条增加的数据，添加用户使用了pagelink。<br /></p><p>&nbsp;</p><p>在com.tapestry.app.pages.crud包里创建UserList.java，在webapp/crud里创建UserList.tml代码如下：</p><p>UserList.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.User;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class UserList {</div><div>&nbsp;</div><div>//打开user读写</div><div>@Property</div><div>private User user;</div><div>&nbsp;</div><div>//打开user阵列的读写</div><div>@Property</div><div>private List&lt;User&gt; users;</div><div>&nbsp;</div><div>//导入操作数据库的服务</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//页面加载时设置渲染</div><div>void setupRender(){</div><div>//查询User数据表</div><div>StringBuffer sql = new StringBuffer();</div><div>sql.append(&quot;from User&quot;);</div><div>users = dao.findWithQuery(sql.toString());</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>UserList.tml</p><div class=\"code\"><div><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div></div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;style&gt;</div><div>&nbsp;.table{border-collapse: collapse; }</div><div>&nbsp;.table td,table th{border:1px solid #999; padding:5px;&quot;}</div><div>&nbsp;&lt;/style&gt;</div><div>&nbsp;&lt;t:pagelink page=&quot;crud/UserCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; class=&quot;table&quot;&gt;</div><div>&nbsp; &lt;tr&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;用户名&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;年龄&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;时间&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;操作&lt;/th&gt;</div><div>&nbsp; &lt;/tr&gt;</div><div>&nbsp; &lt;tr t:type=&quot;loop&quot; t:source=&quot;users&quot; t:value=&quot;user&quot;&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.id}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.name}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.time}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.id}&lt;/td&gt;</div><div>&nbsp; &nbsp; &nbsp;&lt;td&gt;&lt;/td&gt;</div><div>&nbsp; &lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&lt;/html&gt;</div></div><p>修改下UserCreate.java与UserCreate.tml文件，实现添加完成之后，直接跳转到UserList页面</p><p>UserCreate.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.User;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class UserCreate {</div><div>&nbsp;</div><div>@Property</div><div>private User user;</div><div>&nbsp;</div><div>//导入服务接口</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//初始化user实体</div><div>void onPrepare(){</div><div>user = new User();</div><div>}</div><div>&nbsp;</div><div>//提交表单的时候执行存储,返回当前页面</div><div>Object onSuccess(){</div><div>//如果时间为空值输入系统当前时间</div><div>if(user.getTime() == null){</div><div>user.setTime(new Date());</div><div>}</div><div>dao.create(user);</div><div>return UserList.class;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>UserCreate.tml</p><div class=\"code\"><div><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div></div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;t:form&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:errors/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;用户名：&lt;t:textfield t:id=&quot;name&quot; value=&quot;user.name&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;年龄：&lt;t:textfield t:id=&quot;age&quot; value=&quot;user.age&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;创建&quot;/&gt;&lt;t:pagelink page=&quot;crud/UserList&quot;&gt;返回查看页面&lt;/t:pagelink&gt;&lt;/p&gt;</div><div>&nbsp;&lt;/t:form&gt;</div><div>&nbsp;&lt;/html&gt;</div></div><p>查看<a href=\"http://localhost:8080/tapestryStart/crud/userlist\" target=\"_blank\" title=\"\">http://localhost:8080/tapestryStart/crud/userlist</a>已经实现了数据的查询。</p>', null, '17', '第三讲：tapestry增删改查---查询数据', '<p>UserList.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.User;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class UserList {\r\n\r\n	// 打开user读写\r\n	@Property\r\n	private User user;\r\n\r\n	// 打开user阵列的读写\r\n	@Property\r\n	private List&lt;User&gt; users;\r\n\r\n	// 导入操作数据库的服务\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 页面加载时设置渲染\r\n	void setupRender() {\r\n		// 查询User数据表\r\n		StringBuffer sql = new StringBuffer();\r\n		sql.append(&quot;from User&quot;);\r\n		users = dao.findWithQuery(sql.toString());\r\n	}\r\n\r\n}</pre><br /><p></p><p>UserList.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;style&gt;\r\n .table{border-collapse: collapse; }\r\n .table td,table th{border:1px solid #999; padding:5px;&quot;}\r\n &lt;/style&gt;\r\n &lt;t:pagelink page=&quot;crud/UserCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;\r\n&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; class=&quot;table&quot;&gt;\r\n  &lt;tr&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;用户名&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;年龄&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;时间&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;操作&lt;/th&gt;\r\n  &lt;/tr&gt;\r\n  &lt;tr t:type=&quot;loop&quot; t:source=&quot;users&quot; t:value=&quot;user&quot;&gt;\r\n    &lt;td&gt;${user.id}&lt;/td&gt;\r\n    &lt;td&gt;${user.name}&lt;/td&gt;\r\n    &lt;td&gt;${user.time}&lt;/td&gt;\r\n    &lt;td&gt;${user.id}&lt;/td&gt;\r\n     &lt;td&gt;&lt;/td&gt;\r\n  &lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/html&gt;</pre><br /><p></p><p>UserCreate.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.User;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class UserCreate {\r\n\r\n	@Property\r\n	private User user;\r\n\r\n	// 导入服务接口\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 初始化user实体\r\n	void onPrepare() {\r\n		user = new User();\r\n	}\r\n\r\n	// 提交表单的时候执行存储,返回当前页面\r\n	Object onSuccess() {\r\n		// 如果时间为空值输入系统当前时间\r\n		if (user.getTime() == null) {\r\n			user.setTime(new Date());\r\n		}\r\n		dao.create(user);\r\n		return UserList.class;\r\n	}\r\n}</pre><p></p><div><div>UserCreate.tml</div><div><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;t:form&gt;\r\n  &lt;t:errors/&gt;\r\n  &lt;p&gt;用户名：&lt;t:textfield t:id=&quot;name&quot; value=&quot;user.name&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;年龄：&lt;t:textfield t:id=&quot;age&quot; value=&quot;user.age&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;创建&quot;/&gt;&lt;t:pagelink page=&quot;crud/UserList&quot;&gt;返回查看页面&lt;/t:pagelink&gt;&lt;/p&gt;\r\n &lt;/t:form&gt;\r\n &lt;/html&gt;</pre><br /></div></div>', 'Lesson 3：Tapestry CRUD---Review', '');
INSERT INTO `td_c_technology` VALUES ('25', null, '2016-05-12 09:05:42', 'admin', '0755', '', 'admin', '2016-05-16 11:48:54', '<p>思路：在UserList页面传递user的id到修改也UesrUpdate页面，再查询出所有对应的数据。</p><p>&nbsp;</p><p>修改UserList.tml页面，代码如下：</p><div class=\"code\"><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;style&gt;</div><div>&nbsp;.table{border-collapse: collapse; }</div><div>&nbsp;.table td,table th{border:1px solid #999; padding:5px;&quot;}</div><div>&nbsp;&lt;/style&gt;</div><div>&nbsp;&lt;t:pagelink page=&quot;crud/UserCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; class=&quot;table&quot;&gt;</div><div>&nbsp; &lt;tr&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;用户名&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;年龄&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;时间&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;操作&lt;/th&gt;</div><div>&nbsp; &lt;/tr&gt;</div><div>&nbsp; &lt;tr t:type=&quot;loop&quot; t:source=&quot;users&quot; t:value=&quot;user&quot;&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.id}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.name}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.age}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.time}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;&lt;t:pagelink page=&quot;crud/UserUpdate&quot; t:context=&quot;${user.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;/td&gt;</div><div>&nbsp; &lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&lt;/html&gt;</div></div><p>在com.tapestry.app.pages.crud包里添加UserUpdate.java，在webapp/crud下增加UserUpdate.tml代码如下：</p><p>UserUpdate.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.User;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class UserUpdate {</div><div>&nbsp;</div><div>//接收页面传来的id值</div><div>@PageActivationContext</div><div>private Long id;</div><div>&nbsp;</div><div>//设置user可读写</div><div>@Property</div><div>private User user;</div><div>&nbsp;</div><div>//导入服务</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//页面加载时运行</div><div>void onPrepare(){</div><div>//user为空数据时根据页面传递过来的id查询数据</div><div>if(user == null){</div><div>user = dao.findByID(User.class, id);</div><div>}</div><div>}</div><div>//提交表单保存user数据</div><div>Object onSuccess(){</div><div>dao.update(user);</div><div>return UserList.class;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>UserUpdate.tml</p><div class=\"code\"><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;t:form&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:errors/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;用户名：&lt;t:textfield t:id=&quot;name&quot; value=&quot;user.name&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;年龄：&lt;t:textfield t:id=&quot;age&quot; value=&quot;user.age&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;保存&quot;/&gt;&lt;t:pagelink page=&quot;crud/UserList&quot;&gt;返回查看页面&lt;/t:pagelink&gt;&lt;/p&gt;</div><div>&nbsp;&lt;/t:form&gt;</div><div>&nbsp;&lt;/html&gt;</div></div><p>查看<a href=\"http://localhost:8080/tapestryStart/crud/userlist\" target=\"_blank\" title=\"\">http://localhost:8080/tapestryStart/crud/userlist</a>修改数据也做好了。</p>', null, '17', '第四讲：tapestry增删改查---修改数据', '<p>UserList.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;style&gt;\r\n .table{border-collapse: collapse; }\r\n .table td,table th{border:1px solid #999; padding:5px;&quot;}\r\n &lt;/style&gt;\r\n &lt;t:pagelink page=&quot;crud/UserCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;\r\n&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; class=&quot;table&quot;&gt;\r\n  &lt;tr&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;用户名&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;年龄&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;时间&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;操作&lt;/th&gt;\r\n  &lt;/tr&gt;\r\n  &lt;tr t:type=&quot;loop&quot; t:source=&quot;users&quot; t:value=&quot;user&quot;&gt;\r\n    &lt;td&gt;${user.id}&lt;/td&gt;\r\n    &lt;td&gt;${user.name}&lt;/td&gt;\r\n    &lt;td&gt;${user.age}&lt;/td&gt;\r\n    &lt;td&gt;${user.time}&lt;/td&gt;\r\n    &lt;td&gt;&lt;t:pagelink page=&quot;crud/UserUpdate&quot; t:context=&quot;${user.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;/td&gt;\r\n  &lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/html&gt;</pre></p><p>UserUpdate.java</p><p><pre class=\"prettyprint lang-html\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.User;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class UserUpdate {\r\n\r\n	// 接收页面传来的id值\r\n	@PageActivationContext\r\n	private Long id;\r\n\r\n	// 设置user可读写\r\n	@Property\r\n	private User user;\r\n\r\n	// 导入服务\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 页面加载时运行\r\n	void onPrepare() {\r\n		// user为空数据时根据页面传递过来的id查询数据\r\n		if (user == null) {\r\n			user = dao.findByID(User.class, id);\r\n		}\r\n	}\r\n\r\n	// 提交表单保存user数据\r\n	Object onSuccess() {\r\n		dao.update(user);\r\n		return UserList.class;\r\n	}\r\n}</pre></p><p>UserUpdate.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;t:form&gt;\r\n  &lt;t:errors/&gt;\r\n  &lt;p&gt;用户名：&lt;t:textfield t:id=&quot;name&quot; value=&quot;user.name&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;年龄：&lt;t:textfield t:id=&quot;age&quot; value=&quot;user.age&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;保存&quot;/&gt;&lt;t:pagelink page=&quot;crud/UserList&quot;&gt;返回查看页面&lt;/t:pagelink&gt;&lt;/p&gt;\r\n &lt;/t:form&gt;\r\n &lt;/html&gt;</pre><br /></p><p><br /></p>', 'Lesson 4：Tapestry CRUD---Update', '');
INSERT INTO `td_c_technology` VALUES ('26', null, '2016-05-12 09:06:15', 'admin', '0755', '', 'admin', '2016-05-16 11:57:46', '<p>思路：根据user的id去删除数据，直接从UserList页面实现删除。</p><p>修改UserList.java，与UserList.tml文件。代码如下：</p><p>UserList.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.User;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class UserList {</div><div>&nbsp;</div><div>//打开user读写</div><div>@Property</div><div>private User user;</div><div>&nbsp;</div><div>//打开user阵列的读写</div><div>@Property</div><div>private List&lt;User&gt; users;</div><div>&nbsp;</div><div>//导入操作数据库的服务</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//当前页面接收user的id值</div><div>@PageActivationContext</div><div>private Long id;</div><div>&nbsp;</div><div>//页面加载时设置渲染</div><div>void setupRender(){</div><div>//查询User数据表</div><div>StringBuffer sql = new StringBuffer();</div><div>sql.append(&quot;from User&quot;);</div><div>users = dao.findWithQuery(sql.toString());</div><div>}</div><div>&nbsp;</div><div>//单击eventlink执行删除操作</div><div>Object onDelete(Long id){</div><div>dao.deleteByID(User.class, id);</div><div>return this;</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>UserList.tml</p><div class=\"code\"><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;style&gt;</div><div>&nbsp;.table{border-collapse: collapse; }</div><div>&nbsp;.table td,table th{border:1px solid #999; padding:5px;&quot;}</div><div>&nbsp;&lt;/style&gt;</div><div>&nbsp;&lt;t:pagelink page=&quot;crud/UserCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; class=&quot;table&quot;&gt;</div><div>&nbsp; &lt;tr&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;用户名&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;年龄&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;时间&lt;/th&gt;</div><div>&nbsp; &nbsp; &lt;th scope=&quot;col&quot;&gt;操作&lt;/th&gt;</div><div>&nbsp; &lt;/tr&gt;</div><div>&nbsp; &lt;tr t:type=&quot;loop&quot; t:source=&quot;users&quot; t:value=&quot;user&quot;&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.id}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.name}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.age}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;${user.time}&lt;/td&gt;</div><div>&nbsp; &nbsp; &lt;td&gt;&lt;t:pagelink page=&quot;crud/UserUpdate&quot; t:context=&quot;${user.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;t:eventlink t:event=&quot;delete&quot; t:context=&quot;${user.id}&quot;&gt;删除&lt;/t:eventlink&gt;&lt;/td&gt;</div><div>&nbsp; &lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&lt;/html&gt;</div></div><p>查看<a href=\"http://localhost:8080/tapestryStart/crud/userlist\" target=\"_blank\" title=\"\">http://localhost:8080/tapestryStart/crud/userlist</a>删除已经做好了</p>', null, '17', '第五讲：tapestry增删改查---删除数据', '<p>UserList.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n \r\nimport java.util.List;\r\n \r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n \r\nimport com.tapestry.app.entities.User;\r\nimport com.tapestry.app.services.StartDAO;\r\n \r\npublic class UserList {\r\n \r\n//打开user读写\r\n@Property\r\nprivate User user;\r\n \r\n//打开user阵列的读写\r\n@Property\r\nprivate List&lt;User&gt; users;\r\n \r\n//导入操作数据库的服务\r\n@Inject\r\nprivate StartDAO dao;\r\n \r\n//当前页面接收user的id值\r\n@PageActivationContext\r\nprivate Long id;\r\n \r\n//页面加载时设置渲染\r\nvoid setupRender(){\r\n//查询User数据表\r\nStringBuffer sql = new StringBuffer();\r\nsql.append(&quot;from User&quot;);\r\nusers = dao.findWithQuery(sql.toString());\r\n}\r\n \r\n//单击eventlink执行删除操作\r\nObject onDelete(Long id){\r\ndao.deleteByID(User.class, id);\r\nreturn this;\r\n}\r\n \r\n}</pre></p><p>UserList.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;style&gt;\r\n .table{border-collapse: collapse; }\r\n .table td,table th{border:1px solid #999; padding:5px;&quot;}\r\n &lt;/style&gt;\r\n &lt;t:pagelink page=&quot;crud/UserCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;\r\n&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; class=&quot;table&quot;&gt;\r\n  &lt;tr&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;id&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;用户名&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;年龄&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;时间&lt;/th&gt;\r\n    &lt;th scope=&quot;col&quot;&gt;操作&lt;/th&gt;\r\n  &lt;/tr&gt;\r\n  &lt;tr t:type=&quot;loop&quot; t:source=&quot;users&quot; t:value=&quot;user&quot;&gt;\r\n    &lt;td&gt;${user.id}&lt;/td&gt;\r\n    &lt;td&gt;${user.name}&lt;/td&gt;\r\n    &lt;td&gt;${user.age}&lt;/td&gt;\r\n    &lt;td&gt;${user.time}&lt;/td&gt;\r\n    &lt;td&gt;&lt;t:pagelink page=&quot;crud/UserUpdate&quot; t:context=&quot;${user.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;t:eventlink t:event=&quot;delete&quot; t:context=&quot;${user.id}&quot;&gt;删除&lt;/t:eventlink&gt;&lt;/td&gt;\r\n  &lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 5：Tapestry CRUD---Delete', '');
INSERT INTO `td_c_technology` VALUES ('27', null, '2016-05-12 09:09:23', 'admin', '0755', '', 'admin', '2016-05-16 13:41:40', '<p>tapestry输出常用的有：通过get方法输出、通过output输出、通过setupRender()输出、通过outputraw输出。源码如下：</p><p>OutPut.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.output;</div><div>&nbsp;</div><div>import java.text.Format;</div><div>import java.text.SimpleDateFormat;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class OutPut {</div><div>&nbsp;</div><div>private Date outOne;</div><div>&nbsp;</div><div>//通过get方法在页面上读出当前时间</div><div>public Date getOutOne(){</div><div>return new Date();</div><div>}</div><div>&nbsp;</div><div>//通过output转换时间输出格式</div><div>public Format getDateFormat(){</div><div>return new SimpleDateFormat(&quot;yyyy-MM-dd HH:ss:mm&quot;);</div><div>}</div><div>&nbsp;</div><div>//设置变量outTwo为可读,@Property属性有2个就是分别对应get与set方法的read与write，</div><div>//使用@Property好处是可以不用写get与set方法。</div><div>//注意：不是任何地方都有效，当get或set方法被调用的时候，这样写就无效了，因为找不到get或set方法。</div><div>@Property(read=true)</div><div>private String outTwo;</div><div>&nbsp;</div><div>//通过 setupRender方法给outTwo赋值输出</div><div>void setupRender(){</div><div>outTwo = &quot;通过 setupRender方法给outTwo赋值输出&quot;;</div><div>}</div><div>&nbsp;</div><div>private String outThree;</div><div>&nbsp;</div><div>//通过get方法读出outThree值，这里可以看到outputraw是会解析html节点的&lt;br/&gt;</div><div>public String getOutThree(){</div><div>return &quot;hello&lt;br/&gt;tapestry&quot;;</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>OutPut.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;${outOne}&lt;br/&gt;&lt;br/&gt;</div><div>&lt;t:output value=&quot;outOne&quot; format=&quot;dateFormat&quot;/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;${outTwo}&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;${outThree}&lt;br/&gt;&lt;br/&gt;</div><div>&lt;t:outputraw value=&quot;${outThree}&quot;/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;&lt;/html&gt;</div></div>', null, '17', '第六讲：tapestry输出方式', '<p>OutPut.java</p><p><pre class=\"prettyprint lang-html\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.output;\r\n\r\nimport java.text.Format;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class OutPut {\r\n\r\n	private Date outOne;\r\n\r\n	// 通过get方法在页面上读出当前时间\r\n	public Date getOutOne() {\r\n		return new Date();\r\n	}\r\n\r\n	// 通过output转换时间输出格式\r\n	public Format getDateFormat() {\r\n		return new SimpleDateFormat(&quot;yyyy-MM-dd HH:ss:mm&quot;);\r\n	}\r\n\r\n	// 设置变量outTwo为可读,@Property属性有2个就是分别对应get与set方法的read与write，\r\n	// 使用@Property好处是可以不用写get与set方法。\r\n	// 注意：不是任何地方都有效，当get或set方法被调用的时候，这样写就无效了，因为找不到get或set方法。\r\n	@Property(read = true)\r\n	private String outTwo;\r\n\r\n	// 通过 setupRender方法给outTwo赋值输出\r\n	void setupRender() {\r\n		outTwo = &quot;通过 setupRender方法给outTwo赋值输出&quot;;\r\n	}\r\n\r\n	private String outThree;\r\n\r\n	// 通过get方法读出outThree值，这里可以看到outputraw是会解析html节点的&lt;br/&gt;\r\n	public String getOutThree() {\r\n		return &quot;hello&lt;br/&gt;tapestry&quot;;\r\n	}\r\n\r\n}</pre></p><p>OutPut.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n ${outOne}&lt;br/&gt;&lt;br/&gt;\r\n&lt;t:output value=&quot;outOne&quot; format=&quot;dateFormat&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n ${outTwo}&lt;br/&gt;&lt;br/&gt;\r\n ${outThree}&lt;br/&gt;&lt;br/&gt;\r\n&lt;t:outputraw value=&quot;${outThree}&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n &lt;/html&gt;</pre><br /></p>', 'Lesson 6：Tapestry Output', '');
INSERT INTO `td_c_technology` VALUES ('28', null, '2016-05-12 09:10:41', 'admin', '0755', '', 'admin', '2016-05-16 13:51:15', '<p>tapestry模板页是*.tml文件，为了给美工美化静态页面带来更大方便，tapestry的所有组件都可以t:type写成类似htm可预览的代码l。例如：</p><p>&lt;t:pagelink t:page=&quot;Index&quot;&gt;index&lt;/pagelink&gt;</p><p>可写成</p><p>&lt;a href=&quot;#;&quot; t:type=&quot;pagelink&quot; t:page=&quot;Index&quot;&gt;index&lt;/a&gt;</p><p>其他的以此类推。</p>', null, '17', '第七讲：tapestry可预览的模板页', '<p>Tapestry&nbsp;template&nbsp;*.tm, in order to beautify the static page to bring more convenient,tapestry all components t:type written in a similar&nbsp;html code.<span id=\"w_23\" high-light-id=\"w_6,w_23,w_24\" class=\"high-light\">for&nbsp;</span><span id=\"w_24\" high-light-id=\"w_6,w_23,w_24\" class=\"high-light\">example</span><br /></p><p>&lt;t:pagelink t:page=&quot;Index&quot;&gt;index&lt;/pagelink&gt;</p><p>you can use invisible instrumentation<br /></p><p>&lt;a href=&quot;#;&quot; t:type=&quot;pagelink&quot; t:page=&quot;Index&quot;&gt;index&lt;/a&gt;</p><p><br /></p>', 'Lesson 7：Tapestry a preview of the template page', '');
INSERT INTO `td_c_technology` VALUES ('29', null, '2016-05-12 09:12:18', 'admin', '0755', '', 'admin', '2016-05-16 13:59:08', '<p>tapestry组件有不少，具体的使用方法可去官网了解，常用的组件会在以后的教程中讲到。这篇文章主要以pagelink为例，简单讲解下组件通常使用的方法，以下可看出同是跳转到Index页面，但写法就就不是一样！可选择其中自己的喜欢的方式写，所有组件都适用这样的写法。代码如下：</p><p>&nbsp;</p><p>AtComponent.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.corelib.components.PageLink;</div><div>&nbsp;</div><div>public class AtComponent {</div><div>&nbsp;</div><div>@Component(id=&quot;myPage&quot;, parameters={&quot;page=Index&quot;})</div><div>private PageLink index;</div><div>}</div><div>&nbsp;</div></div><p>AtComponent.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;a t:type=&quot;pagelink&quot; t:page=&quot;Index&quot; href=&quot;#;&quot;&gt;index&lt;/a&gt;&lt;br/&gt;</div><div>&lt;t:pagelink page=&quot;Index&quot;&gt;index&lt;/t:pagelink&gt;&lt;br/&gt;</div><div>&lt;a t:type=&quot;pagelink&quot; t:id=&quot;myPage&quot; href=&quot;#;&quot;&gt;index&lt;/a&gt;&lt;br/&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第八讲：tapestry组件', '<p></p>Working with a web designer, you may prefer to provide them a template without the clutter of the Tapestry parameter bindings.<br style=\"box-sizing: border-box; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px;\" /><p>Tapestry provides an alternative. Instead of this...</p><p><pre class=\"prettyprint lang-html\">&lt;t:pagelink&quot; t:page=&quot;Index&quot;&gt;index&lt;/t:pagelink&gt;\r\n</pre>you can use invisible instrumentation (explained in the Previewable Templates example) and just the component id, like this</p><p><pre class=\"prettyprint lang-html\">&lt;a t:type=&quot;pagelink&quot; t:id=&quot;myPage&quot; href=&quot;#;&quot;&gt;index&lt;/a&gt;</pre></p><p></p><p>AtComponent.java</p><p></p><pre class=\"prettyprint lang-html\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.corelib.components.PageLink;\r\n\r\npublic class AtComponent {\r\n\r\n	@Component(id = &quot;myPage&quot;, parameters = { &quot;page=Index&quot; })\r\n	private PageLink index;\r\n}</pre><p></p><p>AtComponent.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;a t:type=&quot;pagelink&quot; t:page=&quot;Index&quot; href=&quot;#;&quot;&gt;index&lt;/a&gt;&lt;br/&gt;\r\n&lt;t:pagelink page=&quot;Index&quot;&gt;index&lt;/t:pagelink&gt;&lt;br/&gt;\r\n&lt;a t:type=&quot;pagelink&quot; t:id=&quot;myPage&quot; href=&quot;#;&quot;&gt;index&lt;/a&gt;&lt;br/&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', 'Lesson 8：Tapestry @Component', '');
INSERT INTO `td_c_technology` VALUES ('30', null, '2016-05-12 09:13:03', 'admin', '0755', '', 'admin', '2016-05-16 14:04:25', '<p>tapestry页面间的跳转使用了pagelink组件，等同于html的&lt;a&gt;节点。使用方法非常简单，具体使用上一讲已经讲过。</p>', null, '17', '第九讲：tapestry pagelink组件', '<p>To render a link to another page, use the PageLink component. It calculates the full URL at runtime and renders a link to it.</p><p>example:Lesson 7：Lesson 8：Tapestry @Component<br /></p>', 'Lesson 9：Tapestry Page Links', '');
INSERT INTO `td_c_technology` VALUES ('31', null, '2016-05-12 09:14:03', 'admin', '0755', '', 'admin', '2016-05-16 14:16:32', '<p>tapestry通过地址栏传值常用的有：通过组件的context传值、通过<span style=\"font-family: \'courier new\', courier, monospace; white-space: pre;\">activate(),passivate传值、通过@PageActivationContext传值。@PageActivationContext等同于activate(),passivate。代码如下：</span></p><p>ActivationContext.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class ActivationContext {</div><div>&nbsp;</div><div>@Property</div><div>private String strOne;</div><div>&nbsp;</div><div>//传递strOne到浏览器地址栏</div><div>String onPassivate(){</div><div>return strOne;</div><div>}</div><div>&nbsp;</div><div>//从地址栏中获得strOne值，注意：当传递的值是中文是会被转码，所以看不到中文。</div><div>//当做检索的时候想通过地址栏传递查询变量时，可使用ajax不刷新查看中文。</div><div>void onActivate(String strOne){</div><div>this.strOne = strOne;</div><div>}</div><div>&nbsp;</div><div>//@PageActivationContext是onPassivate()与onActivate()2个函数的封装。</div><div>//使用@PageActivationContext就不用在写onPassivate()与onActivate()了</div><div>//跟@Property类似。</div><div>@Property</div><div>@PageActivationContext</div><div>private String strTwo;</div><div>}</div><div>&nbsp;</div></div><p>ActivationContext.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;a t:type=&quot;pagelink&quot; t:page=&quot;examples/ts1/ActivationContext&quot; t:context=&quot;literal:5&quot;&gt;把5传递到ActivationContext页面&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&lt;t:form t:id=&quot;form1&quot;&gt;</div><div>&lt;input t:type=&quot;textfield&quot; t:id=&quot;strOne&quot; value=&quot;strOne&quot;/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;传递strOne值&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;t:form t:id=&quot;form2&quot;&gt;</div><div>&lt;input t:type=&quot;textfield&quot; t:id=&quot;strTwo&quot; value=&quot;strTwo&quot;/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;传递strTwo值&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十讲：tapestry通过地址栏传值@PageActivationContext', '<p>A&nbsp;<span style=\"box-sizing: border-box;\">page render request</span>&nbsp;activates a page. A page render request can include parameters, which Tapestry calls the&nbsp;<span style=\"box-sizing: border-box;\">activation context</span>.<span style=\"font-family: \'courier new\', courier, monospace;\">activate() and passivate、@PageActivationContext。@PageActivationContext=activate()+passivate.Code as follows:</span></p><p>ActivationContext.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class ActivationContext {\r\n\r\n	@Property\r\n	private String strOne;\r\n\r\n	// 传递strOne到浏览器地址栏\r\n	String onPassivate() {\r\n		return strOne;\r\n	}\r\n\r\n	// 从地址栏中获得strOne值，注意：当传递的值是中文是会被转码，所以看不到中文。\r\n	// 当做检索的时候想通过地址栏传递查询变量时，可使用ajax不刷新查看中文。\r\n	void onActivate(String strOne) {\r\n		this.strOne = strOne;\r\n	}\r\n\r\n	// @PageActivationContext是onPassivate()与onActivate()2个函数的封装。\r\n	// 使用@PageActivationContext就不用在写onPassivate()与onActivate()了\r\n	// 跟@Property类似。\r\n	@Property\r\n	@PageActivationContext\r\n	private String strTwo;\r\n}</pre></p><p>ActivationContext.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;a t:type=&quot;pagelink&quot; t:page=&quot;examples/ts1/ActivationContext&quot; t:context=&quot;literal:5&quot;&gt;把5传递到ActivationContext页面&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;\r\n&lt;t:form t:id=&quot;form1&quot;&gt;\r\n&lt;input t:type=&quot;textfield&quot; t:id=&quot;strOne&quot; value=&quot;strOne&quot;/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;传递strOne值&quot;/&gt;\r\n&lt;/t:form&gt;\r\n&lt;t:form t:id=&quot;form2&quot;&gt;\r\n&lt;input t:type=&quot;textfield&quot; t:id=&quot;strTwo&quot; value=&quot;strTwo&quot;/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;传递strTwo值&quot;/&gt;\r\n&lt;/t:form&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 10：Tapestry @PageActivationContext', '');
INSERT INTO `td_c_technology` VALUES ('32', null, '2016-05-12 09:14:49', 'admin', '0755', '', 'admin', '2016-05-16 14:27:06', '<p><span class=\"download-box\"><a class=\"download-btn\" target=\"_blank\" href=\"/videodetail/18\">在线观看本教程视频A</a></span> <span class=\"download-box\"><a class=\"download-btn ml10\" target=\"_blank\" href=\"/videodetail/19\">在线观看本教程视频B</a></span></p><p>tapestry session通常有两种方式：persist与sso，persist方法虽然简单，但是过多的使用会增加了服务器的负担，同时其URL也无法被做为书签保存。sso被保存在Session中，可以被同一用户的所有页面共享，但不会被其他用户共享，通过@SessionState标记，做用户登录使用。源码如下：</p><p>&nbsp;</p><p><a target=\"_blank\" href=\"/examples/ts1/MyPersist\">查看demo</a></p><p>&nbsp;</p><p>MyPersist.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class MyPersist {</div><div>&nbsp;</div><div>//直接把hello存储到session</div><div>@Persist</div><div>@Property</div><div>private String hello;</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>MyPersist.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>您输入的值：${hello}&lt;br/&gt;</div><div>&lt;form t:type=&quot;form&quot;&gt;</div><div>&lt;input t:type=&quot;textfield&quot; t:id=&quot;hello&quot; value=&quot;hello&quot;/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</div><div>&lt;/form&gt;&nbsp;</div><div>&lt;/html&gt;</div></div><p><a target=\"_blank\" href=\"/examples/ts1/Signin\">查看demo</a></p><p>Signin.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.annotations.SessionState;</div><div>&nbsp;</div><div>public class Signin {</div><div>&nbsp;</div><div>@Property</div><div>private String userName;</div><div>&nbsp;</div><div>@Property</div><div>private String password;</div><div>&nbsp;</div><div>@SessionState</div><div>private String user;</div><div>&nbsp;</div><div>Object onSuccess(){</div><div>if(&quot;fly&quot;.equals(userName) &amp;&amp; &quot;123&quot;.equals(password)){</div><div>user = userName;</div><div>return Welcome.class;</div><div>}</div><div>return null;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Signin.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:form&gt;</div><p>输入用户名/密码：fly/123</p><div>用户名：&lt;input t:type=&quot;textfield&quot; t:id=&quot;userName&quot; value=&quot;userName&quot;/&gt;&lt;br/&gt;</div><div>密码：&lt;input t:type=&quot;textfield&quot; t:id=&quot;password&quot; value=&quot;password&quot;/&gt;&lt;br/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;登录&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;/html&gt;</div></div><p>Welcome.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.annotations.SessionState;</div><div>&nbsp;</div><div>public class Welcome {</div><div>&nbsp;</div><div>@Property</div><div>@SessionState</div><div>private String userName;</div><div>&nbsp;</div><div>Object onLogout(){</div><div>userName = null;</div><div>return Signin.class;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Welcome.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>${userName}，欢迎您！&lt;t:eventlink t:event=&quot;logOut&quot;&gt;退出&lt;/t:eventlink&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十一讲：tapestry session存储', '<p>tapestry session：persist and sso，persist is page storage。sso is session.Code as follows:</p><p>MyPersist.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Persist;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class MyPersist {\r\n\r\n	// 直接把hello存储到session\r\n	@Persist\r\n	@Property\r\n	private String hello;\r\n\r\n}</pre><br /></p><p>MyPersist.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n您输入的值：${hello}&lt;br/&gt;\r\n&lt;form t:type=&quot;form&quot;&gt;\r\n&lt;input t:type=&quot;textfield&quot; t:id=&quot;hello&quot; value=&quot;hello&quot;/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;\r\n&lt;/form&gt; \r\n&lt;/html&gt;</pre></p><p>Signin.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.annotations.SessionState;\r\n\r\npublic class Signin {\r\n\r\n	@Property\r\n	private String userName;\r\n\r\n	@Property\r\n	private String password;\r\n\r\n	@SessionState\r\n	private String user;\r\n\r\n	Object onSuccess() {\r\n		if (&quot;fly&quot;.equals(userName) &amp;&amp; &quot;123&quot;.equals(password)) {\r\n			user = userName;\r\n			return Welcome.class;\r\n		}\r\n		return null;\r\n	}\r\n}</pre></p><p>Signin.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:form&gt;\r\n输入用户名/密码：fly/123\r\n\r\n用户名：&lt;input t:type=&quot;textfield&quot; t:id=&quot;userName&quot; value=&quot;userName&quot;/&gt;&lt;br/&gt;\r\n密码：&lt;input t:type=&quot;textfield&quot; t:id=&quot;password&quot; value=&quot;password&quot;/&gt;&lt;br/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;登录&quot;/&gt;\r\n&lt;/t:form&gt;\r\n&lt;/html&gt;</pre></p><p>Welcome.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.annotations.SessionState;\r\n\r\npublic class Welcome {\r\n\r\n	@Property\r\n	@SessionState\r\n	private String userName;\r\n\r\n	Object onLogout() {\r\n		userName = null;\r\n		return Signin.class;\r\n	}\r\n}</pre></p><p>Welcome.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n${userName}，欢迎您！&lt;t:eventlink t:event=&quot;logOut&quot;&gt;退出&lt;/t:eventlink&gt;\r\n&lt;/html&gt;</pre></p>', 'Lesson 11：Tapestry Session', '');
INSERT INTO `td_c_technology` VALUES ('33', null, '2016-05-12 09:15:30', 'admin', '0755', '', 'admin', '2016-05-17 08:30:45', '<p>actionlink与eventlink组件非常相似，都是执行一个事件，在代码编写上有一点点差异。源代码如下：</p><p>MyEvent.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class MyEvent {</div><div>&nbsp;</div><div>@Property</div><div>@PageActivationContext</div><div>private int count;</div><div>&nbsp;</div><div>//执行eventlink递增加+1,newCount就是默认值1</div><div>void onAdd(int newCount){</div><div>count += newCount;</div><div>}</div><div>&nbsp;</div><div>//执行actionlink递增加+2,meCount就是默认值2</div><div>void onActionFromAddTwo(int meCount){</div><div>count += meCount;</div><div>}</div><div>&nbsp;</div><div>//设置为0</div><div>void onClear(){</div><div>count = 0;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>MyEvent.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;color:#ff6600&quot;&gt;${count}&lt;/div&gt;</div><div>&lt;t:eventlink t:event=&quot;add&quot; t:context=&quot;literal:1&quot;&gt;单击递增1，初始值为1&lt;/t:eventlink&gt;&lt;br/&gt;</div><div>&lt;t:actionlink t:id=&quot;addTwo&quot; t:context=&quot;literal:2&quot;&gt;单击递增2，初始值为2&lt;/t:actionlink&gt;&lt;br/&gt;</div><div>&lt;a href=&quot;#;&quot; t:type=&quot;eventlink&quot; t:event=&quot;clear&quot;&gt;清除&lt;/a&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十二讲：tapestry actionlink与eventlink组件', '<p>MyEvent.java<br /></p><div><div><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class MyEvent {\r\n\r\n	@Property\r\n	@PageActivationContext\r\n	private int count;\r\n\r\n	// 执行eventlink递增加+1,newCount就是默认值1\r\n	void onAdd(int newCount) {\r\n		count += newCount;\r\n	}\r\n\r\n	// 执行actionlink递增加+2,meCount就是默认值2\r\n	void onActionFromAddTwo(int meCount) {\r\n		count += meCount;\r\n	}\r\n\r\n	// 设置为0\r\n	void onClear() {\r\n		count = 0;\r\n	}\r\n}</pre></div></div><p>MyEvent.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;color:#ff6600&quot;&gt;${count}&lt;/div&gt;\r\n&lt;t:eventlink t:event=&quot;add&quot; t:context=&quot;literal:1&quot;&gt;单击递增1，初始值为1&lt;/t:eventlink&gt;&lt;br/&gt;\r\n&lt;t:actionlink t:id=&quot;addTwo&quot; t:context=&quot;literal:2&quot;&gt;单击递增2，初始值为2&lt;/t:actionlink&gt;&lt;br/&gt;\r\n&lt;a href=&quot;#;&quot; t:type=&quot;eventlink&quot; t:event=&quot;clear&quot;&gt;清除&lt;/a&gt;\r\n&lt;/html&gt;</pre>', 'Lesson 12：Tapestry Eventlink and Actionlink', '');
INSERT INTO `td_c_technology` VALUES ('34', null, '2016-05-12 09:16:32', 'admin', '0755', '', 'admin', '2016-05-17 08:35:28', '<p>form组件，源码如下：</p><p>Forms1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.corelib.components.Form;</div><div>import org.apache.tapestry5.corelib.components.TextField;</div><div>&nbsp;</div><div>public class Forms1 {</div><div>&nbsp;</div><div>@Property</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>private String lastName;</div><div>&nbsp;</div><div>@Component(id=&quot;myForm&quot;)</div><div>private Form form;</div><div>&nbsp;</div><div>@Component(id=&quot;firstName&quot;)</div><div>private TextField firstNameField;</div><div>&nbsp;</div><div>@Component(id=&quot;lastName&quot;)</div><div>private TextField lastNameField;</div><div>&nbsp;</div><div>@InjectPage</div><div>private Forms2 forms2;</div><div>&nbsp;</div><div>void onValidateFromMyForm(){</div><div>if(firstName == null || firstName.trim().equals(&quot;&quot;)){</div><div>form.recordError(firstNameField, &quot;姓不能为空值！&quot;);</div><div>}</div><div>if(lastName == null || lastName.trim().equals(&quot;&quot;)){</div><div>form.recordError(lastNameField, &quot;名字不能为空值！&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div><div>Object onSuccess(){</div><div>forms2.setFirstName(firstName);</div><div>forms2.setLastName(lastName);</div><div>return forms2;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Forms1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:form t:id=&quot;myForm&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>姓：&lt;input t:type=&quot;textfield&quot; t:id=&quot;firstName&quot; value=&quot;firstName&quot;/&gt;&lt;br/&gt;</div><div>名：&lt;input t:type=&quot;textfield&quot; t:id=&quot;lastName&quot; value=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;/html&gt;</div></div><p>Forms2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>&nbsp;</div><div>public class Forms2 {</div><div>&nbsp;</div><div>@Persist</div><div>private String firstName;</div><div>&nbsp;</div><div>@Persist</div><div>private String lastName;</div><div>&nbsp;</div><div>public String getLastName() {</div><div>return lastName;</div><div>}</div><div>&nbsp;</div><div>public void setLastName(String lastName) {</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>public String getFirstName() {</div><div>return firstName;</div><div>}</div><div>&nbsp;</div><div>public void setFirstName(String firstName) {</div><div>this.firstName = firstName;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Forms2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>用户名：${firstName}${lastName}</div><div>&lt;t:pagelink page=&quot;Forms1&quot;&gt;返回&lt;/t:pagelink&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十三讲：tapestry form组件', '<p>Forms1.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.Form;\r\nimport org.apache.tapestry5.corelib.components.TextField;\r\n\r\npublic class Forms1 {\r\n\r\n	@Property\r\n	private String firstName;\r\n\r\n	@Property\r\n	private String lastName;\r\n\r\n	@Component(id = &quot;myForm&quot;)\r\n	private Form form;\r\n\r\n	@Component(id = &quot;firstName&quot;)\r\n	private TextField firstNameField;\r\n\r\n	@Component(id = &quot;lastName&quot;)\r\n	private TextField lastNameField;\r\n\r\n	@InjectPage\r\n	private Forms2 forms2;\r\n\r\n	void onValidateFromMyForm() {\r\n		if (firstName == null || firstName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(firstNameField, &quot;姓不能为空值！&quot;);\r\n		}\r\n		if (lastName == null || lastName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(lastNameField, &quot;名字不能为空值！&quot;);\r\n		}\r\n	}\r\n\r\n	Object onSuccess() {\r\n		forms2.setFirstName(firstName);\r\n		forms2.setLastName(lastName);\r\n		return forms2;\r\n	}\r\n}</pre></p><p>Forms1.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:form t:id=&quot;myForm&quot;&gt;\r\n&lt;t:errors/&gt;\r\n姓：&lt;input t:type=&quot;textfield&quot; t:id=&quot;firstName&quot; value=&quot;firstName&quot;/&gt;&lt;br/&gt;\r\n名：&lt;input t:type=&quot;textfield&quot; t:id=&quot;lastName&quot; value=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;\r\n&lt;/t:form&gt;\r\n&lt;/html&gt;</pre></p><p>Forms2.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Persist;\r\n\r\npublic class Forms2 {\r\n\r\n	@Persist\r\n	private String firstName;\r\n\r\n	@Persist\r\n	private String lastName;\r\n\r\n	public String getLastName() {\r\n		return lastName;\r\n	}\r\n\r\n	public void setLastName(String lastName) {\r\n		this.lastName = lastName;\r\n	}\r\n\r\n	public String getFirstName() {\r\n		return firstName;\r\n	}\r\n\r\n	public void setFirstName(String firstName) {\r\n		this.firstName = firstName;\r\n	}\r\n}</pre></p><p>Forms2.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n用户名：${firstName}${lastName}\r\n&lt;t:pagelink page=&quot;Forms1&quot;&gt;返回&lt;/t:pagelink&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 13：Tapestry Forms', '');
INSERT INTO `td_c_technology` VALUES ('35', null, '2016-05-12 09:16:53', 'admin', '0755', '', 'admin', '2016-05-17 08:47:23', '<p>tapestry提供了表单验证，大大简化了我们手工编写验证代码的麻烦。常用验证有：required(必须的)、email(邮箱验证)、maxLength(最大字符数)、minLength(最小字符数)、max(最大值)、min(最小值)、regexp(正则表达式)。奇怪的是5.3.1验证有bug，5.3.2已经修复了....源码如下：</p><p>Validators1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.beaneditor.Validate;</div><div>&nbsp;</div><div><div>@Property</div><div>@Validate(&quot;required,minlength=3,maxlength=5&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>@Validate(&quot;required&quot;)</div><div>private String lastName;</div><div>&nbsp;</div><div>@InjectPage</div><div>private Validators2 validators2;</div><div>&nbsp;</div><div>Object onSuccess() {</div><div>validators2.set(firstName, lastName);</div><div>return validators2;</div><div>}</div></div><div>&nbsp;</div></div><p>Validators1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:form&gt;</div><div>&lt;t:errors/&gt;</div><div>姓：&lt;input t:type=&quot;textField&quot; t:id=&quot;firstName&quot; value=&quot;firstName&quot;/&gt;&lt;br/&gt;</div><div>名字：&lt;input t:type=&quot;textField&quot; t:id=&quot;lastName&quot; value=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;/html&gt;</div></div><p>Validators1.properties</p><div class=\"code\"><div>firstName-required-message=\\u59D3\\u4E0D\\u80FD\\u4E3A\\u7A7A\\uFF01</div><div>firstName-minlength-message=\\u6700\\u5C11\\u8F93\\u51653\\u4E2A\\u5B57\\u7B26\\uFF01</div><div>firstName-maxlength-message=\\u6700\\u5927\\u5B57\\u7B26\\u6570\\u4E0D\\u80FD\\u8D85\\u8FC75\\u4E2A\\uFF01</div><div>lastName-required-message=\\u540D\\u5B57\\u4E0D\\u80FD\\u4E3A\\u7A7A\\uFF01</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div></div><p>Validators2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div><div>public class Validators2 {</div><div>&nbsp;</div><div>private String firstName;</div><div>&nbsp;</div><div>private String lastName;</div><div>&nbsp;</div><div>public void set(String firstName, String lastName) {</div><div>this.firstName = firstName;</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>public String getName() {</div><div>return firstName + &quot; &quot; + lastName;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>String[] onPassivate() {</div><div>return new String[] { firstName, lastName};</div><div>}</div><div>&nbsp;</div><div>void onActivate(String firstName, String lastName) {</div><div>this.firstName = firstName;</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>}</div></div><div>&nbsp;</div></div><p>Validators2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>姓名：${name}&lt;br/&gt;</div><div>&lt;t:pagelink page=&quot;Validators1&quot;&gt;返回&lt;/t:pagelink&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十四讲：tapestry form验证', '<p>Validators1.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.beaneditor.Validate;\r\n\r\npublic class Validators1 {\r\n	@Property\r\n	@Validate(&quot;required,minlength=3,maxlength=5&quot;)\r\n	private String firstName;\r\n\r\n	@Property\r\n	@Validate(&quot;required&quot;)\r\n	private String lastName;\r\n\r\n	@InjectPage\r\n	private Validators2 validators2;\r\n\r\n	Object onSuccess() {\r\n		validators2.set(firstName, lastName);\r\n		return validators2;\r\n	}\r\n}</pre><p></p><p>Validators1.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:form&gt;\r\n&lt;t:errors/&gt;\r\n姓：&lt;input t:type=&quot;textField&quot; t:id=&quot;firstName&quot; value=&quot;firstName&quot;/&gt;&lt;br/&gt;\r\n名字：&lt;input t:type=&quot;textField&quot; t:id=&quot;lastName&quot; value=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;\r\n&lt;/t:form&gt;\r\n&lt;/html&gt;</pre><p></p><p>Validators1.properties</p><p></p><pre class=\"prettyprint lang-html\">firstName-required-message=\\u59D3\\u4E0D\\u80FD\\u4E3A\\u7A7A\\uFF01\r\nfirstName-minlength-message=\\u6700\\u5C11\\u8F93\\u51653\\u4E2A\\u5B57\\u7B26\\uFF01\r\nfirstName-maxlength-message=\\u6700\\u5927\\u5B57\\u7B26\\u6570\\u4E0D\\u80FD\\u8D85\\u8FC75\\u4E2A\\uFF01\r\nlastName-required-message=\\u540D\\u5B57\\u4E0D\\u80FD\\u4E3A\\u7A7A\\uFF01</pre><p></p><p>Validators2.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\npublic class Validators2 {\r\n\r\n	private String firstName;\r\n\r\n	private String lastName;\r\n\r\n	public void set(String firstName, String lastName) {\r\n		this.firstName = firstName;\r\n		this.lastName = lastName;\r\n	}\r\n\r\n	public String getName() {\r\n		return firstName + &quot; &quot; + lastName;\r\n	}\r\n\r\n	String[] onPassivate() {\r\n		return new String[] { firstName, lastName };\r\n	}\r\n\r\n	void onActivate(String firstName, String lastName) {\r\n		this.firstName = firstName;\r\n		this.lastName = lastName;\r\n	}\r\n\r\n}</pre><p></p><div><div>Validators2.tml</div><div><br /></div><div><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n姓名：${name}&lt;br/&gt;\r\n&lt;t:pagelink page=&quot;Validators1&quot;&gt;返回&lt;/t:pagelink&gt;\r\n&lt;/html&gt;</pre><br /></div></div>', 'Lesson 14：Tapestry Validators', '');
INSERT INTO `td_c_technology` VALUES ('36', null, '2016-05-12 09:17:22', 'admin', '0755', '', 'admin', '2016-05-17 08:58:33', '<p>自定义表单比较复杂，编写了几个组件CustomForm组件、CustomError组件、CustomValidationDecorator自定义验证该文件使用了@Override如果报错请选择项目的jdk版本为1.6。代码如下：<br /></p><p>CustomForm.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.components;</div><div>&nbsp;</div><div>import org.apache.tapestry5.Field;</div><div>import org.apache.tapestry5.FormValidationControl;</div><div>import org.apache.tapestry5.MarkupWriter;</div><div>import org.apache.tapestry5.ValidationDecorator;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.SupportsInformalParameters;</div><div>import org.apache.tapestry5.corelib.components.Form;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Environment;</div><div>&nbsp;</div><div>import com.tapestry.app.commons.CustomValidationDecorator;</div><div>&nbsp;</div><div>&nbsp;</div><div>@SupportsInformalParameters</div><div>public class CustomForm implements FormValidationControl {</div><div>&nbsp;</div><div>&nbsp;</div><div>@Inject</div><div>private Environment environment;</div><div>&nbsp;</div><div>@Component(id = &quot;form&quot;, publishParameters = &quot;context, tracker, clientValidation, zone, secure, validationId, validate, class&quot;,&nbsp;</div><div>inheritInformalParameters = true)</div><div>private Form form;</div><div>&nbsp;</div><div>void beginRender(MarkupWriter writer) {</div><div>environment.push(ValidationDecorator.class, new CustomValidationDecorator(environment, writer));</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>void afterRender(MarkupWriter writer) {</div><div>environment.pop(ValidationDecorator.class);</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public void clearErrors() {</div><div>form.clearErrors();</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public boolean getHasErrors() {</div><div>return form.getHasErrors();</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public boolean isValid() {</div><div>return form.isValid();</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public void recordError(String errorMessage) {</div><div>form.recordError(errorMessage);</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public void recordError(Field field, String errorMessage) {</div><div>form.recordError(field, errorMessage);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>CustomForm.tml</p><div class=\"code\"><div>&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot;&gt;</div><div>&lt;t:content&gt;</div><div>&lt;t:form t:id=&quot;form&quot; autoFocus=&quot;false&quot;&gt;</div><div>&lt;t:body/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;/t:content&gt;</div><div>&lt;/html&gt;</div></div><p>CustomError.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.components;</div><div>&nbsp;</div><div>import org.apache.tapestry5.BindingConstants;</div><div>import org.apache.tapestry5.Field;</div><div>import org.apache.tapestry5.MarkupWriter;</div><div>import org.apache.tapestry5.annotations.Environmental;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.Parameter;</div><div>import org.apache.tapestry5.dom.Element;</div><div>import org.apache.tapestry5.services.Heartbeat;</div><div>&nbsp;</div><div>@Import(library = &quot;CustomError.js&quot;)</div><div>public class CustomError {</div><div>&nbsp;</div><div>@Parameter(name = &quot;for&quot;, required = true, allowNull = false, defaultPrefix = BindingConstants.COMPONENT)</div><div>private Field field;</div><div>&nbsp;</div><div>@Environmental</div><div>private Heartbeat heartbeat;</div><div>&nbsp;</div><div>private Element labelElement;</div><div>&nbsp;</div><div>boolean beginRender(MarkupWriter writer) {</div><div>final Field field = this.field;</div><div>&nbsp;</div><div>labelElement = writer.element(&quot;span&quot;, &quot;class&quot;, &quot;msg&quot;);</div><div>&nbsp;</div><div>&nbsp;</div><div>Runnable command = new Runnable() {</div><div>public void run() {</div><div>String fieldId = field.getClientId();</div><div>labelElement.forceAttributes(&quot;id&quot;, fieldId + &quot;-msg&quot;);</div><div>}</div><div>};</div><div>&nbsp;</div><div>heartbeat.defer(command);</div><div>&nbsp;</div><div>return false;</div><div>}</div><div>&nbsp;</div><div>void afterRender(MarkupWriter writer) {</div><div>writer.end();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>CustomValidationDecorator.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.commons;</div><div>&nbsp;</div><div>import org.apache.tapestry5.BaseValidationDecorator;</div><div>import org.apache.tapestry5.Field;</div><div>import org.apache.tapestry5.MarkupWriter;</div><div>import org.apache.tapestry5.ValidationTracker;</div><div>import org.apache.tapestry5.corelib.components.RadioGroup;</div><div>import org.apache.tapestry5.dom.Element;</div><div>import org.apache.tapestry5.services.Environment;</div><div>&nbsp;</div><div>public class CustomValidationDecorator extends BaseValidationDecorator {</div><div>&nbsp;</div><div>private final Environment environment;</div><div>private final MarkupWriter markupWriter;</div><div>&nbsp;</div><div>public CustomValidationDecorator(Environment environment, MarkupWriter markupWriter) {</div><div>this.environment = environment;</div><div>this.markupWriter = markupWriter;</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public void insideLabel(Field field, Element element) {</div><div>final String radioGroupClassName = RadioGroup.class.getName();</div><div>&nbsp;</div><div>if (field == null) {</div><div>return;</div><div>}</div><div>&nbsp;</div><div>if (!field.getClass().getName().equals(radioGroupClassName)) {</div><div>if (field.isRequired()) {</div><div>element.addClassName(&quot;required-label&quot;);</div><div>element.getContainer().addClassName(&quot;required-label-c&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div><div>if (inError(field)) {</div><div>element.addClassName(&quot;error-label&quot;);</div><div>element.getContainer().addClassName(&quot;error-label-c&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public void insideField(Field field) {</div><div>&nbsp;</div><div>if (field.isRequired()) {</div><div>getElement().addClassName(&quot;required-field&quot;);</div><div>getElement().getContainer().addClassName(&quot;required-field-c&quot;);</div><div>}</div><div>&nbsp;</div><div>if (inError(field)) {</div><div>getElement().addClassName(&quot;error-field&quot;);</div><div>getElement().getContainer().addClassName(&quot;error-field-c&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div><div>private boolean inError(Field field) {</div><div>ValidationTracker tracker = getTracker();</div><div>return tracker.inError(field);</div><div>}</div><div>&nbsp;</div><div>private ValidationTracker getTracker() {</div><div>return environment.peekRequired(ValidationTracker.class);</div><div>}</div><div>&nbsp;</div><div>private Element getElement() {</div><div>return markupWriter.getElement();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>CustomError.js</p><div class=\"code\"><div>Tapestry.FieldEventManager.addMethods( {</div><div>&nbsp;</div><div>initialize : function(field) {</div><div>this.field = $(field);</div><div>&nbsp;</div><div>var id = this.field.id;</div><div>this.fieldContainer = this.field.parentNode;</div><div>Element.extend(this.fieldContainer);</div><div>&nbsp;</div><div>var labelSelector = &quot;label[for=\'&quot; + id + &quot;\']&quot;;</div><div>this.label = this.field.up(&quot;form&quot;).down(labelSelector);</div><div>&nbsp;</div><div>if (this.label) {</div><div>this.labelContainer = this.label.parentNode;</div><div>Element.extend(this.labelContainer);</div><div>}</div><div>&nbsp;</div><div>var msgId = id + \'-msg\';</div><div>this.msg = $(msgId);</div><div>&nbsp;</div><div>if (!this.msg) {</div><div>this.msg = new Element(\'strong\', {</div><div>\'id\' : msgId,</div><div>\'class\' : \'msg\'</div><div>});</div><div>this.fieldContainer.insert( {</div><div>bottom : this.msg</div><div>});</div><div>}</div><div>&nbsp;</div><div>this.msgContainer = this.msg.parentNode;</div><div>Element.extend(this.msgContainer);</div><div>&nbsp;</div><div>this.translator = Prototype.K;</div><div>&nbsp;</div><div>var fem = $(this.field.form).getFormEventManager();</div><div>&nbsp;</div><div>if (fem.validateOnBlur) {</div><div>&nbsp;</div><div>document.observe(Tapestry.FOCUS_CHANGE_EVENT, function(event) {</div><div>/*</div><div>* If changing focus *within the same form* then perform</div><div>* validation. Note that Tapestry.currentFocusField does not</div><div>* change until after the FOCUS_CHANGE_EVENT notification.</div><div>*/</div><div>if (Tapestry.currentFocusField == this.field</div><div>&amp;&amp; this.field.form == event.memo.form)</div><div>this.validateInput();</div><div>&nbsp;</div><div>}.bindAsEventListener(this));</div><div>}</div><div>&nbsp;</div><div>if (fem.validateOnSubmit) {</div><div>$(this.field.form).observe(Tapestry.FORM_VALIDATE_FIELDS_EVENT,</div><div>this.validateInput.bindAsEventListener(this));</div><div>}</div><div>},</div><div>&nbsp;</div><div>&nbsp;</div><div>showValidationMessage : function(message) {</div><div>$(this.field).getStorage().validationError = true;</div><div>$(this.field.form).getStorage().validationError = true;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>this.msg.update(message);</div><div>&nbsp;</div><div>&nbsp;</div><div>if (this.label) {</div><div>this.label.addClassName(&quot;error-label&quot;);</div><div>this.labelContainer.addClassName(&quot;error-label-c&quot;);</div><div>}</div><div>this.field.addClassName(&quot;error-field&quot;);</div><div>this.fieldContainer.addClassName(&quot;error-field-c&quot;);</div><div>this.msg.addClassName(&quot;error-msg&quot;);</div><div>this.msgContainer.addClassName(&quot;error-msg-c&quot;);</div><div>},</div><div>&nbsp;</div><div>&nbsp;</div><div>removeDecorations : function() {</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>this.msg.update(null);</div><div>&nbsp;</div><div>&nbsp;</div><div>if (this.label) {</div><div>this.label.removeClassName(&quot;error-label&quot;);</div><div>this.labelContainer.removeClassName(&quot;error-label-c&quot;);</div><div>}</div><div>this.field.removeClassName(&quot;error-field&quot;);</div><div>this.fieldContainer.removeClassName(&quot;error-field-c&quot;);</div><div>this.msg.removeClassName(&quot;error-msg&quot;);</div><div>this.msgContainer.removeClassName(&quot;error-msg-c&quot;);</div><div>}</div><div>} );</div></div><p>以上就是自定义验证所有需要的文件。以下看下使用自定义验证的代码：</p><p>CValidators1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.beaneditor.Validate;</div><div>&nbsp;</div><div>public class CValidators1 {</div><div>&nbsp;</div><div>@Property</div><div>@Validate(&quot;required&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>@Validate(&quot;required&quot;)</div><div>private String lastName;</div><div>&nbsp;</div><div>@InjectPage</div><div>private CValidators2 validators2;</div><div>&nbsp;</div><div>Object onSuccess(){</div><div>validators2.set(firstName, lastName);</div><div>return validators2;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>CValidators1.tml</p><div class=\"code\"><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>&nbsp;&lt;style&gt;</div><div>&nbsp;.error-msg{color:red}</div><div>&nbsp;&lt;/style&gt;</div><div>&lt;form t:type=&quot;CustomForm&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>姓：&lt;input t:type=&quot;textField&quot; t:id=&quot;firstName&quot; value=&quot;firstName&quot;/&gt;&lt;t:CustomError for=&quot;firstName&quot;/&gt;&lt;br/&gt;</div><div>名字：&lt;input t:type=&quot;textField&quot; t:id=&quot;lastName&quot; value=&quot;lastName&quot;/&gt;&lt;t:CustomError for=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>CValidators2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>public class CValidators2 {</div><div>&nbsp;</div><div>private String firstName;</div><div>&nbsp;</div><div>private String lastName;</div><div>&nbsp;</div><div>public void set(String firstName, String lastName){</div><div>this.firstName = firstName;</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>public String getName(){</div><div>return firstName + &quot; &quot; + lastName;</div><div>}</div><div>&nbsp;</div><div>String[] onPassivate(){</div><div>return new String[]{firstName, lastName};</div><div>}</div><div>&nbsp;</div><div>void onActivate(String firstName, String lastName){</div><div>this.firstName = firstName;</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>CValidators2.tml</p><div class=\"code\"><div>&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot; &nbsp;t:sidebarTitle=&quot;Framework Version&quot;</div><div>&nbsp;xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</div><div>姓名：${name}&lt;br/&gt;</div><div>&lt;t:pagelink page=&quot;CValidators1&quot;&gt;返回&lt;/t:pagelink&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十五讲：tapestry form自定义验证', '<p>CustomForm.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.components;\r\n\r\nimport org.apache.tapestry5.Field;\r\nimport org.apache.tapestry5.FormValidationControl;\r\nimport org.apache.tapestry5.MarkupWriter;\r\nimport org.apache.tapestry5.ValidationDecorator;\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.SupportsInformalParameters;\r\nimport org.apache.tapestry5.corelib.components.Form;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Environment;\r\n\r\nimport com.tapestry.app.commons.CustomValidationDecorator;\r\n\r\n@SupportsInformalParameters\r\npublic class CustomForm implements FormValidationControl {\r\n\r\n	@Inject\r\n	private Environment environment;\r\n\r\n	@Component(id = &quot;form&quot;, publishParameters = &quot;context, tracker, clientValidation, zone, secure, validationId, validate, class&quot;, inheritInformalParameters = true)\r\n	private Form form;\r\n\r\n	void beginRender(MarkupWriter writer) {\r\n		environment.push(ValidationDecorator.class, new CustomValidationDecorator(environment, writer));\r\n	}\r\n\r\n	void afterRender(MarkupWriter writer) {\r\n		environment.pop(ValidationDecorator.class);\r\n	}\r\n\r\n	@Override\r\n	public void clearErrors() {\r\n		form.clearErrors();\r\n	}\r\n\r\n	@Override\r\n	public boolean getHasErrors() {\r\n		return form.getHasErrors();\r\n	}\r\n\r\n	@Override\r\n	public boolean isValid() {\r\n		return form.isValid();\r\n	}\r\n\r\n	@Override\r\n	public void recordError(String errorMessage) {\r\n		form.recordError(errorMessage);\r\n	}\r\n\r\n	@Override\r\n	public void recordError(Field field, String errorMessage) {\r\n		form.recordError(field, errorMessage);\r\n	}\r\n}</pre></p><p>CustomForm.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot;&gt;\r\n&lt;t:content&gt;\r\n&lt;t:form t:id=&quot;form&quot; autoFocus=&quot;false&quot;&gt;\r\n&lt;t:body/&gt;\r\n&lt;/t:form&gt;\r\n&lt;/t:content&gt;\r\n&lt;/html&gt;</pre></p><p>CustomError.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.components;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.Field;\r\nimport org.apache.tapestry5.MarkupWriter;\r\nimport org.apache.tapestry5.annotations.Environmental;\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.dom.Element;\r\nimport org.apache.tapestry5.services.Heartbeat;\r\n\r\n@Import(library = &quot;CustomError.js&quot;)\r\npublic class CustomError {\r\n\r\n	@Parameter(name = &quot;for&quot;, required = true, allowNull = false, defaultPrefix = BindingConstants.COMPONENT)\r\n	private Field field;\r\n\r\n	@Environmental\r\n	private Heartbeat heartbeat;\r\n\r\n	private Element labelElement;\r\n\r\n	boolean beginRender(MarkupWriter writer) {\r\n		final Field field = this.field;\r\n\r\n		labelElement = writer.element(&quot;span&quot;, &quot;class&quot;, &quot;msg&quot;);\r\n\r\n		Runnable command = new Runnable() {\r\n			public void run() {\r\n				String fieldId = field.getClientId();\r\n				labelElement.forceAttributes(&quot;id&quot;, fieldId + &quot;-msg&quot;);\r\n			}\r\n		};\r\n\r\n		heartbeat.defer(command);\r\n\r\n		return false;\r\n	}\r\n\r\n	void afterRender(MarkupWriter writer) {\r\n		writer.end();\r\n	}\r\n}</pre></p><p>CustomValidationDecorator.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.commons;\r\n\r\nimport org.apache.tapestry5.BaseValidationDecorator;\r\nimport org.apache.tapestry5.Field;\r\nimport org.apache.tapestry5.MarkupWriter;\r\nimport org.apache.tapestry5.ValidationTracker;\r\nimport org.apache.tapestry5.corelib.components.RadioGroup;\r\nimport org.apache.tapestry5.dom.Element;\r\nimport org.apache.tapestry5.services.Environment;\r\n\r\npublic class CustomValidationDecorator extends BaseValidationDecorator {\r\n\r\n	private final Environment environment;\r\n	private final MarkupWriter markupWriter;\r\n\r\n	public CustomValidationDecorator(Environment environment, MarkupWriter markupWriter) {\r\n		this.environment = environment;\r\n		this.markupWriter = markupWriter;\r\n	}\r\n\r\n	@Override\r\n	public void insideLabel(Field field, Element element) {\r\n		final String radioGroupClassName = RadioGroup.class.getName();\r\n\r\n		if (field == null) {\r\n			return;\r\n		}\r\n\r\n		if (!field.getClass().getName().equals(radioGroupClassName)) {\r\n			if (field.isRequired()) {\r\n				element.addClassName(&quot;required-label&quot;);\r\n				element.getContainer().addClassName(&quot;required-label-c&quot;);\r\n			}\r\n		}\r\n\r\n		if (inError(field)) {\r\n			element.addClassName(&quot;error-label&quot;);\r\n			element.getContainer().addClassName(&quot;error-label-c&quot;);\r\n		}\r\n	}\r\n\r\n	@Override\r\n	public void insideField(Field field) {\r\n\r\n		if (field.isRequired()) {\r\n			getElement().addClassName(&quot;required-field&quot;);\r\n			getElement().getContainer().addClassName(&quot;required-field-c&quot;);\r\n		}\r\n\r\n		if (inError(field)) {\r\n			getElement().addClassName(&quot;error-field&quot;);\r\n			getElement().getContainer().addClassName(&quot;error-field-c&quot;);\r\n		}\r\n	}\r\n\r\n	private boolean inError(Field field) {\r\n		ValidationTracker tracker = getTracker();\r\n		return tracker.inError(field);\r\n	}\r\n\r\n	private ValidationTracker getTracker() {\r\n		return environment.peekRequired(ValidationTracker.class);\r\n	}\r\n\r\n	private Element getElement() {\r\n		return markupWriter.getElement();\r\n	}\r\n}</pre></p><p>CustomError.js</p><p><pre class=\"prettyprint lang-js\">Tapestry.FieldEventManager.addMethods( {\r\n \r\ninitialize : function(field) {\r\nthis.field = $(field);\r\n \r\nvar id = this.field.id;\r\nthis.fieldContainer = this.field.parentNode;\r\nElement.extend(this.fieldContainer);\r\n \r\nvar labelSelector = &quot;label[for=\'&quot; + id + &quot;\']&quot;;\r\nthis.label = this.field.up(&quot;form&quot;).down(labelSelector);\r\n \r\nif (this.label) {\r\nthis.labelContainer = this.label.parentNode;\r\nElement.extend(this.labelContainer);\r\n}\r\n \r\nvar msgId = id + \'-msg\';\r\nthis.msg = $(msgId);\r\n \r\nif (!this.msg) {\r\nthis.msg = new Element(\'strong\', {\r\n\'id\' : msgId,\r\n\'class\' : \'msg\'\r\n});\r\nthis.fieldContainer.insert( {\r\nbottom : this.msg\r\n});\r\n}\r\n \r\nthis.msgContainer = this.msg.parentNode;\r\nElement.extend(this.msgContainer);\r\n \r\nthis.translator = Prototype.K;\r\n \r\nvar fem = $(this.field.form).getFormEventManager();\r\n \r\nif (fem.validateOnBlur) {\r\n \r\ndocument.observe(Tapestry.FOCUS_CHANGE_EVENT, function(event) {\r\n/*\r\n* If changing focus *within the same form* then perform\r\n* validation. Note that Tapestry.currentFocusField does not\r\n* change until after the FOCUS_CHANGE_EVENT notification.\r\n*/\r\nif (Tapestry.currentFocusField == this.field\r\n&amp;&amp; this.field.form == event.memo.form)\r\nthis.validateInput();\r\n \r\n}.bindAsEventListener(this));\r\n}\r\n \r\nif (fem.validateOnSubmit) {\r\n$(this.field.form).observe(Tapestry.FORM_VALIDATE_FIELDS_EVENT,\r\nthis.validateInput.bindAsEventListener(this));\r\n}\r\n},\r\n \r\n \r\nshowValidationMessage : function(message) {\r\n$(this.field).getStorage().validationError = true;\r\n$(this.field.form).getStorage().validationError = true;\r\n \r\n \r\n \r\nthis.msg.update(message);\r\n \r\n \r\nif (this.label) {\r\nthis.label.addClassName(&quot;error-label&quot;);\r\nthis.labelContainer.addClassName(&quot;error-label-c&quot;);\r\n}\r\nthis.field.addClassName(&quot;error-field&quot;);\r\nthis.fieldContainer.addClassName(&quot;error-field-c&quot;);\r\nthis.msg.addClassName(&quot;error-msg&quot;);\r\nthis.msgContainer.addClassName(&quot;error-msg-c&quot;);\r\n},\r\n \r\n \r\nremoveDecorations : function() {\r\n \r\n \r\n \r\nthis.msg.update(null);\r\n \r\n \r\nif (this.label) {\r\nthis.label.removeClassName(&quot;error-label&quot;);\r\nthis.labelContainer.removeClassName(&quot;error-label-c&quot;);\r\n}\r\nthis.field.removeClassName(&quot;error-field&quot;);\r\nthis.fieldContainer.removeClassName(&quot;error-field-c&quot;);\r\nthis.msg.removeClassName(&quot;error-msg&quot;);\r\nthis.msgContainer.removeClassName(&quot;error-msg-c&quot;);\r\n}\r\n} );</pre></p><p>CValidators1.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.beaneditor.Validate;\r\n\r\npublic class CValidators1 {\r\n\r\n	@Property\r\n	@Validate(&quot;required&quot;)\r\n	private String firstName;\r\n\r\n	@Property\r\n	@Validate(&quot;required&quot;)\r\n	private String lastName;\r\n\r\n	@InjectPage\r\n	private CValidators2 validators2;\r\n\r\n	Object onSuccess() {\r\n		validators2.set(firstName, lastName);\r\n		return validators2;\r\n	}\r\n}</pre></p><p>CValidators1.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;style&gt;\r\n .error-msg{color:red}\r\n &lt;/style&gt;\r\n&lt;form t:type=&quot;CustomForm&quot;&gt;\r\n&lt;t:errors/&gt;\r\n姓：&lt;input t:type=&quot;textField&quot; t:id=&quot;firstName&quot; value=&quot;firstName&quot;/&gt;&lt;t:CustomError for=&quot;firstName&quot;/&gt;&lt;br/&gt;\r\n名字：&lt;input t:type=&quot;textField&quot; t:id=&quot;lastName&quot; value=&quot;lastName&quot;/&gt;&lt;t:CustomError for=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>CValidators2.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\npublic class CValidators2 {\r\n\r\n	private String firstName;\r\n\r\n	private String lastName;\r\n\r\n	public void set(String firstName, String lastName) {\r\n		this.firstName = firstName;\r\n		this.lastName = lastName;\r\n	}\r\n\r\n	public String getName() {\r\n		return firstName + &quot; &quot; + lastName;\r\n	}\r\n\r\n	String[] onPassivate() {\r\n		return new String[] { firstName, lastName };\r\n	}\r\n\r\n	void onActivate(String firstName, String lastName) {\r\n		this.firstName = firstName;\r\n		this.lastName = lastName;\r\n	}\r\n\r\n}</pre></p><p>CValidators2.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html t:type=&quot;layout&quot; title=&quot;tapestryStart Index&quot;  t:sidebarTitle=&quot;Framework Version&quot;\r\n xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n姓名：${name}&lt;br/&gt;\r\n&lt;t:pagelink page=&quot;CValidators1&quot;&gt;返回&lt;/t:pagelink&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 15：Tapestry Custom Form', '');
INSERT INTO `td_c_technology` VALUES ('37', null, '2016-05-12 09:17:46', 'admin', '0755', '', 'admin', '2016-05-17 09:02:29', '<p>本篇教程的视频详细讲解了grid组件的使用与自定义，建议去看看视频。<br /></p><p>&nbsp;</p><p>tapestry提供了2种常用的数据循环显示：loop组件与grid组件，两者没多大区别，loop组件没有提供分页，使用比较灵活,gird组件提供了分页功能，相反自己定义方面没那么灵活，但提供了字段排序的功能。此例子写的比较复杂，因为之前不知道怎么使用loop组件显示string[]数组，因此把例子写下来便于以后查看，其实很简单的首先要把string[]转变成List&lt;String&gt;再使用loop组件显示。源码如下：</p><p>DataList.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.ArrayList;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class DataList {</div><div>&nbsp;</div><div>@Property</div><div>private String nameOne;</div><div>&nbsp;</div><div>@Property</div><div>private String nameTwo;</div><div>&nbsp;</div><div>@Property</div><div>private String[] nameOnes;</div><div>&nbsp;</div><div>@Property</div><div>private String[] nameTwos;</div><div>&nbsp;</div><div>@Property</div><div>private List&lt;String&gt; oneLists;</div><div>&nbsp;</div><div>@Property</div><div>private List&lt;String&gt; twoLists;</div><div>&nbsp;</div><div>void setupRender(){</div><div>String oneString = &quot;张三/李四/王五/&quot;;</div><div>nameOnes = oneString.split(&quot;/&quot;);</div><div>oneLists = new ArrayList&lt;String&gt;();</div><div>for(String str:nameOnes){</div><div>oneLists.add(str);</div><div>}</div><div>&nbsp;</div><div>String twoString = &quot;刘备/张飞/关于/&quot;;</div><div>nameTwos = twoString.split(&quot;/&quot;);</div><div>twoLists = new ArrayList&lt;String&gt;();</div><div>for(String str2:nameTwos){</div><div>twoLists.add(str2);</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>DataList.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;name&lt;br/&gt;</div><div>&lt;t:loop source=&quot;oneLists&quot; value=&quot;nameOne&quot;&gt;</div><div>${nameOne}&lt;br/&gt;</div><div>&lt;/t:loop&gt;</div><div>&lt;t:grid source=&quot;twoLists&quot; add=&quot;name&quot; row=&quot;nameTwo&quot;&gt;</div><div>&lt;p:NameCell&gt;</div><div>${nameTwo}&lt;br/&gt;</div><div>&lt;/p:NameCell&gt;</div><div>&lt;/t:grid&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十六讲：tapestry数据循环显示loop与grid组件', '<p>DataList.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class DataList {\r\n\r\n	@Property\r\n	private String nameOne;\r\n\r\n	@Property\r\n	private String nameTwo;\r\n\r\n	@Property\r\n	private String[] nameOnes;\r\n\r\n	@Property\r\n	private String[] nameTwos;\r\n\r\n	@Property\r\n	private List&lt;String&gt; oneLists;\r\n\r\n	@Property\r\n	private List&lt;String&gt; twoLists;\r\n\r\n	void setupRender() {\r\n		String oneString = &quot;张三/李四/王五/&quot;;\r\n		nameOnes = oneString.split(&quot;/&quot;);\r\n		oneLists = new ArrayList&lt;String&gt;();\r\n		for (String str : nameOnes) {\r\n			oneLists.add(str);\r\n		}\r\n\r\n		String twoString = &quot;刘备/张飞/关于/&quot;;\r\n		nameTwos = twoString.split(&quot;/&quot;);\r\n		twoLists = new ArrayList&lt;String&gt;();\r\n		for (String str2 : nameTwos) {\r\n			twoLists.add(str2);\r\n		}\r\n	}\r\n}</pre></p><p>DataList.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n name&lt;br/&gt;\r\n&lt;t:loop source=&quot;oneLists&quot; value=&quot;nameOne&quot;&gt;\r\n${nameOne}&lt;br/&gt;\r\n&lt;/t:loop&gt;\r\n&lt;t:grid source=&quot;twoLists&quot; add=&quot;name&quot; row=&quot;nameTwo&quot;&gt;\r\n&lt;p:NameCell&gt;\r\n${nameTwo}&lt;br/&gt;\r\n&lt;/p:NameCell&gt;\r\n&lt;/t:grid&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 16：Tapestry Loop and Grid', '');
INSERT INTO `td_c_technology` VALUES ('38', null, '2016-05-12 09:18:18', 'admin', '0755', '', 'admin', '2016-05-17 09:16:16', '<p>页面之间传递值，以前已经讲过，这里不一样的是变量的类型不一样了，具体看源码吧：</p><p>Translators1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class Translators1 {</div><div>@Property</div><div>private Integer integerField;</div><div>&nbsp;</div><div>@Property</div><div>private Long longField;</div><div>&nbsp;</div><div>@Property</div><div>private Double doubleField;</div><div>&nbsp;</div><div>@Property</div><div>private String stringField;</div><div>&nbsp;</div><div>// Other pages</div><div>&nbsp;</div><div>@InjectPage</div><div>private Translators2 page2;</div><div>&nbsp;</div><div>// The code</div><div>&nbsp;</div><div>Object onSuccess() {</div><div>page2.set(integerField, longField, doubleField, stringField);</div><div>return page2;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Translators1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;&lt;form t:type=&quot;form&quot; t:id=&quot;inputs&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>&lt;table&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;Integer类型.&lt;/td&gt;</div><div>&lt;td&gt;&lt;t:label for=&quot;integerField&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;integerField&quot; t:value=&quot;integerField&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;Long类型.&lt;/td&gt;</div><div>&lt;td&gt;&lt;t:label for=&quot;longField&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;longField&quot; t:value=&quot;longField&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;Double类型.&lt;/td&gt;</div><div>&lt;td&gt;&lt;t:label for=&quot;doubleField&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;doubleField&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;String类型.&lt;/td&gt;</div><div>&lt;td&gt;&lt;t:label for=&quot;stringField&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;stringField&quot; t:value=&quot;stringField&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;传递&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>Translators2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class Translators2 {</div><div>@Property(write = false)</div><div>private Integer integerField;</div><div>&nbsp;</div><div>@Property(write = false)</div><div>private Long longField;</div><div>&nbsp;</div><div>@Property(write = false)</div><div>private Double doubleField;</div><div>&nbsp;</div><div>@Property(write = false)</div><div>private String stringField;</div><div>&nbsp;</div><div>&nbsp;</div><div>public void set(Integer integerField, Long longField, Double doubleField, String stringField) {</div><div>this.integerField = integerField;</div><div>this.longField = longField;</div><div>this.doubleField = doubleField;</div><div>this.stringField = stringField;</div><div>}</div><div>&nbsp;</div><div>Object[] onPassivate() {</div><div>return new Object[] { integerField, longField, doubleField, stringField };</div><div>}</div><div>&nbsp;</div><div>void onActivate(Integer integerField, Long longField, Double doubleField, String stringField) {</div><div>this.integerField = integerField;</div><div>this.longField = longField;</div><div>this.doubleField = doubleField;</div><div>this.stringField = stringField;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Translators2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;table&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;integer类型:&lt;/td&gt;&lt;td&gt;${integerField}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;long类型:&lt;/td&gt;&lt;td&gt;${longField}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;double类型:&lt;/td&gt;&lt;td&gt;${doubleField}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;string类型:&lt;/td&gt;&lt;td&gt;${stringField}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十七讲：tapestry 不同类型的变量在页面之间值的传递', '<p>Translators1.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class Translators1 {\r\n	@Property\r\n	private Integer integerField;\r\n\r\n	@Property\r\n	private Long longField;\r\n\r\n	@Property\r\n	private Double doubleField;\r\n\r\n	@Property\r\n	private String stringField;\r\n\r\n	// Other pages\r\n\r\n	@InjectPage\r\n	private Translators2 page2;\r\n\r\n	// The code\r\n\r\n	Object onSuccess() {\r\n		page2.set(integerField, longField, doubleField, stringField);\r\n		return page2;\r\n	}\r\n}</pre></p><p>Translators1.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;form t:type=&quot;form&quot; t:id=&quot;inputs&quot;&gt;\r\n&lt;t:errors/&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;Integer类型.&lt;/td&gt;\r\n&lt;td&gt;&lt;t:label for=&quot;integerField&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;integerField&quot; t:value=&quot;integerField&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;Long类型.&lt;/td&gt;\r\n&lt;td&gt;&lt;t:label for=&quot;longField&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;longField&quot; t:value=&quot;longField&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;Double类型.&lt;/td&gt;\r\n&lt;td&gt;&lt;t:label for=&quot;doubleField&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;doubleField&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;String类型.&lt;/td&gt;\r\n&lt;td&gt;&lt;t:label for=&quot;stringField&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;stringField&quot; t:value=&quot;stringField&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;传递&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>Translators2.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class Translators2 {\r\n	@Property(write = false)\r\n	private Integer integerField;\r\n\r\n	@Property(write = false)\r\n	private Long longField;\r\n\r\n	@Property(write = false)\r\n	private Double doubleField;\r\n\r\n	@Property(write = false)\r\n	private String stringField;\r\n\r\n	public void set(Integer integerField, Long longField, Double doubleField, String stringField) {\r\n		this.integerField = integerField;\r\n		this.longField = longField;\r\n		this.doubleField = doubleField;\r\n		this.stringField = stringField;\r\n	}\r\n\r\n	Object[] onPassivate() {\r\n		return new Object[] { integerField, longField, doubleField, stringField };\r\n	}\r\n\r\n	void onActivate(Integer integerField, Long longField, Double doubleField, String stringField) {\r\n		this.integerField = integerField;\r\n		this.longField = longField;\r\n		this.doubleField = doubleField;\r\n		this.stringField = stringField;\r\n	}\r\n}</pre></p><p>Translators2.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;integer类型:&lt;/td&gt;&lt;td&gt;${integerField}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;long类型:&lt;/td&gt;&lt;td&gt;${longField}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;double类型:&lt;/td&gt;&lt;td&gt;${doubleField}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;string类型:&lt;/td&gt;&lt;td&gt;${stringField}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 17：Tapestry Passing Data Between Pages', '');
INSERT INTO `td_c_technology` VALUES ('39', null, '2016-05-12 09:18:59', 'admin', '0755', '', 'admin', '2016-05-17 09:20:21', '<p>源码如下：</p><p>InputCore.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.ArrayList;</div><div>import java.util.Date;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.internal.services.StringValueEncoder;</div><div>&nbsp;</div><div>public class InputCore {</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private StringValueEncoder stringEncoder = new StringValueEncoder();</div><div>&nbsp;</div><div>/* Checkbox */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private boolean checkboxValue;</div><div>&nbsp;</div><div>/* Checklist */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private List&lt;String&gt; checklistSelectedValues;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private final String[] STATIONERY = { &quot;Pens&quot;, &quot;Pencils&quot;, &quot;Paper&quot; };</div><div>&nbsp;</div><div>/* DateField */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>private Date dateValue;</div><div>&nbsp;</div><div>// 返回时间格式.</div><div>public String getDateFieldFormat() {</div><div>return &quot;dd/MM/yyyy&quot;;</div><div>}</div><div>&nbsp;</div><div>/* Palette */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>private List&lt;String&gt; paletteSelectedValues;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private final String[] PETS = { &quot;Dog&quot;, &quot;Cat&quot;, &quot;Parrot&quot;, &quot;Mouse&quot; };</div><div>&nbsp;</div><div>/* Password */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String passwordValue;</div><div>&nbsp;</div><div>/* RadioGroup and Radio */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String radioSelectedValue;</div><div>&nbsp;</div><div>/* Select */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String selectedValue;</div><div>&nbsp;</div><div>/* TextArea */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String textAreaValue;</div><div>&nbsp;</div><div>/* TextField */</div><div>&nbsp;</div><div>@Property</div><div>@Persist</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String textValue;</div><div>&nbsp;</div><div>/* 页面初始化 */</div><div>&nbsp;</div><div>void setupRender() {</div><div>if (dateValue == null) {</div><div>dateValue = new Date();</div><div>}</div><div>if (paletteSelectedValues == null) {</div><div>paletteSelectedValues = new ArrayList&lt;String&gt;();</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>InputCore.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;style type=&quot;text/css&quot;&gt;</div><div>body<span style=\"white-space:pre;\"> </span>{ font-family: Arial, Helvetica, sans-serif; font-size: 13px; }</div><div>form<span style=\"white-space:pre;\"> </span>{ text-align: center; }</div><div>table<span style=\"white-space:pre;\"> </span>{ font-family: Arial, Helvetica, sans-serif; &nbsp;font-size: 13px; font-weight: normal; margin: auto; }</div><div>th<span style=\"white-space:pre;\"> </span>{ background-color: #bee; text-align: center; padding: 10px 10px; }</div><div>td<span style=\"white-space:pre;\"> </span>{ background-color: #eeb; padding: 10px 10px; }</div><div>td.name<span style=\"white-space:pre;\"> </span>{ text-align: right; vertical-align: top; }</div><div>div.t-palette { width: 460px; }</div><div>.datePicker td .topLabel { color:black; }</div><div>&lt;/style&gt;</div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;inputs&quot;&gt;</div><div>&lt;table&gt;</div><div>&lt;tr&gt;</div><div>&lt;th&gt;Component Name&lt;/th&gt;</div><div>&lt;th&gt;Use them and press Submit&lt;/th&gt;</div><div>&lt;th&gt;Submitted Value&lt;/th&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;Checkbox:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;checkbox&quot; value=&quot;checkboxValue&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;${checkboxValue}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;Checklist:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;Checklist&quot; t:model=&quot;stationery&quot; t:selected=&quot;checklistSelectedValues&quot; t:encoder=&quot;stringEncoder&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;${checklistSelectedValues}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;DateField:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;DateField&quot; value=&quot;dateValue&quot; t:format=&quot;prop:dateFieldFormat&quot;/&gt; (${dateFieldFormat})&lt;/td&gt;</div><div>&lt;td&gt;${dateValue}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;Palette:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;Palette&quot; t:model=&quot;pets&quot; t:selected=&quot;paletteSelectedValues&quot; t:encoder=&quot;stringEncoder&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;${paletteSelectedValues}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;PasswordField:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;PasswordField&quot; value=&quot;passwordValue&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;${passwordValue}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;RadioGroup,&lt;br/&gt; Radio,&lt;br/&gt; and Label:&lt;/td&gt;</div><div>&lt;td&gt;</div><div>&lt;t:RadioGroup value=&quot;radioSelectedValue&quot; encoder=&quot;stringEncoder&quot;&gt;</div><div>&lt;t:Radio t:id=&quot;radioH&quot; value=&quot;literal:H&quot; label=&quot;High&quot;/&gt;&lt;t:label for=&quot;radioH&quot;/&gt;&lt;br/&gt;</div><div>&lt;t:Radio t:id=&quot;radioM&quot; value=&quot;literal:M&quot; label=&quot;Medium&quot;/&gt;&lt;t:label for=&quot;radioM&quot;/&gt;&lt;br/&gt;</div><div>&lt;t:Radio t:id=&quot;radioL&quot; value=&quot;literal:L&quot; label=&quot;Low&quot;/&gt;&lt;t:label for=&quot;radioL&quot;/&gt;</div><div>&lt;/t:RadioGroup&gt;</div><div>&lt;/td&gt;</div><div>&lt;td&gt;${radioSelectedValue}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;Select:&lt;/td&gt;</div><div>&lt;td&gt;&lt;select t:type=&quot;Select&quot; t:model=&quot;literal:Ms,Mrs,Mr,Dr,Prof&quot; t:value=&quot;selectedValue&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;${selectedValue}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;TextArea:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextArea&quot; value=&quot;textAreaValue&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;t:textoutput value=&quot;textAreaValue&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td class=&quot;name&quot;&gt;TextField:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; value=&quot;textValue&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;${textValue}&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;/table&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;</div><div>&nbsp;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第十八讲：tapestry表单核心组件', '<p>InputCore.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.annotations.Persist;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.internal.services.StringValueEncoder;\r\n\r\npublic class InputCore {\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private StringValueEncoder stringEncoder = new StringValueEncoder();\r\n\r\n	/* Checkbox */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private boolean checkboxValue;\r\n\r\n	/* Checklist */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private List&lt;String&gt; checklistSelectedValues;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private final String[] STATIONERY = { &quot;Pens&quot;, &quot;Pencils&quot;, &quot;Paper&quot; };\r\n\r\n	/* DateField */\r\n\r\n	@Property\r\n	@Persist\r\n	private Date dateValue;\r\n\r\n	// 返回时间格式.\r\n	public String getDateFieldFormat() {\r\n		return &quot;dd/MM/yyyy&quot;;\r\n	}\r\n\r\n	/* Palette */\r\n\r\n	@Property\r\n	@Persist\r\n	private List&lt;String&gt; paletteSelectedValues;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private final String[] PETS = { &quot;Dog&quot;, &quot;Cat&quot;, &quot;Parrot&quot;, &quot;Mouse&quot; };\r\n\r\n	/* Password */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String passwordValue;\r\n\r\n	/* RadioGroup and Radio */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String radioSelectedValue;\r\n\r\n	/* Select */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String selectedValue;\r\n\r\n	/* TextArea */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String textAreaValue;\r\n\r\n	/* TextField */\r\n\r\n	@Property\r\n	@Persist\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String textValue;\r\n\r\n	/* 页面初始化 */\r\n\r\n	void setupRender() {\r\n		if (dateValue == null) {\r\n			dateValue = new Date();\r\n		}\r\n		if (paletteSelectedValues == null) {\r\n			paletteSelectedValues = new ArrayList&lt;String&gt;();\r\n		}\r\n	}\r\n}</pre></p><p>InputCore.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\nbody { font-family: Arial, Helvetica, sans-serif; font-size: 13px; }\r\nform { text-align: center; }\r\ntable { font-family: Arial, Helvetica, sans-serif;  font-size: 13px; font-weight: normal; margin: auto; }\r\nth { background-color: #bee; text-align: center; padding: 10px 10px; }\r\ntd { background-color: #eeb; padding: 10px 10px; }\r\ntd.name { text-align: right; vertical-align: top; }\r\ndiv.t-palette { width: 460px; }\r\n.datePicker td .topLabel { color:black; }\r\n&lt;/style&gt;\r\n&lt;form t:type=&quot;form&quot; t:id=&quot;inputs&quot;&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;th&gt;Component Name&lt;/th&gt;\r\n&lt;th&gt;Use them and press Submit&lt;/th&gt;\r\n&lt;th&gt;Submitted Value&lt;/th&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;Checkbox:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;checkbox&quot; value=&quot;checkboxValue&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;${checkboxValue}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;Checklist:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;Checklist&quot; t:model=&quot;stationery&quot; t:selected=&quot;checklistSelectedValues&quot; t:encoder=&quot;stringEncoder&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;${checklistSelectedValues}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;DateField:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;DateField&quot; value=&quot;dateValue&quot; t:format=&quot;prop:dateFieldFormat&quot;/&gt; (${dateFieldFormat})&lt;/td&gt;\r\n&lt;td&gt;${dateValue}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;Palette:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;Palette&quot; t:model=&quot;pets&quot; t:selected=&quot;paletteSelectedValues&quot; t:encoder=&quot;stringEncoder&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;${paletteSelectedValues}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;PasswordField:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;PasswordField&quot; value=&quot;passwordValue&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;${passwordValue}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;RadioGroup,&lt;br/&gt; Radio,&lt;br/&gt; and Label:&lt;/td&gt;\r\n&lt;td&gt;\r\n&lt;t:RadioGroup value=&quot;radioSelectedValue&quot; encoder=&quot;stringEncoder&quot;&gt;\r\n&lt;t:Radio t:id=&quot;radioH&quot; value=&quot;literal:H&quot; label=&quot;High&quot;/&gt;&lt;t:label for=&quot;radioH&quot;/&gt;&lt;br/&gt;\r\n&lt;t:Radio t:id=&quot;radioM&quot; value=&quot;literal:M&quot; label=&quot;Medium&quot;/&gt;&lt;t:label for=&quot;radioM&quot;/&gt;&lt;br/&gt;\r\n&lt;t:Radio t:id=&quot;radioL&quot; value=&quot;literal:L&quot; label=&quot;Low&quot;/&gt;&lt;t:label for=&quot;radioL&quot;/&gt;\r\n&lt;/t:RadioGroup&gt;\r\n&lt;/td&gt;\r\n&lt;td&gt;${radioSelectedValue}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;Select:&lt;/td&gt;\r\n&lt;td&gt;&lt;select t:type=&quot;Select&quot; t:model=&quot;literal:Ms,Mrs,Mr,Dr,Prof&quot; t:value=&quot;selectedValue&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;${selectedValue}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;TextArea:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextArea&quot; value=&quot;textAreaValue&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;t:textoutput value=&quot;textAreaValue&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td class=&quot;name&quot;&gt;TextField:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; value=&quot;textValue&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;${textValue}&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;&lt;br/&gt;\r\n \r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\n \r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 18：Tapestry Core Input Components', '');
INSERT INTO `td_c_technology` VALUES ('40', null, '2016-05-12 09:19:28', 'admin', '0755', '', 'admin', '2016-05-17 09:27:25', '<p>多个提交按钮。源码如下：</p><p>MultipleSubmits1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>import com.tapestry.app.pages.MultipleSubmits2.SearchType;</div><div>&nbsp;</div><div>public class MultipleSubmits1 {</div><div>@Property</div><div>private String name;</div><div>&nbsp;</div><div>@InjectPage</div><div>private MultipleSubmits2 page2;</div><div>&nbsp;</div><div>private SearchType searchType;</div><div>&nbsp;</div><div>&nbsp;</div><div>void onActivate() {</div><div>searchType = SearchType.CUSTOMERS;</div><div>}</div><div>&nbsp;</div><div>void onSelectedFromSuppliers() {</div><div>searchType = SearchType.SUPPLIERS;</div><div>}</div><div>&nbsp;</div><div>Object onSuccess() {</div><div>page2.set(searchType, name);</div><div>return page2;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>MultipleSubmits1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;search&quot; style=&quot;border: medium solid gray&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>&lt;table&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;名字:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;name&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;&lt;/td&gt;</div><div>&lt;td&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Search Customers&quot;/&gt;</div><div>&lt;input t:type=&quot;Submit&quot; t:id=&quot;suppliers&quot; value=&quot;Search Suppliers&quot;/&gt;</div><div>&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>MultipleSubmits2</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>public class MultipleSubmits2 {</div><div>private SearchType searchType;</div><div>&nbsp;</div><div>private String name;</div><div>&nbsp;</div><div>public enum SearchType {</div><div>CUSTOMERS, SUPPLIERS;</div><div>}</div><div>&nbsp;</div><div>public void set(SearchType searchType, String lastName) {</div><div>this.searchType = searchType;</div><div>this.name = lastName;</div><div>}</div><div>&nbsp;</div><div>Object[] onPassivate() {</div><div>return new Object[] { searchType, name };</div><div>}</div><div>&nbsp;</div><div>void onActivate(SearchType searchType, String name) {</div><div>this.searchType = searchType;</div><div>this.name = name;</div><div>}</div><div>&nbsp;</div><div>public String getYourSearch() {</div><div>if (searchType == SearchType.CUSTOMERS) {</div><div>return &quot;你选择 Customers 名字 \\&quot;&quot; + name + &quot;\\&quot;.&quot;;</div><div>}</div><div>else {</div><div>return &quot;你选择 Suppliers 名字 \\&quot;&quot; + name + &quot;\\&quot;.&quot;;</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>MultipleSubmits2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>${yourSearch}</div><div>&lt;/html&gt;</div></div>', null, '17', '第十九讲：tapestry多个提交按钮(submit)', '<p>MultipleSubmits1.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\nimport com.tapestry.app.pages.MultipleSubmits2.SearchType;\r\n\r\npublic class MultipleSubmits1 {\r\n	@Property\r\n	private String name;\r\n\r\n	@InjectPage\r\n	private MultipleSubmits2 page2;\r\n\r\n	private SearchType searchType;\r\n\r\n	void onActivate() {\r\n		searchType = SearchType.CUSTOMERS;\r\n	}\r\n\r\n	void onSelectedFromSuppliers() {\r\n		searchType = SearchType.SUPPLIERS;\r\n	}\r\n\r\n	Object onSuccess() {\r\n		page2.set(searchType, name);\r\n		return page2;\r\n	}\r\n}</pre></p><p>MultipleSubmits1.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n \r\n&lt;form t:type=&quot;form&quot; t:id=&quot;search&quot; style=&quot;border: medium solid gray&quot;&gt;\r\n&lt;t:errors/&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;名字:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;name&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Search Customers&quot;/&gt;\r\n&lt;input t:type=&quot;Submit&quot; t:id=&quot;suppliers&quot; value=&quot;Search Suppliers&quot;/&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n  &lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>MultipleSubmits2</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\npublic class MultipleSubmits2 {\r\n	private SearchType searchType;\r\n\r\n	private String name;\r\n\r\n	public enum SearchType {\r\n		CUSTOMERS, SUPPLIERS;\r\n	}\r\n\r\n	public void set(SearchType searchType, String lastName) {\r\n		this.searchType = searchType;\r\n		this.name = lastName;\r\n	}\r\n\r\n	Object[] onPassivate() {\r\n		return new Object[] { searchType, name };\r\n	}\r\n\r\n	void onActivate(SearchType searchType, String name) {\r\n		this.searchType = searchType;\r\n		this.name = name;\r\n	}\r\n\r\n	public String getYourSearch() {\r\n		if (searchType == SearchType.CUSTOMERS) {\r\n			return &quot;你选择 Customers 名字 \\&quot;&quot; + name + &quot;\\&quot;.&quot;;\r\n		} else {\r\n			return &quot;你选择 Suppliers 名字 \\&quot;&quot; + name + &quot;\\&quot;.&quot;;\r\n		}\r\n	}\r\n}</pre></p><p>MultipleSubmits2.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n${yourSearch}\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 19：Tapestry Multiple Submits', '');
INSERT INTO `td_c_technology` VALUES ('41', null, '2016-05-12 09:20:03', 'admin', '0755', '', 'admin', '2016-05-17 09:32:12', '<p>源码如下：</p><p>MultipleForms1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>import com.tapestry.app.pages.MultipleForms2.SearchType;</div><div>&nbsp;</div><div>public class MultipleForms1 {</div><div>@Property</div><div>private String customerName;</div><div>&nbsp;</div><div>@Property</div><div>private String supplierName;</div><div>&nbsp;</div><div>@InjectPage</div><div>private MultipleForms2 page2;</div><div>&nbsp;</div><div>void onPrepareFromSearchCustomers() {</div><div>//可初始化Customers表单元素</div><div>}</div><div>&nbsp;</div><div>void onPrepareFromSearchSuppliers() {</div><div>//可初始化Suppliers表单元素</div><div>}</div><div>&nbsp;</div><div>Object onSuccessFromSearchCustomers() {</div><div>page2.set(SearchType.CUSTOMERS, customerName);</div><div>return page2;</div><div>}</div><div>&nbsp;</div><div>Object onSuccessFromSearchSuppliers() {</div><div>page2.set(SearchType.SUPPLIERS, supplierName);</div><div>return page2;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>MultipleForms1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;searchcustomers&quot; style=&quot;border: medium solid gray&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>Customer Name:&nbsp;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;customerName&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;/&gt;&nbsp;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Search Customers&quot;/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/form&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;searchsuppliers&quot; style=&quot;border: medium solid gray&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>Supplier Name:&nbsp;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;supplierName&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;/&gt;&nbsp;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Search Suppliers&quot;/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/form&gt;&lt;br/&gt;</div><div>&lt;/html&gt;</div></div><p>MultipleForms2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>public class MultipleForms2 {</div><div>private SearchType searchType;</div><div>&nbsp;</div><div>private String name;</div><div>&nbsp;</div><div>public enum SearchType {</div><div>CUSTOMERS, SUPPLIERS;</div><div>}</div><div>&nbsp;</div><div>public void set(SearchType searchType, String lastName) {</div><div>this.searchType = searchType;</div><div>this.name = lastName;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>Object[] onPassivate() {</div><div>return new Object[] { searchType, name };</div><div>}</div><div>&nbsp;</div><div>void onActivate(SearchType searchType, String lastName) {</div><div>this.searchType = searchType;</div><div>this.name = lastName;</div><div>}</div><div>&nbsp;</div><div>public String getYourSearch() {</div><div>if (searchType == SearchType.CUSTOMERS) {</div><div>return &quot;你选择 &nbsp;Customers 名字为: \\&quot;&quot; + name + &quot;\\&quot;.&quot;;</div><div>}</div><div>else {</div><div>return &quot;你选择 &nbsp;Suppliers 名字为: \\&quot;&quot; + name + &quot;\\&quot;.&quot;;</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>MultipleForms2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>${yourSearch}&lt;br/&gt;&lt;br/&gt;</div><div>&lt;a t:type=&quot;pagelink&quot; t:page=&quot;MultipleForms1&quot; href=&quot;#&quot;&gt;返回&lt;/a&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第二十讲：tapestry多表单(forms)', '<p>MultipleForms1.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\nimport com.tapestry.app.pages.MultipleForms2.SearchType;\r\n\r\npublic class MultipleForms1 {\r\n	@Property\r\n	private String customerName;\r\n\r\n	@Property\r\n	private String supplierName;\r\n\r\n	@InjectPage\r\n	private MultipleForms2 page2;\r\n\r\n	void onPrepareFromSearchCustomers() {\r\n		// 可初始化Customers表单元素\r\n	}\r\n\r\n	void onPrepareFromSearchSuppliers() {\r\n		// 可初始化Suppliers表单元素\r\n	}\r\n\r\n	Object onSuccessFromSearchCustomers() {\r\n		page2.set(SearchType.CUSTOMERS, customerName);\r\n		return page2;\r\n	}\r\n\r\n	Object onSuccessFromSearchSuppliers() {\r\n		page2.set(SearchType.SUPPLIERS, supplierName);\r\n		return page2;\r\n	}\r\n}</pre><p></p><p>MultipleForms1.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n \r\n&lt;form t:type=&quot;form&quot; t:id=&quot;searchcustomers&quot; style=&quot;border: medium solid gray&quot;&gt;\r\n&lt;t:errors/&gt;\r\nCustomer Name: \r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;customerName&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;/&gt; \r\n&lt;input type=&quot;submit&quot; value=&quot;Search Customers&quot;/&gt;\r\n  &lt;/form&gt;&lt;br/&gt;\r\n \r\n&lt;form t:type=&quot;form&quot; t:id=&quot;searchsuppliers&quot; style=&quot;border: medium solid gray&quot;&gt;\r\n&lt;t:errors/&gt;\r\nSupplier Name: \r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;supplierName&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;/&gt; \r\n&lt;input type=&quot;submit&quot; value=&quot;Search Suppliers&quot;/&gt;\r\n  &lt;/form&gt;&lt;br/&gt;\r\n&lt;/html&gt;</pre><p></p><p>MultipleForms2.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\npublic class MultipleForms2 {\r\n	private SearchType searchType;\r\n\r\n	private String name;\r\n\r\n	public enum SearchType {\r\n		CUSTOMERS, SUPPLIERS;\r\n	}\r\n\r\n	public void set(SearchType searchType, String lastName) {\r\n		this.searchType = searchType;\r\n		this.name = lastName;\r\n	}\r\n\r\n	Object[] onPassivate() {\r\n		return new Object[] { searchType, name };\r\n	}\r\n\r\n	void onActivate(SearchType searchType, String lastName) {\r\n		this.searchType = searchType;\r\n		this.name = lastName;\r\n	}\r\n\r\n	public String getYourSearch() {\r\n		if (searchType == SearchType.CUSTOMERS) {\r\n			return &quot;你选择  Customers 名字为: \\&quot;&quot; + name + &quot;\\&quot;.&quot;;\r\n		} else {\r\n			return &quot;你选择  Suppliers 名字为: \\&quot;&quot; + name + &quot;\\&quot;.&quot;;\r\n		}\r\n	}\r\n}</pre><p></p><div><div>MultipleForms2.tml</div><div><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n${yourSearch}&lt;br/&gt;&lt;br/&gt;\r\n&lt;a t:type=&quot;pagelink&quot; t:page=&quot;MultipleForms1&quot; href=&quot;#&quot;&gt;返回&lt;/a&gt;\r\n&lt;/html&gt;</pre><br /></div></div>', 'Lesson 20：Tapestry Multiple Forms', '');
INSERT INTO `td_c_technology` VALUES ('42', null, '2016-05-12 09:20:39', 'admin', '0755', '', 'admin', '2016-05-17 09:35:58', '<p>tapestry的LinkSubmit其实就等同于一个submit按钮，它的存在可使前端开发很容易的修改&lt;a&gt;样式，非常容易做出好的按钮样式。源码如下：</p><p>LinkSubmits1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.corelib.components.Form;</div><div>import org.apache.tapestry5.corelib.components.TextField;</div><div>&nbsp;</div><div>public class LinkSubmits1 {</div><div>@Persist</div><div>@Property</div><div>private String firstName;</div><div>&nbsp;</div><div>@Persist</div><div>@Property</div><div>private String lastName;</div><div>&nbsp;</div><div>@Persist</div><div>@Property</div><div>private String selectName;</div><div>&nbsp;</div><div>@Component(id = &quot;names&quot;)</div><div>private Form form;</div><div>&nbsp;</div><div>@Component(id = &quot;firstName&quot;)</div><div>private TextField firstNameField;</div><div>&nbsp;</div><div>@Component(id = &quot;lastName&quot;)</div><div>private TextField lastNameField;</div><div>&nbsp;</div><div>void onValidateFromNames() {</div><div>if (firstName == null || firstName.trim().equals(&quot;&quot;)) {</div><div>form.recordError(firstNameField, &quot;First Name is required.&quot;);</div><div>}</div><div>if (lastName == null || lastName.trim().equals(&quot;&quot;)) {</div><div>form.recordError(lastNameField, &quot;Last Name is required.&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div><div>Object onSuccess() {</div><div>selectName = firstName + lastName;</div><div>return this;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>LinkSubmits1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>${selectName}</div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;names&quot; style=&quot;border: medium solid gray&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>&lt;table&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;姓:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:validate=&quot;required&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;名:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:validate=&quot;required&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;t:linksubmit t:id=&quot;newlinksubmit&quot;&gt;提交显示姓名&lt;/t:linksubmit&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第二十一讲：tapestry的LinkSubmit等同于submit来使用', '<p>LinkSubmits1.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.Persist;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.Form;\r\nimport org.apache.tapestry5.corelib.components.TextField;\r\n\r\npublic class LinkSubmits1 {\r\n	@Persist\r\n	@Property\r\n	private String firstName;\r\n\r\n	@Persist\r\n	@Property\r\n	private String lastName;\r\n\r\n	@Persist\r\n	@Property\r\n	private String selectName;\r\n\r\n	@Component(id = &quot;names&quot;)\r\n	private Form form;\r\n\r\n	@Component(id = &quot;firstName&quot;)\r\n	private TextField firstNameField;\r\n\r\n	@Component(id = &quot;lastName&quot;)\r\n	private TextField lastNameField;\r\n\r\n	void onValidateFromNames() {\r\n		if (firstName == null || firstName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(firstNameField, &quot;First Name is required.&quot;);\r\n		}\r\n		if (lastName == null || lastName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(lastNameField, &quot;Last Name is required.&quot;);\r\n		}\r\n	}\r\n\r\n	Object onSuccess() {\r\n		selectName = firstName + lastName;\r\n		return this;\r\n	}\r\n}</pre><p></p><p>LinkSubmits1.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n${selectName}\r\n&lt;form t:type=&quot;form&quot; t:id=&quot;names&quot; style=&quot;border: medium solid gray&quot;&gt;\r\n&lt;t:errors/&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;姓:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:validate=&quot;required&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;名:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:validate=&quot;required&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;t:linksubmit t:id=&quot;newlinksubmit&quot;&gt;提交显示姓名&lt;/t:linksubmit&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n  &lt;/form&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', 'Lesson 21：Tapestry Linksubmit', '');
INSERT INTO `td_c_technology` VALUES ('43', null, '2016-05-12 09:21:02', 'admin', '0755', '', 'admin', '2016-05-17 09:39:07', '<p>Select组件，具体效果直接运行实例吧，源码如下：</p><p>VariedSelect.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class VariedSelect {</div><div>@Property</div><div>private String color0;</div><div>&nbsp;</div><div>@Property</div><div>private String color1;</div><div>&nbsp;</div><div>@Property</div><div>private String color2;</div><div>&nbsp;</div><div>@Property</div><div>private String color3;</div><div>&nbsp;</div><div>String[] onPassivate() {</div><div>return new String[] { color0, color1, color2, color3 };</div><div>}</div><div>&nbsp;</div><div>void onActivate(String color0, String color1, String color2, String color3) {</div><div>this.color0 = color0;</div><div>this.color1 = color1;</div><div>this.color2 = color2;</div><div>this.color3 = color3;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>VariedSelect.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot;&gt;</div><div>This example demonstrates labelling the blank option.&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:label for=&quot;color0&quot;/&gt;:</div><div>&lt;select t:type=&quot;select&quot; t:id=&quot;color0&quot; t:model=&quot;literal:Red,Yellow,Blue&quot; t:blankLabel=&quot;Choose...&quot;&gt;&lt;/select&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;</div><div>You chose: ${color0}</div><div>&lt;/form&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot;&gt;</div><div>This example demonstrates labelling the blank option using the page\'s properties file.&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:label for=&quot;color1&quot;/&gt;:</div><div>&lt;select t:type=&quot;select&quot; t:id=&quot;color1&quot; t:model=&quot;literal:Red,Yellow,Blue&quot;&gt;&lt;/select&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;</div><div>You chose: ${color1}</div><div>&lt;/form&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot;&gt;</div><div>This example demonstrates making it mandatory to make a choice.&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:label for=&quot;color2&quot;/&gt;:</div><div>&lt;select t:type=&quot;select&quot; t:id=&quot;color2&quot; t:model=&quot;literal:Red,Yellow,Blue&quot; t:validate=&quot;required&quot;&gt;&lt;/select&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;</div><div>You chose: ${color2}</div><div>&lt;/form&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot;&gt;</div><div>This example demonstrates making it mandatory to make a choice - but it also has a blank option.&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:label for=&quot;color3&quot;/&gt;:</div><div>&lt;select t:type=&quot;select&quot; t:id=&quot;color3&quot; t:model=&quot;literal:Red,Yellow,Blue&quot; t:validate=&quot;required&quot; t:blankOption=&quot;ALWAYS&quot;&gt;&lt;/select&gt;</div><div>&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;</div><div>You chose: ${color3}</div><div>&lt;/form&gt;&lt;br/&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第二十二讲：tapestry的Select组件', '<p>VariedSelect.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class VariedSelect {\r\n	@Property\r\n	private String color0;\r\n\r\n	@Property\r\n	private String color1;\r\n\r\n	@Property\r\n	private String color2;\r\n\r\n	@Property\r\n	private String color3;\r\n\r\n	String[] onPassivate() {\r\n		return new String[] { color0, color1, color2, color3 };\r\n	}\r\n\r\n	void onActivate(String color0, String color1, String color2, String color3) {\r\n		this.color0 = color0;\r\n		this.color1 = color1;\r\n		this.color2 = color2;\r\n		this.color3 = color3;\r\n	}\r\n}</pre></p><p>VariedSelect.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot;&gt;\r\nThis example demonstrates labelling the blank option.&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:label for=&quot;color0&quot;/&gt;:\r\n&lt;select t:type=&quot;select&quot; t:id=&quot;color0&quot; t:model=&quot;literal:Red,Yellow,Blue&quot; t:blankLabel=&quot;Choose...&quot;&gt;&lt;/select&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\nYou chose: ${color0}\r\n&lt;/form&gt;&lt;br/&gt;\r\n \r\n&lt;form t:type=&quot;form&quot;&gt;\r\nThis example demonstrates labelling the blank option using the page\'s properties file.&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:label for=&quot;color1&quot;/&gt;:\r\n&lt;select t:type=&quot;select&quot; t:id=&quot;color1&quot; t:model=&quot;literal:Red,Yellow,Blue&quot;&gt;&lt;/select&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\nYou chose: ${color1}\r\n&lt;/form&gt;&lt;br/&gt;\r\n \r\n&lt;form t:type=&quot;form&quot;&gt;\r\nThis example demonstrates making it mandatory to make a choice.&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:label for=&quot;color2&quot;/&gt;:\r\n&lt;select t:type=&quot;select&quot; t:id=&quot;color2&quot; t:model=&quot;literal:Red,Yellow,Blue&quot; t:validate=&quot;required&quot;&gt;&lt;/select&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\nYou chose: ${color2}\r\n&lt;/form&gt;&lt;br/&gt;\r\n \r\n&lt;form t:type=&quot;form&quot;&gt;\r\nThis example demonstrates making it mandatory to make a choice - but it also has a blank option.&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:label for=&quot;color3&quot;/&gt;:\r\n&lt;select t:type=&quot;select&quot; t:id=&quot;color3&quot; t:model=&quot;literal:Red,Yellow,Blue&quot; t:validate=&quot;required&quot; t:blankOption=&quot;ALWAYS&quot;&gt;&lt;/select&gt;\r\n&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\nYou chose: ${color3}\r\n&lt;/form&gt;&lt;br/&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 22：Tapestry Select', '');
INSERT INTO `td_c_technology` VALUES ('44', null, '2016-05-12 09:21:35', 'admin', '0755', '', 'admin', '2016-05-17 09:42:09', '<p>源码如下：</p><p>DelegateAndBlocks.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>public class DelegateAndBlocks {</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>DelegateAndBlocks.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:delegate to=&quot;block:blockA&quot;/&gt;</div><div>&lt;t:delegate to=&quot;block:blockB&quot;/&gt;</div><div>&lt;t:delegate to=&quot;block:blockC&quot;/&gt;</div><div>&lt;t:delegate to=&quot;block:blockB&quot;/&gt;</div><div>&lt;t:delegate to=&quot;block:blockA&quot;/&gt; &lt;br/&gt;</div><div>&lt;t:block id=&quot;blockA&quot;&gt;</div><div>&lt;div style=&quot;margin: 2px; padding: 10px; background-color: #f8f8f8;&quot;&gt;</div><div>This is block A.</div><div>&lt;/div&gt;</div><div>&lt;/t:block&gt;</div><div>&lt;t:block id=&quot;blockB&quot;&gt;</div><div>&lt;div style=&quot;margin: 2px; padding: 10px; background-color: #f0f0f0;&quot;&gt;</div><div>This is block B.</div><div>&lt;/div&gt;</div><div>&lt;/t:block&gt;</div><div>&lt;t:block id=&quot;blockC&quot;&gt;</div><div>&lt;div style=&quot;margin: 2px; padding: 10px; background-color: #e8e8e8;&quot;&gt;</div><div>This is block C.</div><div>&lt;/div&gt;</div><div>&lt;/t:block&gt;</div><div>&nbsp;&lt;/html&gt;</div></div>', null, '17', '第二十三讲：tapestry的Delegate和Blocks组件', '<p>DelegateAndBlocks.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\npublic class DelegateAndBlocks {\r\n\r\n}</pre><p></p><p>DelegateAndBlocks.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:delegate to=&quot;block:blockA&quot;/&gt;\r\n&lt;t:delegate to=&quot;block:blockB&quot;/&gt;\r\n&lt;t:delegate to=&quot;block:blockC&quot;/&gt;\r\n&lt;t:delegate to=&quot;block:blockB&quot;/&gt;\r\n&lt;t:delegate to=&quot;block:blockA&quot;/&gt; &lt;br/&gt;\r\n&lt;t:block id=&quot;blockA&quot;&gt;\r\n&lt;div style=&quot;margin: 2px; padding: 10px; background-color: #f8f8f8;&quot;&gt;\r\nThis is block A.\r\n&lt;/div&gt;\r\n&lt;/t:block&gt;\r\n&lt;t:block id=&quot;blockB&quot;&gt;\r\n&lt;div style=&quot;margin: 2px; padding: 10px; background-color: #f0f0f0;&quot;&gt;\r\nThis is block B.\r\n&lt;/div&gt;\r\n&lt;/t:block&gt;\r\n&lt;t:block id=&quot;blockC&quot;&gt;\r\n&lt;div style=&quot;margin: 2px; padding: 10px; background-color: #e8e8e8;&quot;&gt;\r\nThis is block C.\r\n&lt;/div&gt;\r\n&lt;/t:block&gt;\r\n &lt;/html&gt;</pre><br /><p></p>', 'Lesson 23：Tapestry Delegate and Blocks', '');
INSERT INTO `td_c_technology` VALUES ('45', null, '2016-05-12 09:22:00', 'admin', '0755', '', 'admin', '2016-05-17 10:01:39', '<p>源码如下：</p><p>Person.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.entities;</div><div>&nbsp;</div><div>import java.io.Serializable;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import javax.persistence.Column;</div><div>import javax.persistence.Entity;</div><div>import javax.persistence.GeneratedValue;</div><div>import javax.persistence.GenerationType;</div><div>import javax.persistence.Id;</div><div>import javax.persistence.Temporal;</div><div>import javax.persistence.TemporalType;</div><div>import javax.persistence.Version;</div><div>&nbsp;</div><div>&nbsp;</div><div>@Entity</div><div>@SuppressWarnings(&quot;serial&quot;)</div><div>public class Person implements Serializable{</div><div>&nbsp;</div><div>@Id</div><div>@GeneratedValue(strategy = GenerationType.AUTO)</div><div>@Column(nullable = false)</div><div>private Long id;</div><div>&nbsp;</div><div>@Version</div><div>@Column(nullable = false)</div><div>private Integer version;</div><div>&nbsp;</div><div>@Column(length = 10, nullable = false)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Column(length = 20, nullable = false)</div><div>private String lastName;</div><div>&nbsp;</div><div>@Column(length = 30, nullable = false)</div><div>private String region;</div><div>&nbsp;</div><div>@Temporal(TemporalType.DATE)</div><div>private Date startDate;</div><div>&nbsp;</div><div>public Long getId() {</div><div>return id;</div><div>}</div><div>&nbsp;</div><div>public Integer getVersion() {</div><div>return version;</div><div>}</div><div>&nbsp;</div><div>public void setVersion(Integer version) {</div><div>this.version = version;</div><div>}</div><div>&nbsp;</div><div>public String getFirstName() {</div><div>return firstName;</div><div>}</div><div>&nbsp;</div><div>public void setFirstName(String firstName) {</div><div>this.firstName = firstName;</div><div>}</div><div>&nbsp;</div><div>public String getLastName() {</div><div>return lastName;</div><div>}</div><div>&nbsp;</div><div>public void setLastName(String lastName) {</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>public String getRegion() {</div><div>return region;</div><div>}</div><div>&nbsp;</div><div>public void setRegion(String region) {</div><div>this.region = region;</div><div>}</div><div>&nbsp;</div><div>public Date getStartDate() {</div><div>return startDate;</div><div>}</div><div>&nbsp;</div><div>public void setStartDate(Date startDate) {</div><div>this.startDate = startDate;</div><div>}</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第二十三讲：tapestry的实体(entity)范本', '<p>Person.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.entities;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.Date;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Temporal;\r\nimport javax.persistence.TemporalType;\r\nimport javax.persistence.Version;\r\n\r\n@Entity\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class Person implements Serializable {\r\n\r\n	@Id\r\n	@GeneratedValue(strategy = GenerationType.AUTO)\r\n	@Column(nullable = false)\r\n	private Long id;\r\n\r\n	@Version\r\n	@Column(nullable = false)\r\n	private Integer version;\r\n\r\n	@Column(length = 10, nullable = false)\r\n	private String firstName;\r\n\r\n	@Column(length = 20, nullable = false)\r\n	private String lastName;\r\n\r\n	@Column(length = 30, nullable = false)\r\n	private String region;\r\n\r\n	@Temporal(TemporalType.DATE)\r\n	private Date startDate;\r\n\r\n	public Long getId() {\r\n		return id;\r\n	}\r\n\r\n	public Integer getVersion() {\r\n		return version;\r\n	}\r\n\r\n	public void setVersion(Integer version) {\r\n		this.version = version;\r\n	}\r\n\r\n	public String getFirstName() {\r\n		return firstName;\r\n	}\r\n\r\n	public void setFirstName(String firstName) {\r\n		this.firstName = firstName;\r\n	}\r\n\r\n	public String getLastName() {\r\n		return lastName;\r\n	}\r\n\r\n	public void setLastName(String lastName) {\r\n		this.lastName = lastName;\r\n	}\r\n\r\n	public String getRegion() {\r\n		return region;\r\n	}\r\n\r\n	public void setRegion(String region) {\r\n		this.region = region;\r\n	}\r\n\r\n	public Date getStartDate() {\r\n		return startDate;\r\n	}\r\n\r\n	public void setStartDate(Date startDate) {\r\n		this.startDate = startDate;\r\n	}\r\n}</pre><br /><p></p>', 'Lesson 23：Tapestry Entity', '');
INSERT INTO `td_c_technology` VALUES ('46', null, '2016-05-12 09:24:03', 'admin', '0755', '', 'admin', '2016-05-17 10:07:59', '<p>tapestry的grid组件，具体实现方法看源码吧，之前的教程也有讲到，这次配合数据库操作使用，实体Person.java在第二十三讲中已经贴出来了，这里就不贴了，其他源码如下：</p><p>PersonCreate.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.Person;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class PersonCreate {</div><div>&nbsp;</div><div>@Property</div><div>private Person person;</div><div>&nbsp;</div><div>//导入服务接口</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//初始化user实体</div><div>void onPrepare(){</div><div>person = new Person();</div><div>}</div><div>&nbsp;</div><div>//提交表单的时候执行存储,返回当前页面</div><div>Object onSuccess(){</div><div>//如果时间为空值输入系统当前时间</div><div>if(person.getStartDate() == null){</div><div>person.setStartDate(new Date());</div><div>}</div><div>dao.create(person);</div><div>return PersonList.class;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>PersonCreate.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;&lt;t:form t:id=&quot;personForm&quot;&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:errors/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;版本(version)：&lt;t:textfield t:id=&quot;version&quot; value=&quot;person.version&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;姓(firstName)：&lt;t:textfield t:id=&quot;firstName&quot; value=&quot;person.firstName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;名(lastName)：&lt;t:textfield t:id=&quot;lastName&quot; value=&quot;person.lastName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;地区(region)：&lt;t:select t:id=&quot;region&quot; value=&quot;person.region&quot; t:model=&quot;literal:深圳,北京&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;创建&quot;/&gt;&lt;!-- &lt;t:pagelink page=&quot;crud/UserList&quot;&gt;返回查看页面&lt;/t:pagelink&gt; --&gt;&lt;/p&gt;</div><div>&nbsp;&lt;/t:form&gt;</div><div>&nbsp;&lt;/html&gt;</div></div><p>PersonList.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.Person;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class PersonList {</div><div>&nbsp;</div><div>//打开user读写</div><div>@Property</div><div>private Person person;</div><div>&nbsp;</div><div>//打开user阵列的读写</div><div>@Property</div><div>private List&lt;Person&gt; persons;</div><div>&nbsp;</div><div>//导入操作数据库的服务</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//当前页面接收user的id值</div><div>@PageActivationContext</div><div>private Long id;</div><div>&nbsp;</div><div>//页面加载时设置渲染</div><div>void setupRender(){</div><div>//查询User数据表</div><div>StringBuffer sql = new StringBuffer();</div><div>sql.append(&quot;from Person&quot;);</div><div>persons = dao.findWithQuery(sql.toString());</div><div>}</div><div>&nbsp;</div><div>//单击eventlink执行删除操作</div><div>Object onDelete(Long id){</div><div>dao.deleteByID(Person.class, id);</div><div>return this;</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>PersonList.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;&lt;style&gt;</div><div>&nbsp;.table{border-collapse: collapse; }</div><div>&nbsp;.table td,table th{border:1px solid #999; padding:5px;&quot;}</div><div>&nbsp;&lt;/style&gt;</div><div>&nbsp;&lt;t:pagelink page=&quot;crud/PersonCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;&lt;t:grid t:include=&quot;id,version,firstName,lastName,region,startDate&quot; t:source=&quot;persons&quot; t:row=&quot;person&quot; t:pagerPosition=&quot;top&quot; t:rowsPerPage=&quot;1&quot; t:add=&quot;action&quot; class=&quot;table&quot;&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p:actionCell&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:pagelink page=&quot;crud/PersonUpdate&quot; t:context=&quot;${person.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;t:eventlink t:event=&quot;delete&quot; t:context=&quot;${person.id}&quot;&gt;删除&lt;/t:eventlink&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/p:actionCell&gt;</div><div>&nbsp;&lt;/t:grid&gt;</div><div>&nbsp;</div><div>&lt;/html&gt;</div></div><p>PersonUpdate.java</p><div class=\"code\"><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><p>*/&nbsp;<br />package com.tapestry.app.pages.crud;</p><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.Person;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class PersonUpdate {</div><div>&nbsp;</div><div>//接收页面传来的id值</div><div>@PageActivationContext</div><div>private Long id;</div><div>&nbsp;</div><div>//设置user可读写</div><div>@Property</div><div>private Person person;</div><div>&nbsp;</div><div>//导入服务</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//页面加载时运行</div><div>void onPrepare(){</div><div>//user为空数据时根据页面传递过来的id查询数据</div><div>if(person == null){</div><div>person = dao.findByID(Person.class, id);</div><div>}</div><div>}</div><div>//提交表单保存user数据</div><div>Object onSuccess(){</div><div>dao.update(person);</div><div>return PersonList.class;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>PersonUpdate.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;&lt;t:form&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:errors/&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;版本(version)：&lt;t:textfield t:id=&quot;version&quot; value=&quot;person.version&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;姓(firstName)：&lt;t:textfield t:id=&quot;firstName&quot; value=&quot;person.firstName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;名(lastName)：&lt;t:textfield t:id=&quot;lastName&quot; value=&quot;person.lastName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;地区(region)：&lt;t:select t:id=&quot;region&quot; value=&quot;person.region&quot; t:model=&quot;literal:深圳,北京&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;保存&quot;/&gt;&lt;t:pagelink page=&quot;crud/PersonList&quot;&gt;返回查看页面&lt;/t:pagelink&gt;&lt;/p&gt;</div><div>&nbsp;&lt;/t:form&gt;</div><div>&nbsp;&lt;/html&gt;</div></div>', null, '17', '第二十四讲：tapestry的grid组件', '<p>PersonCreate.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.Person;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class PersonCreate {\r\n\r\n	@Property\r\n	private Person person;\r\n\r\n	// 导入服务接口\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 初始化user实体\r\n	void onPrepare() {\r\n		person = new Person();\r\n	}\r\n\r\n	// 提交表单的时候执行存储,返回当前页面\r\n	Object onSuccess() {\r\n		// 如果时间为空值输入系统当前时间\r\n		if (person.getStartDate() == null) {\r\n			person.setStartDate(new Date());\r\n		}\r\n		dao.create(person);\r\n		return PersonList.class;\r\n	}\r\n}</pre></p><p>PersonCreate.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;t:form t:id=&quot;personForm&quot;&gt;\r\n  &lt;t:errors/&gt;\r\n  &lt;p&gt;版本(version)：&lt;t:textfield t:id=&quot;version&quot; value=&quot;person.version&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;姓(firstName)：&lt;t:textfield t:id=&quot;firstName&quot; value=&quot;person.firstName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;名(lastName)：&lt;t:textfield t:id=&quot;lastName&quot; value=&quot;person.lastName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;地区(region)：&lt;t:select t:id=&quot;region&quot; value=&quot;person.region&quot; t:model=&quot;literal:深圳,北京&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;创建&quot;/&gt;&lt;!-- &lt;t:pagelink page=&quot;crud/UserList&quot;&gt;返回查看页面&lt;/t:pagelink&gt; --&gt;&lt;/p&gt;\r\n &lt;/t:form&gt;\r\n &lt;/html&gt;</pre></p><p>PersonList.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.Person;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class PersonList {\r\n\r\n	// 打开user读写\r\n	@Property\r\n	private Person person;\r\n\r\n	// 打开user阵列的读写\r\n	@Property\r\n	private List&lt;Person&gt; persons;\r\n\r\n	// 导入操作数据库的服务\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 当前页面接收user的id值\r\n	@PageActivationContext\r\n	private Long id;\r\n\r\n	// 页面加载时设置渲染\r\n	void setupRender() {\r\n		// 查询User数据表\r\n		StringBuffer sql = new StringBuffer();\r\n		sql.append(&quot;from Person&quot;);\r\n		persons = dao.findWithQuery(sql.toString());\r\n	}\r\n\r\n	// 单击eventlink执行删除操作\r\n	Object onDelete(Long id) {\r\n		dao.deleteByID(Person.class, id);\r\n		return this;\r\n	}\r\n\r\n}</pre></p><p>PersonList.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;style&gt;\r\n .table{border-collapse: collapse; }\r\n .table td,table th{border:1px solid #999; padding:5px;&quot;}\r\n &lt;/style&gt;\r\n &lt;t:pagelink page=&quot;crud/PersonCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;\r\n &lt;t:grid t:include=&quot;id,version,firstName,lastName,region,startDate&quot; t:source=&quot;persons&quot; t:row=&quot;person&quot; t:pagerPosition=&quot;top&quot; t:rowsPerPage=&quot;1&quot; t:add=&quot;action&quot; class=&quot;table&quot;&gt;\r\n  &lt;p:actionCell&gt;\r\n  &lt;t:pagelink page=&quot;crud/PersonUpdate&quot; t:context=&quot;${person.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;t:eventlink t:event=&quot;delete&quot; t:context=&quot;${person.id}&quot;&gt;删除&lt;/t:eventlink&gt;\r\n  &lt;/p:actionCell&gt;\r\n &lt;/t:grid&gt;\r\n \r\n&lt;/html&gt;</pre></p><p>PersonUpdate.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.entities.Person;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class PersonUpdate {\r\n\r\n	// 接收页面传来的id值\r\n	@PageActivationContext\r\n	private Long id;\r\n\r\n	// 设置user可读写\r\n	@Property\r\n	private Person person;\r\n\r\n	// 导入服务\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 页面加载时运行\r\n	void onPrepare() {\r\n		// user为空数据时根据页面传递过来的id查询数据\r\n		if (person == null) {\r\n			person = dao.findByID(Person.class, id);\r\n		}\r\n	}\r\n\r\n	// 提交表单保存user数据\r\n	Object onSuccess() {\r\n		dao.update(person);\r\n		return PersonList.class;\r\n	}\r\n}</pre></p><p>PersonUpdate.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;t:form&gt;\r\n  &lt;t:errors/&gt;\r\n  &lt;p&gt;版本(version)：&lt;t:textfield t:id=&quot;version&quot; value=&quot;person.version&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;姓(firstName)：&lt;t:textfield t:id=&quot;firstName&quot; value=&quot;person.firstName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;名(lastName)：&lt;t:textfield t:id=&quot;lastName&quot; value=&quot;person.lastName&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;地区(region)：&lt;t:select t:id=&quot;region&quot; value=&quot;person.region&quot; t:model=&quot;literal:深圳,北京&quot; t:validate=&quot;required&quot;/&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;保存&quot;/&gt;&lt;t:pagelink page=&quot;crud/PersonList&quot;&gt;返回查看页面&lt;/t:pagelink&gt;&lt;/p&gt;\r\n &lt;/t:form&gt;\r\n &lt;/html&gt;</pre><br /></p>', 'Lesson 24：Tapestry Grid', '');
INSERT INTO `td_c_technology` VALUES ('47', null, '2016-05-12 09:24:23', 'admin', '0755', '', 'admin', '2016-05-17 10:16:47', '<p>tapestry的loop组件，官方没有出分页组件，这里使用了PagedLoop分页组件，这个组件是chenillekit组件里的一个小组件，因不需要其它组件，这里就把PagedLoop组件单独提出来使用。实现从数据库中抓取每页所需的记录，而不是所有记录。下面先看下PagedLoop源码：</p><p>PagedLoop.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.components.pagedLoop;</div><div>&nbsp;</div><div>import org.apache.tapestry5.Block;</div><div>import org.apache.tapestry5.ClientElement;</div><div>import org.apache.tapestry5.ComponentResources;</div><div>import org.apache.tapestry5.ValueEncoder;</div><div>import org.apache.tapestry5.annotations.BeginRender;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.Environmental;</div><div>import org.apache.tapestry5.annotations.Parameter;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>import org.apache.tapestry5.corelib.components.Delegate;</div><div>import org.apache.tapestry5.corelib.components.Loop;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.ComponentDefaultProvider;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>import org.apache.tapestry5.util.StringToEnumCoercion;</div><div>&nbsp;</div><div>import com.tapestry.app.data.pagedloop.PagedSource;</div><div>import com.tapestry.app.data.pagedloop.PagerPosition;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>public class PagedLoop implements ClientElement</div><div>{</div><div>&nbsp; &nbsp; @Environmental</div><div>&nbsp; &nbsp; private JavaScriptSupport javascriptSupport;</div><div>&nbsp;</div><div>&nbsp; &nbsp; @Parameter(value = &quot;prop:componentResources.id&quot;, defaultPrefix = &quot;literal&quot;)</div><div>&nbsp; &nbsp; private String clientId;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* The element to render. If not null, then the loop will render the indicated element around its body (on each pass through the loop).</div><div>&nbsp; &nbsp; &nbsp;* The default is derived from the component template.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @Parameter(value = &quot;prop:componentResources.elementName&quot;, defaultPrefix = &quot;literal&quot;)</div><div>&nbsp; &nbsp; private String element;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Defines the collection of values for the loop to iterate over.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Parameter(required = true)</div><div>&nbsp; &nbsp; private Iterable&lt;?&gt; source;</div><div>&nbsp;</div><div>&nbsp; &nbsp; private PagedSource&lt;?&gt; pagedSource;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Defines where the pager (used to navigate within the &quot;pages&quot; of results)</div><div>&nbsp; &nbsp; &nbsp;* should be displayed: &quot;top&quot;, &quot;bottom&quot;, &quot;both&quot; or &quot;none&quot;.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @Parameter(value = &quot;bottom&quot;, defaultPrefix = &quot;literal&quot;)</div><div>&nbsp; &nbsp; private String pagerPosition;</div><div>&nbsp;</div><div>&nbsp; &nbsp; private PagerPosition internalPagerPosition;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* The number of rows of data displayed on each page. If there are more rows than will fit, the Grid will divide</div><div>&nbsp; &nbsp; &nbsp;* up the rows into &quot;pages&quot; and (normally) provide a pager to allow the user to navigate within the overall result set.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @Parameter(&quot;25&quot;)</div><div>&nbsp; &nbsp; private int rowsPerPage;</div><div>&nbsp;</div><div>&nbsp; &nbsp; @Persist</div><div>&nbsp; &nbsp; private int currentPage;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* The current value, set before the component renders its body.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Parameter</div><div>&nbsp; &nbsp; private Object value;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* If true and the Loop is enclosed by a Form, then the normal state saving logic is turned off.</div><div>&nbsp; &nbsp; &nbsp;* Defaults to false, enabling state saving logic within Forms.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Parameter(name = &quot;volatile&quot;)</div><div>&nbsp; &nbsp; private boolean isVolatile;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* The index into the source items.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Parameter</div><div>&nbsp; &nbsp; private int index;</div><div>&nbsp;</div><div>/**</div><div>* Value encoder for the value, usually determined automatically from the type of the property bound to the value</div><div>* parameter.</div><div>*/</div><div>@Parameter(required = true)</div><div>private ValueEncoder encoder;</div><div>&nbsp;</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Component(parameters = {&quot;source=pagedSource&quot;,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;element=prop:element&quot;, &quot;value=inherit:value&quot;,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;volatile=inherit:volatile&quot;, &quot;encoder=inherit:encoder&quot;,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;index=inherit:index&quot;})</div><div>&nbsp; &nbsp; private Loop loop;</div><div>&nbsp;</div><div>&nbsp; &nbsp; @Component(parameters = {&quot;source=pagedSource&quot;, &quot;rowsPerPage=rowsPerPage&quot;,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;currentPage=currentPage&quot;})</div><div>&nbsp; &nbsp; private Pager internalPager;</div><div>&nbsp;</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Component(parameters = &quot;to=pagerTop&quot;)</div><div>&nbsp; &nbsp; private Delegate pagerTop;</div><div>&nbsp;</div><div>&nbsp; &nbsp; @SuppressWarnings(&quot;unused&quot;)</div><div>&nbsp; &nbsp; @Component(parameters = &quot;to=pagerBottom&quot;)</div><div>&nbsp; &nbsp; private Delegate pagerBottom;</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* A Block to render instead of the table (and pager, etc.) when the source</div><div>&nbsp; &nbsp; &nbsp;* is empty. The default is simply the text &quot;There is no data to display&quot;.</div><div>&nbsp; &nbsp; &nbsp;* This parameter is used to customize that message, possibly including</div><div>&nbsp; &nbsp; &nbsp;* components to allow the user to create new objects.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; @Parameter(value = &quot;block:empty&quot;)</div><div>&nbsp; &nbsp; private Block empty;</div><div>&nbsp;</div><div>@Inject</div><div>private ComponentResources resources;</div><div>&nbsp;</div><div>@Inject</div><div>private ComponentDefaultProvider defaultProvider;</div><div>&nbsp;</div><div>&nbsp; &nbsp; private String assignedClientId;</div><div>&nbsp;</div><div>&nbsp; &nbsp; public String getElement()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return element;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public Object getPagerTop()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return internalPagerPosition.isMatchTop() ? internalPager : null;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public Object getPagerBottom()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return internalPagerPosition.isMatchBottom() ? internalPager : null;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public PagedSource&lt;?&gt; getPagedSource()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return pagedSource;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public int getRowsPerPage()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return rowsPerPage;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public void setRowsPerPage(int rowsPerPage)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; this.rowsPerPage = rowsPerPage;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public int getCurrentPage()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return currentPage;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public void setCurrentPage(int currentPage)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; this.currentPage = currentPage;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>ValueEncoder defaultEncoder()</div><div>{</div><div>return defaultProvider.defaultValueEncoder(&quot;value&quot;, resources);</div><div>}</div><div>&nbsp;</div><div>@SuppressWarnings(&quot;unchecked&quot;)</div><div>&nbsp; &nbsp; Object setupRender()</div><div>&nbsp; &nbsp; {</div><div>if (currentPage == 0)</div><div>currentPage = 1;</div><div>&nbsp;</div><div>assignedClientId = javascriptSupport.allocateClientId(clientId);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; internalPagerPosition = new StringToEnumCoercion&lt;PagerPosition&gt;(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PagerPosition.class).coerce(pagerPosition);</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; pagedSource = new PagedSource(source);</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; int availableRows = pagedSource.getTotalRowCount();</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; // If there\'s no rows, display the empty block placeholder.</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (availableRows == 0)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return empty;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; int startIndex = (currentPage - 1) * rowsPerPage;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; int endIndex = Math.min(startIndex + rowsPerPage - 1,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; availableRows - 1);</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; pagedSource.prepare(startIndex, endIndex);</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return null;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; @BeginRender</div><div>&nbsp; &nbsp; Object begin()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; // Skip rendering of component (template, body, etc.) when there\'s</div><div>&nbsp; &nbsp; &nbsp; &nbsp; // nothing to display.</div><div>&nbsp; &nbsp; &nbsp; &nbsp; // The empty placeholder will already have rendered.</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return (pagedSource.getTotalRowCount() != 0);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; void onAction(int newPage)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; // TODO: Validate newPage in range</div><div>&nbsp; &nbsp; &nbsp; &nbsp; currentPage = newPage;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Returns a unique id for the element. This value will be unique for any given rendering of a</div><div>&nbsp; &nbsp; &nbsp;* page. This value is intended for use as the id attribute of the client-side element, and will</div><div>&nbsp; &nbsp; &nbsp;* be used with any DHTML/Ajax related JavaScript.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; public String getClientId()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return assignedClientId;</div><div>&nbsp; &nbsp; }</div><div>}</div><div>&nbsp;</div></div><p>PagedLoop.tml</p><div class=\"code\"><div>&lt;!--</div><div>&nbsp; ~ Apache License</div><div>&nbsp; ~ Version 2.0, January 2004</div><div>&nbsp; ~ http://www.apache.org/licenses/</div><div>&nbsp; ~</div><div>&nbsp; ~ Copyright 2008 by chenillekit.org</div><div>&nbsp; ~</div><div>&nbsp; ~ Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</div><div>&nbsp; ~ you may not use this file except in compliance with the License.</div><div>&nbsp; ~ You may obtain a copy of the License at</div><div>&nbsp; ~</div><div>&nbsp; ~ http://www.apache.org/licenses/LICENSE-2.0</div><div>&nbsp; --&gt;</div><div>&nbsp;</div><div>&lt;t:container xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot;&gt;</div><div>&nbsp;<span style=\"line-height: 1.5;\">&lt;style&gt;</span></div><div>.ks-clear:after { content: \'\\20\'; display: block; height: 0; clear: both; }</div><div>.ks-clear { *zoom: 1; }</div><div>&lt;/style&gt;</div><div>&nbsp; &nbsp; &lt;div t:id=&quot;pagerTop&quot;/&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;t:loop t:id=&quot;loop&quot;&gt;&lt;t:body/&gt;&lt;/t:loop&gt;</div><div>&lt;div class=&quot;ks-clear&quot;&gt;&lt;/div&gt;</div><div>&nbsp; &nbsp; &lt;div t:id=&quot;pagerBottom&quot;/&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;t:block&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div t:id=&quot;internalPager&quot;/&gt;</div><div>&nbsp; &nbsp; &lt;/t:block&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;t:block id=&quot;empty&quot;&gt;${message:empty.list}&lt;/t:block&gt;</div><div>&nbsp;</div><div>&lt;/t:container&gt;</div><div>&nbsp;</div></div><p>Pager.Java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.components.pagedLoop;</div><div>&nbsp;</div><div>import org.apache.tapestry5.BindingConstants;</div><div>import org.apache.tapestry5.ComponentResources;</div><div>import org.apache.tapestry5.EventConstants;</div><div>import org.apache.tapestry5.Link;</div><div>import org.apache.tapestry5.MarkupWriter;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.Parameter;</div><div>import org.apache.tapestry5.ioc.Messages;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.runtime.Component;</div><div>&nbsp;</div><div>import com.tapestry.app.data.pagedloop.PagedSource;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>@Import(stylesheet = {&quot;Pager.css&quot;})</div><div>public class Pager</div><div>{</div><div>/**</div><div>* The source of the data displayed by the PagedList (this is used to</div><div>* determine</div><div>* {@link PagedSource#getTotalRowCount() how many rows are available},</div><div>* which in turn determines the page count).</div><div>*/</div><div>@Parameter</div><div>private PagedSource&lt;?&gt; source;</div><div>&nbsp;</div><div>/**</div><div>* The number of rows displayed per page.</div><div>*/</div><div>@Parameter</div><div>private int rowsPerPage;</div><div>&nbsp;</div><div>/**</div><div>* The current page number (indexed from 1).</div><div>*/</div><div>@Parameter</div><div>private int currentPage;</div><div>&nbsp;</div><div>/**</div><div>* If this pager is in a custom position it must provide the id of the</div><div>* PagedLoop it is associated with.</div><div>*/</div><div>@Parameter(defaultPrefix = BindingConstants.LITERAL, name = &quot;for&quot;)</div><div>private String forId;</div><div>&nbsp;</div><div>/**</div><div>* Number of pages before and after the current page in the range. The pager</div><div>* always displays links for 2 * range + 1 pages, unless that\'s more than</div><div>* the total number of available pages.</div><div>*/</div><div>@Parameter(&quot;5&quot;)</div><div>private int range;</div><div>&nbsp;</div><div>private int lastIndex;</div><div>&nbsp;</div><div>private int maxPages;</div><div>&nbsp;</div><div>@Inject</div><div>private ComponentResources resources;</div><div>&nbsp;</div><div>@Inject</div><div>private Messages messages;</div><div>&nbsp;</div><div>private Component pagedLoopComponent;</div><div>&nbsp;</div><div>private PagedLoop pagedLoop;</div><div>&nbsp;</div><div>void setupRender()</div><div>{</div><div>if (forId != null)</div><div>{</div><div>source = getPagedLoop().getPagedSource();</div><div>rowsPerPage = getPagedLoop().getRowsPerPage();</div><div>currentPage = getPagedLoop().getCurrentPage();</div><div>}</div><div>}</div><div>&nbsp;</div><div>void beginRender(MarkupWriter writer)</div><div>{</div><div>&nbsp;</div><div>int availableRows = source.getTotalRowCount();</div><div>&nbsp;</div><div>maxPages = ((availableRows - 1) / rowsPerPage) + 1;</div><div>&nbsp;</div><div>if (maxPages &lt; 2)</div><div>return;</div><div>&nbsp;</div><div>writer.element(resources.getContainer().getComponentResources().getElementName(), &quot;class&quot;, &quot;ck_paged_loop_pager&quot;);</div><div>//writer.element(&quot;div&quot;, &quot;class&quot;, &quot;ck_paged_loop_pager&quot;);</div><div>&nbsp;</div><div>lastIndex = 0;</div><div>&nbsp;</div><div>for (int i = 1; i &lt;= 2; i++)</div><div>writePageLink(writer, i);</div><div>&nbsp;</div><div>int low = currentPage - range;</div><div>int high = currentPage + range;</div><div>&nbsp;</div><div>if (low &lt; 1)</div><div>{</div><div>low = 1;</div><div>high = 2 * range + 1;</div><div>}</div><div>else</div><div>{</div><div>if (high &gt; maxPages)</div><div>{</div><div>high = maxPages;</div><div>low = high - 2 * range;</div><div>}</div><div>}</div><div>&nbsp;</div><div>for (int i = low; i &lt;= high; i++)</div><div>writePageLink(writer, i);</div><div>&nbsp;</div><div>for (int i = maxPages - 1; i &lt;= maxPages; i++)</div><div>writePageLink(writer, i);</div><div>&nbsp;</div><div>writer.end();</div><div>//writer.end();</div><div>}</div><div>&nbsp;</div><div>void onAction(int newPage)</div><div>{</div><div>// TODO: Validate newPage in range</div><div>currentPage = newPage;</div><div>if (forId != null)</div><div>{</div><div>getPagedLoopComponent().getComponentResources().triggerEvent(</div><div>EventConstants.ACTION, new Integer[]{newPage},</div><div>null);</div><div>}</div><div>}</div><div>&nbsp;</div><div>private Component getPagedLoopComponent()</div><div>{</div><div>if (forId != null &amp;&amp; pagedLoopComponent == null)</div><div>pagedLoopComponent = resources.getPage().getComponentResources().getEmbeddedComponent(forId);</div><div>&nbsp;</div><div>return pagedLoopComponent;</div><div>}</div><div>&nbsp;</div><div>private PagedLoop getPagedLoop()</div><div>{</div><div>if (forId != null &amp;&amp; pagedLoop == null)</div><div>pagedLoop = (PagedLoop) getPagedLoopComponent();</div><div>&nbsp;</div><div>return pagedLoop;</div><div>}</div><div>&nbsp;</div><div>private void writePageLink(MarkupWriter writer, int pageIndex)</div><div>{</div><div>if (pageIndex &lt; 1 || pageIndex &gt; maxPages)</div><div>return;</div><div>&nbsp;</div><div>if (pageIndex &lt;= lastIndex)</div><div>return;</div><div>&nbsp;</div><div>if (pageIndex != lastIndex + 1)</div><div>writer.write(&quot; ... &quot;); // &amp;#8230; is ellipsis</div><div>&nbsp;</div><div>lastIndex = pageIndex;</div><div>&nbsp;</div><div>if (pageIndex == currentPage)</div><div>{</div><div>writer.element(&quot;span&quot;, &quot;class&quot;, &quot;ck_paged_loop_current&quot;);</div><div>writer.write(Integer.toString(pageIndex));</div><div>writer.end();</div><div>return;</div><div>}</div><div>&nbsp;</div><div>Link link = resources.createEventLink(EventConstants.ACTION, pageIndex);</div><div>&nbsp;</div><div>writer.element(&quot;a&quot;, &quot;href&quot;, link, &quot;title&quot;, messages.format(&quot;goto-page&quot;, pageIndex));</div><div>&nbsp;</div><div>writer.write(Integer.toString(pageIndex));</div><div>writer.end();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>Pager.css</p><div class=\"code\"><div>/*</div><div>&nbsp;* Apache License</div><div>&nbsp;* Version 2.0, January 2004</div><div>&nbsp;* http://www.apache.org/licenses/</div><div>&nbsp;*</div><div>&nbsp;* Copyright 2008 by chenillekit.org</div><div>&nbsp;*</div><div>&nbsp;* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</div><div>&nbsp;* you may not use this file except in compliance with the License.</div><div>&nbsp;* You may obtain a copy of the License at</div><div>&nbsp;*</div><div>&nbsp;* http://www.apache.org/licenses/LICENSE-2.0</div><div>&nbsp;*/</div><div>DIV.ck_paged_loop_pager{padding:10px 0;}</div><div>DIV.ck_paged_loop_pager A {</div><div>&nbsp; &nbsp;border: 1px solid silver;</div><div>&nbsp; &nbsp;color: black;</div><div>&nbsp; &nbsp;font-size: medium;</div><div>&nbsp; &nbsp;margin-right: 5px;</div><div>&nbsp; &nbsp;padding: 2px 5px;</div><div>&nbsp; &nbsp;text-decoration: none;</div><div>}</div><div>DIV.ck_paged_loop_pager A:hover {</div><div>&nbsp; &nbsp;border: 1px solid #000;</div><div>&nbsp; &nbsp;color: black;</div><div>&nbsp; &nbsp;font-size: medium;</div><div>&nbsp; &nbsp;margin-right: 5px;</div><div>&nbsp; &nbsp;padding: 2px 5px;</div><div>&nbsp; &nbsp;text-decoration: none;</div><div>}</div><div>SPAN.ck_paged_loop_current {</div><div>&nbsp; &nbsp;border: 1px solid silver;</div><div>&nbsp; &nbsp;font-size: medium;</div><div>&nbsp; &nbsp;margin-right: 5px;</div><div>&nbsp; &nbsp;padding: 2px 5px;</div><div>&nbsp; &nbsp;text-decoration: none;</div><div>&nbsp; &nbsp;background-color: #809FFF;</div><div>&nbsp; &nbsp;color: white;</div><div>}</div><div>&nbsp;</div></div><p>PagedSource.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.data.pagedloop;</div><div>&nbsp;</div><div>import java.util.ArrayList;</div><div>import java.util.Iterator;</div><div>import java.util.List;</div><div>&nbsp;</div><div>&nbsp;</div><div>public class PagedSource&lt;T&gt; implements Iterable&lt;T&gt;</div><div>{</div><div>&nbsp; &nbsp; private List&lt;T&gt; _source = new ArrayList&lt;T&gt;();</div><div>&nbsp;</div><div>&nbsp; &nbsp; private List&lt;T&gt; _pageSource = new ArrayList&lt;T&gt;();</div><div>&nbsp;</div><div>&nbsp; &nbsp; private Integer _iterableSize;</div><div>&nbsp;</div><div>&nbsp; &nbsp; public PagedSource(Iterable&lt;T&gt; source)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; for (T aSource : source)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _source.add(aSource);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* @return</div><div>&nbsp; &nbsp; &nbsp;*</div><div>&nbsp; &nbsp; &nbsp;* @see java.lang.Iterable#iterator()</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; public Iterator&lt;T&gt; iterator()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return _pageSource.iterator();</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public int getTotalRowCount()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (_iterableSize != null)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return _iterableSize;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; _iterableSize = 0;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; Iterator&lt;?&gt; it = _source.iterator();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; while (it.hasNext())</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; it.next();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _iterableSize++;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return _iterableSize;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public void prepare(int startIndex, int endIndex)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; for (int i = startIndex; i &lt;= endIndex; i++)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _pageSource.add(_source.get(i));</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>PagerPosition.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.data.pagedloop;</div><div>&nbsp;</div><div>public enum PagerPosition</div><div>{</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Position the pager above the paged content.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; TOP(true, false),</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Position the pager below the paged content (this is the default).</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; BOTTOM(false, true),</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Show the pager above and below the paged content.</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; BOTH(true, true),</div><div>&nbsp;</div><div>&nbsp; &nbsp; /**</div><div>&nbsp; &nbsp; &nbsp;* Don\'t show a pager (the application will need to supply its own</div><div>&nbsp; &nbsp; &nbsp;* navigation mechanism).</div><div>&nbsp; &nbsp; &nbsp;*/</div><div>&nbsp; &nbsp; NONE(false, false);</div><div>&nbsp;</div><div>&nbsp; &nbsp; private final boolean _matchTop;</div><div>&nbsp;</div><div>&nbsp; &nbsp; private final boolean _matchBottom;</div><div>&nbsp;</div><div>&nbsp; &nbsp; private PagerPosition(boolean matchTop, boolean matchBottom)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; _matchTop = matchTop;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; _matchBottom = matchBottom;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public boolean isMatchBottom()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return _matchBottom;</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public boolean isMatchTop()</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return _matchTop;</div><div>&nbsp; &nbsp; }</div><div>}</div></div><p>下面是使用PagedLoop组件的代码：</p><p>PersonList2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages.crud;</div><div>&nbsp;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.PageActivationContext;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>import com.tapestry.app.components.pagedLoop.PagedLoop;</div><div>import com.tapestry.app.entities.Person;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class PersonList2 {</div><div>&nbsp;</div><div>//打开user读写</div><div>@Property</div><div>private Person person;</div><div>&nbsp;</div><div>//打开user阵列的读写</div><div>@Property</div><div>private List&lt;Person&gt; persons;</div><div>&nbsp;</div><div>//导入操作数据库的服务</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>//当前页面接收user的id值</div><div>@PageActivationContext</div><div>private Long id;</div><div>&nbsp;</div><div>//开启PagedLoop</div><div>@Component(parameters={&quot;source=persons&quot;, &quot;value=person&quot;, &quot;rowsPerPage=1&quot;,&quot;pagerPosition=bottom&quot;})</div><div>private PagedLoop personLoop;</div><div>&nbsp;</div><div>//页面加载时设置渲染</div><div>void setupRender(){</div><div>//查询User数据表</div><div>StringBuffer sql = new StringBuffer();</div><div>sql.append(&quot;from Person&quot;);</div><div>persons = dao.findWithQuery(sql.toString());</div><div>}</div><div>&nbsp;</div><div>//单击eventlink执行删除操作</div><div>Object onDelete(Long id){</div><div>dao.deleteByID(Person.class, id);</div><div>return this;</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>PersonList2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;&lt;style&gt;</div><div>&nbsp;.table{border-collapse: collapse; }</div><div>&nbsp;.table td,table th{border:1px solid #999; padding:5px;&quot;}</div><div>&nbsp;.meul{list-style:none;}</div><div>&nbsp;.meul li{ width:80px; float:left; hegiht:20px;}</div><div>&nbsp;.clear{clear:both; height:0; display:block; overflow:hidden;}</div><div>&nbsp;&lt;/style&gt;</div><div>&nbsp;&lt;t:pagelink page=&quot;crud/PersonCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&lt;ul class=&quot;meul&quot;&gt;</div><div>&lt;li&gt;id&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;version&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;firstName&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;lastName&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;region&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;startDate&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;操作&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</div><div>&lt;div t:id=&quot;personLoop&quot;&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;${person.id}&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;${person.version}&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;${person.firstName}&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;${person.lastName}&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;${person.region}&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;${person.startDate}&lt;/li&gt;</div><div>&nbsp; &nbsp; &lt;li&gt;&lt;t:pagelink page=&quot;crud/PersonUpdate&quot; t:context=&quot;${person.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;t:eventlink t:event=&quot;delete&quot; t:context=&quot;${person.id}&quot;&gt;删除&lt;/t:eventlink&gt;&lt;/li&gt;</div><div>&nbsp; &lt;/div&gt;</div><div>&nbsp; &lt;/ul&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第二十五讲：tapestry的loop组件整合PagedLoop分页组件', '<p>PagedLoop.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.components.pagedLoop;\r\n\r\nimport org.apache.tapestry5.Block;\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.ValueEncoder;\r\nimport org.apache.tapestry5.annotations.BeginRender;\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.Environmental;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.annotations.Persist;\r\nimport org.apache.tapestry5.corelib.components.Delegate;\r\nimport org.apache.tapestry5.corelib.components.Loop;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.ComponentDefaultProvider;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\nimport org.apache.tapestry5.util.StringToEnumCoercion;\r\n\r\nimport com.tapestry.app.data.pagedloop.PagedSource;\r\nimport com.tapestry.app.data.pagedloop.PagerPosition;\r\n\r\npublic class PagedLoop implements ClientElement {\r\n	@Environmental\r\n	private JavaScriptSupport javascriptSupport;\r\n\r\n	@Parameter(value = &quot;prop:componentResources.id&quot;, defaultPrefix = &quot;literal&quot;)\r\n	private String clientId;\r\n\r\n	/**\r\n	 * The element to render. If not null, then the loop will render the\r\n	 * indicated element around its body (on each pass through the loop). The\r\n	 * default is derived from the component template.\r\n	 */\r\n	@Parameter(value = &quot;prop:componentResources.elementName&quot;, defaultPrefix = &quot;literal&quot;)\r\n	private String element;\r\n\r\n	/**\r\n	 * Defines the collection of values for the loop to iterate over.\r\n	 */\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Parameter(required = true)\r\n	private Iterable&lt;?&gt; source;\r\n\r\n	private PagedSource&lt;?&gt; pagedSource;\r\n\r\n	/**\r\n	 * Defines where the pager (used to navigate within the &quot;pages&quot; of results)\r\n	 * should be displayed: &quot;top&quot;, &quot;bottom&quot;, &quot;both&quot; or &quot;none&quot;.\r\n	 */\r\n	@Parameter(value = &quot;bottom&quot;, defaultPrefix = &quot;literal&quot;)\r\n	private String pagerPosition;\r\n\r\n	private PagerPosition internalPagerPosition;\r\n\r\n	/**\r\n	 * The number of rows of data displayed on each page. If there are more rows\r\n	 * than will fit, the Grid will divide up the rows into &quot;pages&quot; and\r\n	 * (normally) provide a pager to allow the user to navigate within the\r\n	 * overall result set.\r\n	 */\r\n	@Parameter(&quot;25&quot;)\r\n	private int rowsPerPage;\r\n\r\n	@Persist\r\n	private int currentPage;\r\n\r\n	/**\r\n	 * The current value, set before the component renders its body.\r\n	 */\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Parameter\r\n	private Object value;\r\n\r\n	/**\r\n	 * If true and the Loop is enclosed by a Form, then the normal state saving\r\n	 * logic is turned off. Defaults to false, enabling state saving logic\r\n	 * within Forms.\r\n	 */\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Parameter(name = &quot;volatile&quot;)\r\n	private boolean isVolatile;\r\n\r\n	/**\r\n	 * The index into the source items.\r\n	 */\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Parameter\r\n	private int index;\r\n\r\n	/**\r\n	 * Value encoder for the value, usually determined automatically from the\r\n	 * type of the property bound to the value parameter.\r\n	 */\r\n	@Parameter(required = true)\r\n	private ValueEncoder encoder;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Component(parameters = { &quot;source=pagedSource&quot;, &quot;element=prop:element&quot;, &quot;value=inherit:value&quot;,\r\n			&quot;volatile=inherit:volatile&quot;, &quot;encoder=inherit:encoder&quot;, &quot;index=inherit:index&quot; })\r\n	private Loop loop;\r\n\r\n	@Component(parameters = { &quot;source=pagedSource&quot;, &quot;rowsPerPage=rowsPerPage&quot;, &quot;currentPage=currentPage&quot; })\r\n	private Pager internalPager;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Component(parameters = &quot;to=pagerTop&quot;)\r\n	private Delegate pagerTop;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Component(parameters = &quot;to=pagerBottom&quot;)\r\n	private Delegate pagerBottom;\r\n\r\n	/**\r\n	 * A Block to render instead of the table (and pager, etc.) when the source\r\n	 * is empty. The default is simply the text &quot;There is no data to display&quot;.\r\n	 * This parameter is used to customize that message, possibly including\r\n	 * components to allow the user to create new objects.\r\n	 */\r\n	@Parameter(value = &quot;block:empty&quot;)\r\n	private Block empty;\r\n\r\n	@Inject\r\n	private ComponentResources resources;\r\n\r\n	@Inject\r\n	private ComponentDefaultProvider defaultProvider;\r\n\r\n	private String assignedClientId;\r\n\r\n	public String getElement() {\r\n		return element;\r\n	}\r\n\r\n	public Object getPagerTop() {\r\n		return internalPagerPosition.isMatchTop() ? internalPager : null;\r\n	}\r\n\r\n	public Object getPagerBottom() {\r\n		return internalPagerPosition.isMatchBottom() ? internalPager : null;\r\n	}\r\n\r\n	public PagedSource&lt;?&gt; getPagedSource() {\r\n		return pagedSource;\r\n	}\r\n\r\n	public int getRowsPerPage() {\r\n		return rowsPerPage;\r\n	}\r\n\r\n	public void setRowsPerPage(int rowsPerPage) {\r\n		this.rowsPerPage = rowsPerPage;\r\n	}\r\n\r\n	public int getCurrentPage() {\r\n		return currentPage;\r\n	}\r\n\r\n	public void setCurrentPage(int currentPage) {\r\n		this.currentPage = currentPage;\r\n	}\r\n\r\n	ValueEncoder defaultEncoder() {\r\n		return defaultProvider.defaultValueEncoder(&quot;value&quot;, resources);\r\n	}\r\n\r\n	@SuppressWarnings(&quot;unchecked&quot;)\r\n	Object setupRender() {\r\n		if (currentPage == 0)\r\n			currentPage = 1;\r\n\r\n		assignedClientId = javascriptSupport.allocateClientId(clientId);\r\n		internalPagerPosition = new StringToEnumCoercion&lt;PagerPosition&gt;(PagerPosition.class).coerce(pagerPosition);\r\n\r\n		pagedSource = new PagedSource(source);\r\n\r\n		int availableRows = pagedSource.getTotalRowCount();\r\n\r\n		// If there\'s no rows, display the empty block placeholder.\r\n		if (availableRows == 0) {\r\n			return empty;\r\n		}\r\n\r\n		int startIndex = (currentPage - 1) * rowsPerPage;\r\n		int endIndex = Math.min(startIndex + rowsPerPage - 1, availableRows - 1);\r\n\r\n		pagedSource.prepare(startIndex, endIndex);\r\n\r\n		return null;\r\n	}\r\n\r\n	@BeginRender\r\n	Object begin() {\r\n		// Skip rendering of component (template, body, etc.) when there\'s\r\n		// nothing to display.\r\n		// The empty placeholder will already have rendered.\r\n		return (pagedSource.getTotalRowCount() != 0);\r\n	}\r\n\r\n	void onAction(int newPage) {\r\n		// TODO: Validate newPage in range\r\n		currentPage = newPage;\r\n	}\r\n\r\n	/**\r\n	 * Returns a unique id for the element. This value will be unique for any\r\n	 * given rendering of a page. This value is intended for use as the id\r\n	 * attribute of the client-side element, and will be used with any\r\n	 * DHTML/Ajax related JavaScript.\r\n	 */\r\n	public String getClientId() {\r\n		return assignedClientId;\r\n	}\r\n}\r\n</pre><p></p><p>PagedLoop.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;!--\r\n  ~ Apache License\r\n  ~ Version 2.0, January 2004\r\n  ~ http://www.apache.org/licenses/\r\n  ~\r\n  ~ Copyright 2008 by chenillekit.org\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~ http://www.apache.org/licenses/LICENSE-2.0\r\n  --&gt;\r\n \r\n&lt;t:container xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot;&gt;\r\n &lt;style&gt;\r\n.ks-clear:after { content: \'\\20\'; display: block; height: 0; clear: both; }\r\n.ks-clear { *zoom: 1; }\r\n&lt;/style&gt;\r\n    &lt;div t:id=&quot;pagerTop&quot;/&gt;\r\n \r\n    &lt;t:loop t:id=&quot;loop&quot;&gt;&lt;t:body/&gt;&lt;/t:loop&gt;\r\n&lt;div class=&quot;ks-clear&quot;&gt;&lt;/div&gt;\r\n    &lt;div t:id=&quot;pagerBottom&quot;/&gt;\r\n \r\n    &lt;t:block&gt;\r\n        &lt;div t:id=&quot;internalPager&quot;/&gt;\r\n    &lt;/t:block&gt;\r\n \r\n    &lt;t:block id=&quot;empty&quot;&gt;${message:empty.list}&lt;/t:block&gt;\r\n \r\n&lt;/t:container&gt;</pre><p></p><p>Pager.Java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.components.pagedLoop;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.EventConstants;\r\nimport org.apache.tapestry5.Link;\r\nimport org.apache.tapestry5.MarkupWriter;\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.ioc.Messages;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.runtime.Component;\r\n\r\nimport com.tapestry.app.data.pagedloop.PagedSource;\r\n\r\n@Import(stylesheet = { &quot;Pager.css&quot; })\r\npublic class Pager {\r\n	/**\r\n	 * The source of the data displayed by the PagedList (this is used to\r\n	 * determine {@link PagedSource#getTotalRowCount() how many rows are\r\n	 * available}, which in turn determines the page count).\r\n	 */\r\n	@Parameter\r\n	private PagedSource&lt;?&gt; source;\r\n\r\n	/**\r\n	 * The number of rows displayed per page.\r\n	 */\r\n	@Parameter\r\n	private int rowsPerPage;\r\n\r\n	/**\r\n	 * The current page number (indexed from 1).\r\n	 */\r\n	@Parameter\r\n	private int currentPage;\r\n\r\n	/**\r\n	 * If this pager is in a custom position it must provide the id of the\r\n	 * PagedLoop it is associated with.\r\n	 */\r\n	@Parameter(defaultPrefix = BindingConstants.LITERAL, name = &quot;for&quot;)\r\n	private String forId;\r\n\r\n	/**\r\n	 * Number of pages before and after the current page in the range. The pager\r\n	 * always displays links for 2 * range + 1 pages, unless that\'s more than\r\n	 * the total number of available pages.\r\n	 */\r\n	@Parameter(&quot;5&quot;)\r\n	private int range;\r\n\r\n	private int lastIndex;\r\n\r\n	private int maxPages;\r\n\r\n	@Inject\r\n	private ComponentResources resources;\r\n\r\n	@Inject\r\n	private Messages messages;\r\n\r\n	private Component pagedLoopComponent;\r\n\r\n	private PagedLoop pagedLoop;\r\n\r\n	void setupRender() {\r\n		if (forId != null) {\r\n			source = getPagedLoop().getPagedSource();\r\n			rowsPerPage = getPagedLoop().getRowsPerPage();\r\n			currentPage = getPagedLoop().getCurrentPage();\r\n		}\r\n	}\r\n\r\n	void beginRender(MarkupWriter writer) {\r\n\r\n		int availableRows = source.getTotalRowCount();\r\n\r\n		maxPages = ((availableRows - 1) / rowsPerPage) + 1;\r\n\r\n		if (maxPages &lt; 2)\r\n			return;\r\n\r\n		writer.element(resources.getContainer().getComponentResources().getElementName(), &quot;class&quot;,\r\n				&quot;ck_paged_loop_pager&quot;);\r\n		// writer.element(&quot;div&quot;, &quot;class&quot;, &quot;ck_paged_loop_pager&quot;);\r\n\r\n		lastIndex = 0;\r\n\r\n		for (int i = 1; i &lt;= 2; i++)\r\n			writePageLink(writer, i);\r\n\r\n		int low = currentPage - range;\r\n		int high = currentPage + range;\r\n\r\n		if (low &lt; 1) {\r\n			low = 1;\r\n			high = 2 * range + 1;\r\n		} else {\r\n			if (high &gt; maxPages) {\r\n				high = maxPages;\r\n				low = high - 2 * range;\r\n			}\r\n		}\r\n\r\n		for (int i = low; i &lt;= high; i++)\r\n			writePageLink(writer, i);\r\n\r\n		for (int i = maxPages - 1; i &lt;= maxPages; i++)\r\n			writePageLink(writer, i);\r\n\r\n		writer.end();\r\n		// writer.end();\r\n	}\r\n\r\n	void onAction(int newPage) {\r\n		// TODO: Validate newPage in range\r\n		currentPage = newPage;\r\n		if (forId != null) {\r\n			getPagedLoopComponent().getComponentResources().triggerEvent(EventConstants.ACTION,\r\n					new Integer[] { newPage }, null);\r\n		}\r\n	}\r\n\r\n	private Component getPagedLoopComponent() {\r\n		if (forId != null &amp;&amp; pagedLoopComponent == null)\r\n			pagedLoopComponent = resources.getPage().getComponentResources().getEmbeddedComponent(forId);\r\n\r\n		return pagedLoopComponent;\r\n	}\r\n\r\n	private PagedLoop getPagedLoop() {\r\n		if (forId != null &amp;&amp; pagedLoop == null)\r\n			pagedLoop = (PagedLoop) getPagedLoopComponent();\r\n\r\n		return pagedLoop;\r\n	}\r\n\r\n	private void writePageLink(MarkupWriter writer, int pageIndex) {\r\n		if (pageIndex &lt; 1 || pageIndex &gt; maxPages)\r\n			return;\r\n\r\n		if (pageIndex &lt;= lastIndex)\r\n			return;\r\n\r\n		if (pageIndex != lastIndex + 1)\r\n			writer.write(&quot; ... &quot;); // … is ellipsis\r\n\r\n		lastIndex = pageIndex;\r\n\r\n		if (pageIndex == currentPage) {\r\n			writer.element(&quot;span&quot;, &quot;class&quot;, &quot;ck_paged_loop_current&quot;);\r\n			writer.write(Integer.toString(pageIndex));\r\n			writer.end();\r\n			return;\r\n		}\r\n\r\n		Link link = resources.createEventLink(EventConstants.ACTION, pageIndex);\r\n\r\n		writer.element(&quot;a&quot;, &quot;href&quot;, link, &quot;title&quot;, messages.format(&quot;goto-page&quot;, pageIndex));\r\n\r\n		writer.write(Integer.toString(pageIndex));\r\n		writer.end();\r\n	}\r\n}</pre><p></p><p>Pager.css</p><p></p><pre class=\"prettyprint lang-css\">/*\r\n * Apache License\r\n * Version 2.0, January 2004\r\n * http://www.apache.org/licenses/\r\n *\r\n * Copyright 2008 by chenillekit.org\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nDIV.ck_paged_loop_pager{padding:10px 0;}\r\nDIV.ck_paged_loop_pager A {\r\n   border: 1px solid silver;\r\n   color: black;\r\n   font-size: medium;\r\n   margin-right: 5px;\r\n   padding: 2px 5px;\r\n   text-decoration: none;\r\n}\r\nDIV.ck_paged_loop_pager A:hover {\r\n   border: 1px solid #000;\r\n   color: black;\r\n   font-size: medium;\r\n   margin-right: 5px;\r\n   padding: 2px 5px;\r\n   text-decoration: none;\r\n}\r\nSPAN.ck_paged_loop_current {\r\n   border: 1px solid silver;\r\n   font-size: medium;\r\n   margin-right: 5px;\r\n   padding: 2px 5px;\r\n   text-decoration: none;\r\n   background-color: #809FFF;\r\n   color: white;\r\n}</pre><p></p><p>PagedSource.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.data.pagedloop;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\n\r\npublic class PagedSource&lt;T&gt; implements Iterable&lt;T&gt; {\r\n	private List&lt;T&gt; _source = new ArrayList&lt;T&gt;();\r\n\r\n	private List&lt;T&gt; _pageSource = new ArrayList&lt;T&gt;();\r\n\r\n	private Integer _iterableSize;\r\n\r\n	public PagedSource(Iterable&lt;T&gt; source) {\r\n		for (T aSource : source)\r\n			_source.add(aSource);\r\n	}\r\n\r\n	/**\r\n	 * @return\r\n	 *\r\n	 * @see java.lang.Iterable#iterator()\r\n	 */\r\n	public Iterator&lt;T&gt; iterator() {\r\n		return _pageSource.iterator();\r\n	}\r\n\r\n	public int getTotalRowCount() {\r\n		if (_iterableSize != null)\r\n			return _iterableSize;\r\n\r\n		_iterableSize = 0;\r\n\r\n		Iterator&lt;?&gt; it = _source.iterator();\r\n		while (it.hasNext()) {\r\n			it.next();\r\n			_iterableSize++;\r\n		}\r\n\r\n		return _iterableSize;\r\n	}\r\n\r\n	public void prepare(int startIndex, int endIndex) {\r\n		for (int i = startIndex; i &lt;= endIndex; i++) {\r\n			_pageSource.add(_source.get(i));\r\n		}\r\n	}\r\n\r\n}</pre><p></p><p>PagerPosition.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.data.pagedloop;\r\n\r\npublic enum PagerPosition {\r\n	/**\r\n	 * Position the pager above the paged content.\r\n	 */\r\n	TOP(true, false),\r\n\r\n	/**\r\n	 * Position the pager below the paged content (this is the default).\r\n	 */\r\n	BOTTOM(false, true),\r\n\r\n	/**\r\n	 * Show the pager above and below the paged content.\r\n	 */\r\n	BOTH(true, true),\r\n\r\n	/**\r\n	 * Don\'t show a pager (the application will need to supply its own\r\n	 * navigation mechanism).\r\n	 */\r\n	NONE(false, false);\r\n\r\n	private final boolean _matchTop;\r\n\r\n	private final boolean _matchBottom;\r\n\r\n	private PagerPosition(boolean matchTop, boolean matchBottom) {\r\n		_matchTop = matchTop;\r\n		_matchBottom = matchBottom;\r\n	}\r\n\r\n	public boolean isMatchBottom() {\r\n		return _matchBottom;\r\n	}\r\n\r\n	public boolean isMatchTop() {\r\n		return _matchTop;\r\n	}\r\n}</pre><p></p><p>PersonList2.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages.crud;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.PageActivationContext;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\nimport com.tapestry.app.components.pagedLoop.PagedLoop;\r\nimport com.tapestry.app.entities.Person;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class PersonList2 {\r\n\r\n	// 打开user读写\r\n	@Property\r\n	private Person person;\r\n\r\n	// 打开user阵列的读写\r\n	@Property\r\n	private List&lt;Person&gt; persons;\r\n\r\n	// 导入操作数据库的服务\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	// 当前页面接收user的id值\r\n	@PageActivationContext\r\n	private Long id;\r\n\r\n	// 开启PagedLoop\r\n	@Component(parameters = { &quot;source=persons&quot;, &quot;value=person&quot;, &quot;rowsPerPage=1&quot;, &quot;pagerPosition=bottom&quot; })\r\n	private PagedLoop personLoop;\r\n\r\n	// 页面加载时设置渲染\r\n	void setupRender() {\r\n		// 查询User数据表\r\n		StringBuffer sql = new StringBuffer();\r\n		sql.append(&quot;from Person&quot;);\r\n		persons = dao.findWithQuery(sql.toString());\r\n	}\r\n\r\n	// 单击eventlink执行删除操作\r\n	Object onDelete(Long id) {\r\n		dao.deleteByID(Person.class, id);\r\n		return this;\r\n	}\r\n\r\n}</pre><p></p><p>PersonList2.tml</p><div><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n &lt;style&gt;\r\n .table{border-collapse: collapse; }\r\n .table td,table th{border:1px solid #999; padding:5px;&quot;}\r\n .meul{list-style:none;}\r\n .meul li{ width:80px; float:left; hegiht:20px;}\r\n .clear{clear:both; height:0; display:block; overflow:hidden;}\r\n &lt;/style&gt;\r\n &lt;t:pagelink page=&quot;crud/PersonCreate&quot;&gt;添加用户&lt;/t:pagelink&gt;&lt;br/&gt;&lt;br/&gt;\r\n&lt;ul class=&quot;meul&quot;&gt;\r\n&lt;li&gt;id&lt;/li&gt;\r\n    &lt;li&gt;version&lt;/li&gt;\r\n    &lt;li&gt;firstName&lt;/li&gt;\r\n    &lt;li&gt;lastName&lt;/li&gt;\r\n    &lt;li&gt;region&lt;/li&gt;\r\n    &lt;li&gt;startDate&lt;/li&gt;\r\n    &lt;li&gt;操作&lt;/li&gt;\r\n    &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;\r\n&lt;div t:id=&quot;personLoop&quot;&gt;\r\n    &lt;li&gt;${person.id}&lt;/li&gt;\r\n    &lt;li&gt;${person.version}&lt;/li&gt;\r\n    &lt;li&gt;${person.firstName}&lt;/li&gt;\r\n    &lt;li&gt;${person.lastName}&lt;/li&gt;\r\n    &lt;li&gt;${person.region}&lt;/li&gt;\r\n    &lt;li&gt;${person.startDate}&lt;/li&gt;\r\n    &lt;li&gt;&lt;t:pagelink page=&quot;crud/PersonUpdate&quot; t:context=&quot;${person.id}&quot;&gt;修改&lt;/t:pagelink&gt;&lt;t:eventlink t:event=&quot;delete&quot; t:context=&quot;${person.id}&quot;&gt;删除&lt;/t:eventlink&gt;&lt;/li&gt;\r\n  &lt;/div&gt;\r\n  &lt;/ul&gt;\r\n&lt;/html&gt;</pre><br /></div>', 'Lesson 25：Tapestry PagedLoop', '');
INSERT INTO `td_c_technology` VALUES ('48', null, '2016-05-12 09:24:57', 'admin', '0755', '', 'admin', '2016-05-17 10:20:57', '<p>tapestry提供了树状组件tree，源码如下：</p><p>TreeBrowse.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.ValueEncoder;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.corelib.components.Tree;</div><div>import org.apache.tapestry5.tree.DefaultTreeModel;</div><div>import org.apache.tapestry5.tree.TreeModel;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.Stuff;</div><div>import com.tapestry.app.services.StuffTreeModelAdapter;</div><div>&nbsp;</div><div>public class TreeBrowse {</div><div>// Screen fields</div><div>&nbsp;</div><div>private TreeModel&lt;Stuff&gt; stuffModel;</div><div>&nbsp;</div><div>// Generally useful bits and pieces</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Tree tree;</div><div>&nbsp;</div><div>// The code</div><div>&nbsp;</div><div>void onClearExpansions() {</div><div>tree.clearExpansions();</div><div>}</div><div>&nbsp;</div><div>// Getters and setters</div><div>&nbsp;</div><div>public TreeModel&lt;Stuff&gt; getStuffModel() {</div><div>&nbsp;</div><div>if (stuffModel == null) {</div><div>ValueEncoder&lt;Stuff&gt; stuffEncoder = new ValueEncoder&lt;Stuff&gt;() {</div><div>&nbsp;</div><div>@Override</div><div>public String toClient(Stuff stuff) {</div><div>return stuff.uuid;</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public Stuff toValue(String uuid) {</div><div>return Stuff.ROOT.searchSubTree(uuid);</div><div>}</div><div>&nbsp;</div><div>};</div><div>stuffModel = new DefaultTreeModel&lt;Stuff&gt;(stuffEncoder, new StuffTreeModelAdapter(), Stuff.ROOT.children);</div><div>}</div><div>return stuffModel;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>TreeBrowse.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin: 20px;&quot;&gt;</div><div>&lt;a t:type=&quot;eventlink&quot; t:event=&quot;clearExpansions&quot;&gt;Clear Expansions&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&lt;t:tree t:id=&quot;tree&quot; model=&quot;stuffModel&quot;/&gt;&lt;br/&gt;</div><div>&lt;a t:type=&quot;pagelink&quot; t:page=&quot;TreeBrowse&quot; href=&quot;#&quot;&gt;Refresh&lt;/a&gt;</div><div>&lt;/div&gt;&nbsp;</div><div>&lt;/html&gt;</div></div><p>Stuff.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.entities;</div><div>&nbsp;</div><div>import java.util.List;</div><div>import java.util.UUID;</div><div>&nbsp;</div><div>import org.apache.tapestry5.ioc.internal.util.CollectionFactory;</div><div>&nbsp;</div><div>public class Stuff {</div><div>public static final Stuff ROOT = new Stuff(&quot;&lt;root&gt;&quot;);</div><div>&nbsp;</div><div>static {</div><div>ROOT.addChild(new Stuff(&quot;Pets&quot;).addChildrenNamed(&quot;Oscar&quot;, &quot;Gromit&quot;, &quot;Max&quot;, &quot;Roger&quot;, &quot;Cooper&quot;));</div><div>&nbsp;</div><div>ROOT.addChild(new Stuff(&quot;Games&quot;).addChild(</div><div>new Stuff(&quot;Board Games&quot;).addChildrenNamed(&quot;Settlers of Catan&quot;, &quot;Agricola&quot;, &quot;Ra&quot;, &quot;Risk&quot;, &quot;Dvonn&quot;))</div><div>.addChild(new Stuff(&quot;Card Games&quot;).addChildrenNamed(&quot;Magic the Gathering&quot;, &quot;Dominion&quot;, &quot;Mu&quot;)));</div><div>&nbsp;</div><div>Stuff numbers = new Stuff(&quot;Numbers&quot;);</div><div>for (int i = 0; i &lt; 100; i++) {</div><div>numbers.addChild(new Stuff(Integer.toString(i)));</div><div>}</div><div>ROOT.addChild(numbers);</div><div>}</div><div>&nbsp;</div><div>public final String uuid = UUID.randomUUID().toString();</div><div>public final String name;</div><div>public List&lt;Stuff&gt; children;</div><div>&nbsp;</div><div>public Stuff(String name) {</div><div>this.name = name;</div><div>}</div><div>&nbsp;</div><div>public Stuff addChild(Stuff child) {</div><div>if (children == null) {</div><div>children = CollectionFactory.newList();</div><div>}</div><div>&nbsp;</div><div>children.add(child);</div><div>&nbsp;</div><div>return this;</div><div>}</div><div>&nbsp;</div><div>public Stuff addChildrenNamed(String... names) {</div><div>for (String name : names) {</div><div>addChild(new Stuff(name));</div><div>}</div><div>&nbsp;</div><div>return this;</div><div>}</div><div>&nbsp;</div><div>public Stuff searchSubTree(String uuid) {</div><div>&nbsp;</div><div>if (this.uuid.equals(uuid)) {</div><div>return this;</div><div>}</div><div>&nbsp;</div><div>for (Stuff child : children) {</div><div>Stuff match = child.searchSubTree(uuid);</div><div>&nbsp;</div><div>if (match != null) {</div><div>return match;</div><div>}</div><div>}</div><div>&nbsp;</div><div>return null;</div><div>}</div><div>}</div><div>&nbsp;</div><p>&nbsp;</p><p>&nbsp;</p></div><p>StuffTreeModelAdapter.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.services;</div><div>&nbsp;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.tree.TreeModelAdapter;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.Stuff;</div><div>&nbsp;</div><div>public class StuffTreeModelAdapter implements TreeModelAdapter&lt;Stuff&gt; {</div><div>&nbsp;</div><div>@Override</div><div>public boolean isLeaf(Stuff stuff) {</div><div>return !hasChildren(stuff);</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public boolean hasChildren(Stuff stuff) {</div><div>return stuff.children != null &amp;&amp; !stuff.children.isEmpty();</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public List&lt;Stuff&gt; getChildren(Stuff stuff) {</div><div>return stuff.children;</div><div>}</div><div>&nbsp;</div><div>@Override</div><div>public String getLabel(Stuff stuff) {</div><div>return stuff.name;</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第二十六讲：tapestry的树状(tree)组件', '<p>TreeBrowse.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.ValueEncoder;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.corelib.components.Tree;\r\nimport org.apache.tapestry5.tree.DefaultTreeModel;\r\nimport org.apache.tapestry5.tree.TreeModel;\r\n\r\nimport com.tapestry.app.entities.Stuff;\r\nimport com.tapestry.app.services.StuffTreeModelAdapter;\r\n\r\npublic class TreeBrowse {\r\n	// Screen fields\r\n\r\n	private TreeModel&lt;Stuff&gt; stuffModel;\r\n\r\n	// Generally useful bits and pieces\r\n\r\n	@InjectComponent\r\n	private Tree tree;\r\n\r\n	// The code\r\n\r\n	void onClearExpansions() {\r\n		tree.clearExpansions();\r\n	}\r\n\r\n	// Getters and setters\r\n\r\n	public TreeModel&lt;Stuff&gt; getStuffModel() {\r\n\r\n		if (stuffModel == null) {\r\n			ValueEncoder&lt;Stuff&gt; stuffEncoder = new ValueEncoder&lt;Stuff&gt;() {\r\n\r\n				@Override\r\n				public String toClient(Stuff stuff) {\r\n					return stuff.uuid;\r\n				}\r\n\r\n				@Override\r\n				public Stuff toValue(String uuid) {\r\n					return Stuff.ROOT.searchSubTree(uuid);\r\n				}\r\n\r\n			};\r\n			stuffModel = new DefaultTreeModel&lt;Stuff&gt;(stuffEncoder, new StuffTreeModelAdapter(), Stuff.ROOT.children);\r\n		}\r\n		return stuffModel;\r\n	}\r\n}</pre></p><p>TreeBrowse.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin: 20px;&quot;&gt;\r\n&lt;a t:type=&quot;eventlink&quot; t:event=&quot;clearExpansions&quot;&gt;Clear Expansions&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;\r\n&lt;t:tree t:id=&quot;tree&quot; model=&quot;stuffModel&quot;/&gt;&lt;br/&gt;\r\n&lt;a t:type=&quot;pagelink&quot; t:page=&quot;TreeBrowse&quot; href=&quot;#&quot;&gt;Refresh&lt;/a&gt;\r\n&lt;/div&gt; \r\n&lt;/html&gt;</pre></p><p>Stuff.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.entities;\r\n\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\nimport org.apache.tapestry5.ioc.internal.util.CollectionFactory;\r\n\r\npublic class Stuff {\r\n	public static final Stuff ROOT = new Stuff(&quot;&lt;root&gt;&quot;);\r\n\r\n	static {\r\n		ROOT.addChild(new Stuff(&quot;Pets&quot;).addChildrenNamed(&quot;Oscar&quot;, &quot;Gromit&quot;, &quot;Max&quot;, &quot;Roger&quot;, &quot;Cooper&quot;));\r\n\r\n		ROOT.addChild(new Stuff(&quot;Games&quot;)\r\n				.addChild(new Stuff(&quot;Board Games&quot;).addChildrenNamed(&quot;Settlers of Catan&quot;, &quot;Agricola&quot;, &quot;Ra&quot;, &quot;Risk&quot;,\r\n						&quot;Dvonn&quot;))\r\n				.addChild(new Stuff(&quot;Card Games&quot;).addChildrenNamed(&quot;Magic the Gathering&quot;, &quot;Dominion&quot;, &quot;Mu&quot;)));\r\n\r\n		Stuff numbers = new Stuff(&quot;Numbers&quot;);\r\n		for (int i = 0; i &lt; 100; i++) {\r\n			numbers.addChild(new Stuff(Integer.toString(i)));\r\n		}\r\n		ROOT.addChild(numbers);\r\n	}\r\n\r\n	public final String uuid = UUID.randomUUID().toString();\r\n	public final String name;\r\n	public List&lt;Stuff&gt; children;\r\n\r\n	public Stuff(String name) {\r\n		this.name = name;\r\n	}\r\n\r\n	public Stuff addChild(Stuff child) {\r\n		if (children == null) {\r\n			children = CollectionFactory.newList();\r\n		}\r\n\r\n		children.add(child);\r\n\r\n		return this;\r\n	}\r\n\r\n	public Stuff addChildrenNamed(String... names) {\r\n		for (String name : names) {\r\n			addChild(new Stuff(name));\r\n		}\r\n\r\n		return this;\r\n	}\r\n\r\n	public Stuff searchSubTree(String uuid) {\r\n\r\n		if (this.uuid.equals(uuid)) {\r\n			return this;\r\n		}\r\n\r\n		for (Stuff child : children) {\r\n			Stuff match = child.searchSubTree(uuid);\r\n\r\n			if (match != null) {\r\n				return match;\r\n			}\r\n		}\r\n\r\n		return null;\r\n	}\r\n}</pre></p><p>StuffTreeModelAdapter.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.services;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.tree.TreeModelAdapter;\r\n\r\nimport com.tapestry.app.entities.Stuff;\r\n\r\npublic class StuffTreeModelAdapter implements TreeModelAdapter&lt;Stuff&gt; {\r\n\r\n	@Override\r\n	public boolean isLeaf(Stuff stuff) {\r\n		return !hasChildren(stuff);\r\n	}\r\n\r\n	@Override\r\n	public boolean hasChildren(Stuff stuff) {\r\n		return stuff.children != null &amp;&amp; !stuff.children.isEmpty();\r\n	}\r\n\r\n	@Override\r\n	public List&lt;Stuff&gt; getChildren(Stuff stuff) {\r\n		return stuff.children;\r\n	}\r\n\r\n	@Override\r\n	public String getLabel(Stuff stuff) {\r\n		return stuff.name;\r\n	}\r\n\r\n}</pre><br /></p>', 'Lesson 26：Tapestry Tree', '');
INSERT INTO `td_c_technology` VALUES ('49', null, '2016-05-12 09:25:27', 'admin', '0755', '', 'admin', '2016-05-17 10:25:44', '<p>tapestry的js库基于prototype，写法非常简单。这个实例JS实现了当输入单字符时显示绿色、双字符时显示红色。代码如下：</p><p>JavaScript.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library=&quot;context:assets/js/JavaScript.js&quot;)</div><div>public class JavaScript {</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>public void setupRender() {</div><div>&nbsp;</div><div>javaScriptSupport.addScript(&quot;new ColorSwitcher();&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>JavaScript.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot;&gt;</div><div>First name: &lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;&lt;br/&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>JavaScript.js</p><div class=\"code\"><div>ColorSwitcher = Class.create( {</div><div>&nbsp;</div><div>initialize : function() {</div><div>this.element = $(\'firstName\');</div><div>Event.observe(this.element, \'keyup\', this.doSwitchColor.bindAsEventListener(this));</div><div>this.element.setStyle({color: \'red\'});</div><div>},</div><div>&nbsp;</div><div>doSwitchColor : function(e) {</div><div>if (this.element.getStyle(\'color\') == \'red\') {</div><div>this.element.setStyle({color: \'green\'});</div><div>}</div><div>else {</div><div>this.element.setStyle({color: \'red\'});</div><div>}</div><div>}</div><div>&nbsp;</div><div>} )</div></div>', null, '17', '第二十七讲：tapestry与javaScript', '<p>JavaScript.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/JavaScript.js&quot;)\r\npublic class JavaScript {\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String firstName;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	public void setupRender() {\r\n\r\n		javaScriptSupport.addScript(&quot;new ColorSwitcher();&quot;);\r\n	}\r\n}</pre></p><p>JavaScript.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot;&gt;\r\nFirst name: &lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;&lt;br/&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>JavaScript.js</p><p><pre class=\"prettyprint lang-js\">ColorSwitcher = Class.create( {\r\n \r\ninitialize : function() {\r\nthis.element = $(\'firstName\');\r\nEvent.observe(this.element, \'keyup\', this.doSwitchColor.bindAsEventListener(this));\r\nthis.element.setStyle({color: \'red\'});\r\n},\r\n \r\ndoSwitchColor : function(e) {\r\nif (this.element.getStyle(\'color\') == \'red\') {\r\nthis.element.setStyle({color: \'green\'});\r\n}\r\nelse {\r\nthis.element.setStyle({color: \'red\'});\r\n}\r\n}\r\n \r\n})</pre><br /></p>', 'Lesson 27：Tapestry JavaScript', '');
INSERT INTO `td_c_technology` VALUES ('50', null, '2016-05-12 09:26:04', 'admin', '0755', '', 'admin', '2016-05-17 10:28:44', '<p>tapestry与可重复使用的javaScript，实现方法是给函数传变量，代码如下：</p><p>&nbsp;ReusableJavaScript.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library=&quot;context:assets/js/textbox_hint.js&quot;)</div><div>public class ReusableJavaScript {</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String lastName;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>public void setupRender() {</div><div>&nbsp;</div><div>javaScriptSupport.addScript(String.format(&quot;new TextboxHint(\'%s\', \'%s\', \'%s\');&quot;, &quot;firstName&quot;,</div><div>&quot;Enter First Name&quot;, &quot;#ff6600&quot;));</div><div>javaScriptSupport.addScript(String.format(&quot;new TextboxHint(\'%s\', \'%s\', \'%s\');&quot;, &quot;lastName&quot;, &quot;Enter Last Name&quot;,</div><div>&quot;blue&quot;));</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>ReusableJavaScript.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>textbox_hint.js</p><div class=\"code\"><div>TextboxHint = Class.create( {</div><div>&nbsp;</div><div>initialize : function(textboxId, hintText, hintColor) {</div><div>this.textbox = $(textboxId);</div><div>this.hintText = hintText;</div><div>this.hintColor = hintColor;</div><div>this.normalColor = this.textbox.getStyle(\'color\');</div><div>&nbsp;</div><div>Event.observe(this.textbox, \'focus\', this.doClearHint.bindAsEventListener(this));</div><div>Event.observe(this.textbox, \'blur\', this.doCheckHint.bindAsEventListener(this));</div><div>Event.observe(this.textbox, \'change\', this.doCheckHint.bindAsEventListener(this));</div><div>Event.observe(this.textbox.form, \'submit\', this.doClearHint.bindAsEventListener(this));</div><div>&nbsp;</div><div>this.doCheckHint();</div><div>},</div><div>&nbsp;</div><div>doClearHint : function(e) {</div><div>if (this.textbox.value == this.hintText) {</div><div>this.textbox.value = &quot;&quot;;</div><div>}</div><div>this.textbox.setStyle({color: this.normalColor});</div><div>},</div><div>&nbsp;</div><div>doCheckHint : function(e) {</div><div>&nbsp;</div><div>// If field is empty, put the hintText in it and set its color to hintColor</div><div>&nbsp;</div><div>if (this.textbox.value.length == 0) {</div><div>this.textbox.value = this.hintText;</div><div>this.textbox.setStyle({color: this.hintColor});</div><div>}</div><div>&nbsp;</div><div>// Else if field contains hintText, set its color to hintColor</div><div>&nbsp;</div><div>else if (this.textbox.value == this.hintText) {</div><div>this.textbox.setStyle({color: this.hintColor});</div><div>}</div><div>&nbsp;</div><div>// Else, set the field\'s color to its normal color</div><div>&nbsp;</div><div>else {</div><div>this.textbox.setStyle({color: this.normalColor});</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div><div>})</div></div>', null, '17', '第二十八讲：tapestry与可重复使用的javaScript', '<p>ReusableJavaScript.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/textbox_hint.js&quot;)\r\npublic class ReusableJavaScript {\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String firstName;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String lastName;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	public void setupRender() {\r\n\r\n		javaScriptSupport.addScript(\r\n				String.format(&quot;new TextboxHint(\'%s\', \'%s\', \'%s\');&quot;, &quot;firstName&quot;, &quot;Enter First Name&quot;, &quot;#ff6600&quot;));\r\n		javaScriptSupport\r\n				.addScript(String.format(&quot;new TextboxHint(\'%s\', \'%s\', \'%s\');&quot;, &quot;lastName&quot;, &quot;Enter Last Name&quot;, &quot;blue&quot;));\r\n	}\r\n}</pre></p><p>ReusableJavaScript.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>textbox_hint.js</p><p><pre class=\"prettyprint lang-js\">TextboxHint = Class.create( {\r\n \r\ninitialize : function(textboxId, hintText, hintColor) {\r\nthis.textbox = $(textboxId);\r\nthis.hintText = hintText;\r\nthis.hintColor = hintColor;\r\nthis.normalColor = this.textbox.getStyle(\'color\');\r\n \r\nEvent.observe(this.textbox, \'focus\', this.doClearHint.bindAsEventListener(this));\r\nEvent.observe(this.textbox, \'blur\', this.doCheckHint.bindAsEventListener(this));\r\nEvent.observe(this.textbox, \'change\', this.doCheckHint.bindAsEventListener(this));\r\nEvent.observe(this.textbox.form, \'submit\', this.doClearHint.bindAsEventListener(this));\r\n \r\nthis.doCheckHint();\r\n},\r\n \r\ndoClearHint : function(e) {\r\nif (this.textbox.value == this.hintText) {\r\nthis.textbox.value = &quot;&quot;;\r\n}\r\nthis.textbox.setStyle({color: this.normalColor});\r\n},\r\n \r\ndoCheckHint : function(e) {\r\n \r\n// If field is empty, put the hintText in it and set its color to hintColor\r\n \r\nif (this.textbox.value.length == 0) {\r\nthis.textbox.value = this.hintText;\r\nthis.textbox.setStyle({color: this.hintColor});\r\n}\r\n \r\n// Else if field contains hintText, set its color to hintColor\r\n \r\nelse if (this.textbox.value == this.hintText) {\r\nthis.textbox.setStyle({color: this.hintColor});\r\n}\r\n \r\n// Else, set the field\'s color to its normal color\r\n \r\nelse {\r\nthis.textbox.setStyle({color: this.normalColor});\r\n}\r\n \r\n}\r\n \r\n})</pre><br /></p>', 'Lesson 28：Tapestry Reusable JavaScript', '');
INSERT INTO `td_c_technology` VALUES ('51', null, '2016-05-12 09:26:31', 'admin', '0755', '', 'admin', '2016-05-17 10:33:27', '<p>源码如下：</p><p>RobustJavaScript.java</p><div class=\"code\"><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library=&quot;context:assets/js/robust_textbox_hint.js&quot;)</div><div>public class RobustJavaScript {</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String lastName;</div><div>&nbsp;</div><div>@Property</div><div>private String firstNameId;</div><div>&nbsp;</div><div>@Property</div><div>private String lastNameId;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>public void setupRender() {</div><div>firstNameId = &quot;firstName&quot;;</div><div>lastNameId = &quot;lastName&quot;;</div><div>&nbsp;</div><div>JSONObject spec = new JSONObject();</div><div>spec.put(&quot;textboxId&quot;, firstNameId);</div><div>spec.put(&quot;hintText&quot;, &quot;Enter First Name&quot;);</div><div>spec.put(&quot;hintColor&quot;, &quot;#ff6600&quot;);</div><div>javaScriptSupport.addInitializerCall(&quot;textboxHint&quot;, spec);</div><div>&nbsp;</div><div>JSONObject spec2 = new JSONObject();</div><div>spec2.put(&quot;textboxId&quot;, lastNameId);</div><div>spec2.put(&quot;hintText&quot;, &quot;Enter Last Name&quot;);</div><div>spec2.put(&quot;hintColor&quot;, &quot;#808080&quot;);</div><div>javaScriptSupport.addInitializerCall(&quot;textboxHint&quot;, spec2);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>RobustJavaScript.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>robust_textbox_hint.js</p><div class=\"code\"><div>TextboxHint = Class.create( {</div><div>&nbsp;</div><div>initialize : function(textboxId, hintText, hintColor) {</div><div>this.textbox = $(textboxId);</div><div>this.hintText = hintText;</div><div>this.hintColor = hintColor;</div><div>this.normalColor = this.textbox.getStyle(\'color\');</div><div>&nbsp;</div><div>Event.observe(this.textbox, \'focus\', this.doClearHint.bindAsEventListener(this));</div><div>Event.observe(this.textbox, \'blur\', this.doCheckHint.bindAsEventListener(this));</div><div>Event.observe(this.textbox, \'change\', this.doCheckHint.bindAsEventListener(this));</div><div>Event.observe(this.textbox.form, \'submit\', this.doClearHint.bindAsEventListener(this));</div><div>&nbsp;</div><div>this.doCheckHint();</div><div>},</div><div>&nbsp;</div><div>doClearHint : function(e) {</div><div>if (this.textbox.value == this.hintText) {</div><div>this.textbox.value = &quot;&quot;;</div><div>}</div><div>this.textbox.setStyle({color: this.normalColor});</div><div>},</div><div>&nbsp;</div><div>doCheckHint : function(e) {</div><div>&nbsp;</div><div>// If field is empty, put the hintText in it and set its color to hintColor</div><div>&nbsp;</div><div>if (this.textbox.value.length == 0) {</div><div>this.textbox.value = this.hintText;</div><div>this.textbox.setStyle({color: this.hintColor});</div><div>}</div><div>&nbsp;</div><div>// Else if field contains hintText, set its color to hintColor</div><div>&nbsp;</div><div>else if (this.textbox.value == this.hintText) {</div><div>this.textbox.setStyle({color: this.hintColor});</div><div>}</div><div>&nbsp;</div><div>// Else, set the field\'s color to its normal color</div><div>&nbsp;</div><div>else {</div><div>this.textbox.setStyle({color: this.normalColor});</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div><div>} )</div><div>&nbsp;</div><div>Tapestry.Initializer.textboxHint = function(spec) {</div><div>&nbsp; &nbsp; new TextboxHint(spec.textboxId, spec.hintText, spec.hintColor);</div><div>}</div></div>', null, '17', '第二十九讲：tapestry更好的可重复使用javaScript', '<p>RobustJavaScript.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/robust_textbox_hint.js&quot;)\r\npublic class RobustJavaScript {\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String firstName;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String lastName;\r\n\r\n	@Property\r\n	private String firstNameId;\r\n\r\n	@Property\r\n	private String lastNameId;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	public void setupRender() {\r\n		firstNameId = &quot;firstName&quot;;\r\n		lastNameId = &quot;lastName&quot;;\r\n\r\n		JSONObject spec = new JSONObject();\r\n		spec.put(&quot;textboxId&quot;, firstNameId);\r\n		spec.put(&quot;hintText&quot;, &quot;Enter First Name&quot;);\r\n		spec.put(&quot;hintColor&quot;, &quot;#ff6600&quot;);\r\n		javaScriptSupport.addInitializerCall(&quot;textboxHint&quot;, spec);\r\n\r\n		JSONObject spec2 = new JSONObject();\r\n		spec2.put(&quot;textboxId&quot;, lastNameId);\r\n		spec2.put(&quot;hintText&quot;, &quot;Enter Last Name&quot;);\r\n		spec2.put(&quot;hintColor&quot;, &quot;#808080&quot;);\r\n		javaScriptSupport.addInitializerCall(&quot;textboxHint&quot;, spec2);\r\n	}\r\n}</pre></p><p>RobustJavaScript.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>robust_textbox_hint.js</p><p><pre class=\"prettyprint lang-js\">TextboxHint = Class.create( {\r\n \r\ninitialize : function(textboxId, hintText, hintColor) {\r\nthis.textbox = $(textboxId);\r\nthis.hintText = hintText;\r\nthis.hintColor = hintColor;\r\nthis.normalColor = this.textbox.getStyle(\'color\');\r\n \r\nEvent.observe(this.textbox, \'focus\', this.doClearHint.bindAsEventListener(this));\r\nEvent.observe(this.textbox, \'blur\', this.doCheckHint.bindAsEventListener(this));\r\nEvent.observe(this.textbox, \'change\', this.doCheckHint.bindAsEventListener(this));\r\nEvent.observe(this.textbox.form, \'submit\', this.doClearHint.bindAsEventListener(this));\r\n \r\nthis.doCheckHint();\r\n},\r\n \r\ndoClearHint : function(e) {\r\nif (this.textbox.value == this.hintText) {\r\nthis.textbox.value = &quot;&quot;;\r\n}\r\nthis.textbox.setStyle({color: this.normalColor});\r\n},\r\n \r\ndoCheckHint : function(e) {\r\n \r\n// If field is empty, put the hintText in it and set its color to hintColor\r\n \r\nif (this.textbox.value.length == 0) {\r\nthis.textbox.value = this.hintText;\r\nthis.textbox.setStyle({color: this.hintColor});\r\n}\r\n \r\n// Else if field contains hintText, set its color to hintColor\r\n \r\nelse if (this.textbox.value == this.hintText) {\r\nthis.textbox.setStyle({color: this.hintColor});\r\n}\r\n \r\n// Else, set the field\'s color to its normal color\r\n \r\nelse {\r\nthis.textbox.setStyle({color: this.normalColor});\r\n}\r\n \r\n}\r\n \r\n} )\r\n \r\nTapestry.Initializer.textboxHint = function(spec) {\r\n    new TextboxHint(spec.textboxId, spec.hintText, spec.hintColor);\r\n}</pre><br /></p>', 'Lesson 29：Tapestry Robust JavaScript', '');
INSERT INTO `td_c_technology` VALUES ('52', null, '2016-05-12 09:27:01', 'admin', '0755', '', 'admin', '2016-05-17 10:37:18', '<p>此例还是使用上一篇的实例JS，看混合的方法，实在是太强大了！！</p><p>JavaScriptMixin.java<br /></p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>&nbsp;</div><div>public class JavaScriptMixin {</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String lastName;</div><div>}</div><div>&nbsp;</div></div><p>JavaScriptMixin.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter First Name&quot; t:hintColor=&quot;#ff6600&quot;/&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter Last Name&quot; t:hintColor=&quot;#808080&quot;/&gt;&lt;br/&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>TextboxHint.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.mixins;</div><div>&nbsp;</div><div>import org.apache.tapestry5.BindingConstants;</div><div>import org.apache.tapestry5.ClientElement;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.InjectContainer;</div><div>import org.apache.tapestry5.annotations.Parameter;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library=&quot;context:assets/js/robust_textbox_hint.js&quot;)</div><div>public class TextboxHint {</div><div>@Parameter(required = true, defaultPrefix = BindingConstants.LITERAL)</div><div>private String hintText;</div><div>&nbsp;</div><div>@Parameter(required = true, defaultPrefix = BindingConstants.LITERAL)</div><div>private String hintColor;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>@InjectContainer</div><div>private ClientElement clientElement;</div><div>&nbsp;</div><div>public void afterRender() {</div><div>&nbsp;</div><div>JSONObject spec = new JSONObject();</div><div>spec.put(&quot;textboxId&quot;, clientElement.getClientId());</div><div>spec.put(&quot;hintText&quot;, hintText);</div><div>spec.put(&quot;hintColor&quot;, hintColor);</div><div>javaScriptSupport.addInitializerCall(&quot;textboxHint&quot;, spec);</div><div>}</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第三十讲：tapestry强大的javaScript混合(mixins)', '<p>JavaScriptMixin.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class JavaScriptMixin {\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String firstName;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String lastName;\r\n}</pre></p><p>JavaScriptMixin.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter First Name&quot; t:hintColor=&quot;#ff6600&quot;/&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter Last Name&quot; t:hintColor=&quot;#808080&quot;/&gt;&lt;br/&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>TextboxHint.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.mixins;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.InjectContainer;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/robust_textbox_hint.js&quot;)\r\npublic class TextboxHint {\r\n	@Parameter(required = true, defaultPrefix = BindingConstants.LITERAL)\r\n	private String hintText;\r\n\r\n	@Parameter(required = true, defaultPrefix = BindingConstants.LITERAL)\r\n	private String hintColor;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	@InjectContainer\r\n	private ClientElement clientElement;\r\n\r\n	public void afterRender() {\r\n\r\n		JSONObject spec = new JSONObject();\r\n		spec.put(&quot;textboxId&quot;, clientElement.getClientId());\r\n		spec.put(&quot;hintText&quot;, hintText);\r\n		spec.put(&quot;hintColor&quot;, hintColor);\r\n		javaScriptSupport.addInitializerCall(&quot;textboxHint&quot;, spec);\r\n	}\r\n}</pre><br /></p>', 'Lesson 30：Tapestry JavaScript Mixin', '');
INSERT INTO `td_c_technology` VALUES ('53', null, '2016-05-12 09:27:19', 'admin', '0755', '', 'admin', '2016-05-17 10:45:12', '<p>源码如下：</p><p>CreatingMixins1.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.annotations.SessionState;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.MyOrder;</div><div>&nbsp;</div><div>public class CreatingMixins1 {</div><div>@SessionState</div><div>@Property</div><div>private MyOrder myOrder;</div><div>&nbsp;</div><div>void setupRender() {</div><div>myOrder.setApplesQuantity(0);</div><div>myOrder.setOrangesQuantity(0);</div><div>myOrder.setBananasQuantity(0);</div><div>}</div><div>&nbsp;</div><div>Object onSuccessFromPlainForm() {</div><div>orderOneApple();</div><div>return CreatingMixins2.class;</div><div>}</div><div>&nbsp;</div><div>Object onOrderOneOrange() {</div><div>orderOneOrange();</div><div>return CreatingMixins2.class;</div><div>}</div><div>&nbsp;</div><div>Object onActionFromOrderOneBanana() {</div><div>orderOneBanana();</div><div>return CreatingMixins2.class;</div><div>}</div><div>&nbsp;</div><div>Object onSuccessFromMixinForm() {</div><div>orderOneApple();</div><div>return CreatingMixins2.class;</div><div>}</div><div>&nbsp;</div><div>Object onActionFromOrderOneBananaWithMixin() {</div><div>orderOneBanana();</div><div>return CreatingMixins2.class;</div><div>}</div><div>&nbsp;</div><div>void orderOneApple() {</div><div>sleep(1500); // Sleep 1.5 seconds to simulate busy system</div><div>myOrder.setApplesQuantity(myOrder.getApplesQuantity() + 1);</div><div>}</div><div>&nbsp;</div><div>void orderOneOrange() {</div><div>sleep(1500); // Sleep 1.5 seconds to simulate busy system</div><div>myOrder.setOrangesQuantity(myOrder.getOrangesQuantity() + 1);</div><div>}</div><div>&nbsp;</div><div>void orderOneBanana() {</div><div>sleep(1500); // Sleep 1.5 seconds to simulate busy system</div><div>myOrder.setBananasQuantity(myOrder.getBananasQuantity() + 1);</div><div>}</div><div>&nbsp;</div><div>private void sleep(long duration) {</div><div>try {</div><div>Thread.sleep(duration);</div><div>}</div><div>catch (InterruptedException e) {</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>CreatingMixins1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;plainForm&quot;&gt;</div><div>&lt;div style=&quot;padding: 20px 50px;&quot;&gt;</div><div>&lt;input t:type=&quot;submit&quot; value=&quot;Order 1 Apple&quot;/&gt;</div><div>&lt;a t:type=&quot;eventlink&quot; t:event=&quot;orderOneOrange&quot; href=&quot;#&quot;&gt;Order 1 Orange&lt;/a&gt;</div><div>&lt;a t:type=&quot;actionlink&quot; t:id=&quot;orderOneBanana&quot; href=&quot;#&quot;&gt;Order 1 Banana&lt;/a&gt;</div><div>&lt;/div&gt;</div><div>&lt;/form&gt;</div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;mixinForm&quot; t:clientValidation=&quot;blur&quot;&gt;</div><div>&lt;div style=&quot;padding: 20px 50px;&quot;&gt;</div><div>&lt;input t:type=&quot;submit&quot; value=&quot;Order 1 Apple&quot; t:mixins=&quot;clickonce&quot;/&gt;</div><div>&lt;a t:type=&quot;eventlink&quot; t:event=&quot;orderOneOrange&quot; t:mixins=&quot;clickonce&quot; href=&quot;#&quot;&gt;Order 1 Orange&lt;/a&gt;</div><div>&lt;a t:type=&quot;actionlink&quot; t:id=&quot;orderOneBananaWithMixin&quot; t:mixins=&quot;clickonce&quot; href=&quot;#&quot;&gt;Order 1 Banana&lt;/a&gt;</div><div>&lt;/div&gt;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>ClickOnce.js</p><div class=\"code\"><div>var alreadyClickedOnce = false;</div><div>&nbsp;</div><div>ClickOnce = Class.create( {</div><div>&nbsp;</div><div>initialize: function(elementId) {</div><div>Event.observe($(elementId), \'click\', this.doClickOnce.bindAsEventListener(this));</div><div>},</div><div>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>doClickOnce: function(e) {</div><div>if (alreadyClickedOnce) {</div><div>e.stop();</div><div>}</div><div>alreadyClickedOnce = true;</div><div>}</div><div>&nbsp;</div><div>} )</div><div>&nbsp;</div><div>Tapestry.Initializer.clickOnce = function(spec) {</div><div>&nbsp; &nbsp; new ClickOnce(spec.elementId);</div><div>}</div></div><p>ClickOnce.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.mixins;</div><div>&nbsp;</div><div>import org.apache.tapestry5.ClientElement;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.InjectContainer;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library=&quot;context:assets/js/ClickOnce.js&quot;)</div><div>public class ClickOnce {</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>@InjectContainer</div><div>private ClientElement clientElement;</div><div>&nbsp;</div><div>public void afterRender() {</div><div>&nbsp;</div><div>JSONObject spec = new JSONObject();</div><div>spec.put(&quot;elementId&quot;, clientElement.getClientId());</div><div>javaScriptSupport.addInitializerCall(&quot;clickOnce&quot;, spec);</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>CreatingMixins2.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.annotations.SessionState;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.MyOrder;</div><div>&nbsp;</div><div>public class CreatingMixins2 {</div><div>@SessionState</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private MyOrder myOrder;</div><div>}</div><div>&nbsp;</div></div><p>CreatingMixins2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;padding: 20px 50px;&quot;&gt;</div><div>You have ordered ${myOrder.applesQuantity} apples, ${myOrder.orangesQuantity} oranges, ${myOrder.bananasQuantity} bananas.</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div><p>MyOrder.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.entities;</div><div>&nbsp;</div><div>public class MyOrder {</div><div>private int applesQuantity;</div><div>private int orangesQuantity;</div><div>private int bananasQuantity;</div><div>&nbsp;</div><div>public int getApplesQuantity() {</div><div>return applesQuantity;</div><div>}</div><div>&nbsp;</div><div>public void setApplesQuantity(int applesQuantity) {</div><div>this.applesQuantity = applesQuantity;</div><div>}</div><div>&nbsp;</div><div>public int getOrangesQuantity() {</div><div>return orangesQuantity;</div><div>}</div><div>&nbsp;</div><div>public void setOrangesQuantity(int orangesQuantity) {</div><div>this.orangesQuantity = orangesQuantity;</div><div>}</div><div>&nbsp;</div><div>public int getBananasQuantity() {</div><div>return bananasQuantity;</div><div>}</div><div>&nbsp;</div><div>public void setBananasQuantity(int bananasQuantity) {</div><div>this.bananasQuantity = bananasQuantity;</div><div>}</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第三十一讲：tapestry的javaScript混合(mixins)统计点击数', '<p>CreatingMixins1.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.annotations.SessionState;\r\n\r\nimport com.tapestry.app.entities.MyOrder;\r\n\r\npublic class CreatingMixins1 {\r\n	@SessionState\r\n	@Property\r\n	private MyOrder myOrder;\r\n\r\n	void setupRender() {\r\n		myOrder.setApplesQuantity(0);\r\n		myOrder.setOrangesQuantity(0);\r\n		myOrder.setBananasQuantity(0);\r\n	}\r\n\r\n	Object onSuccessFromPlainForm() {\r\n		orderOneApple();\r\n		return CreatingMixins2.class;\r\n	}\r\n\r\n	Object onOrderOneOrange() {\r\n		orderOneOrange();\r\n		return CreatingMixins2.class;\r\n	}\r\n\r\n	Object onActionFromOrderOneBanana() {\r\n		orderOneBanana();\r\n		return CreatingMixins2.class;\r\n	}\r\n\r\n	Object onSuccessFromMixinForm() {\r\n		orderOneApple();\r\n		return CreatingMixins2.class;\r\n	}\r\n\r\n	Object onActionFromOrderOneBananaWithMixin() {\r\n		orderOneBanana();\r\n		return CreatingMixins2.class;\r\n	}\r\n\r\n	void orderOneApple() {\r\n		sleep(1500); // Sleep 1.5 seconds to simulate busy system\r\n		myOrder.setApplesQuantity(myOrder.getApplesQuantity() + 1);\r\n	}\r\n\r\n	void orderOneOrange() {\r\n		sleep(1500); // Sleep 1.5 seconds to simulate busy system\r\n		myOrder.setOrangesQuantity(myOrder.getOrangesQuantity() + 1);\r\n	}\r\n\r\n	void orderOneBanana() {\r\n		sleep(1500); // Sleep 1.5 seconds to simulate busy system\r\n		myOrder.setBananasQuantity(myOrder.getBananasQuantity() + 1);\r\n	}\r\n\r\n	private void sleep(long duration) {\r\n		try {\r\n			Thread.sleep(duration);\r\n		} catch (InterruptedException e) {\r\n		}\r\n	}\r\n}</pre></p><p>CreatingMixins1.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot; t:id=&quot;plainForm&quot;&gt;\r\n&lt;div style=&quot;padding: 20px 50px;&quot;&gt;\r\n&lt;input t:type=&quot;submit&quot; value=&quot;Order 1 Apple&quot;/&gt;\r\n&lt;a t:type=&quot;eventlink&quot; t:event=&quot;orderOneOrange&quot; href=&quot;#&quot;&gt;Order 1 Orange&lt;/a&gt;\r\n&lt;a t:type=&quot;actionlink&quot; t:id=&quot;orderOneBanana&quot; href=&quot;#&quot;&gt;Order 1 Banana&lt;/a&gt;\r\n&lt;/div&gt;\r\n&lt;/form&gt;\r\n&lt;form t:type=&quot;form&quot; t:id=&quot;mixinForm&quot; t:clientValidation=&quot;blur&quot;&gt;\r\n&lt;div style=&quot;padding: 20px 50px;&quot;&gt;\r\n&lt;input t:type=&quot;submit&quot; value=&quot;Order 1 Apple&quot; t:mixins=&quot;clickonce&quot;/&gt;\r\n&lt;a t:type=&quot;eventlink&quot; t:event=&quot;orderOneOrange&quot; t:mixins=&quot;clickonce&quot; href=&quot;#&quot;&gt;Order 1 Orange&lt;/a&gt;\r\n&lt;a t:type=&quot;actionlink&quot; t:id=&quot;orderOneBananaWithMixin&quot; t:mixins=&quot;clickonce&quot; href=&quot;#&quot;&gt;Order 1 Banana&lt;/a&gt;\r\n&lt;/div&gt;\r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre></p><p>ClickOnce.js</p><p><pre class=\"prettyprint lang-js\">var alreadyClickedOnce = false;\r\n \r\nClickOnce = Class.create( {\r\n \r\ninitialize: function(elementId) {\r\nEvent.observe($(elementId), \'click\', this.doClickOnce.bindAsEventListener(this));\r\n},\r\n        \r\ndoClickOnce: function(e) {\r\nif (alreadyClickedOnce) {\r\ne.stop();\r\n}\r\nalreadyClickedOnce = true;\r\n}\r\n \r\n} )\r\n \r\nTapestry.Initializer.clickOnce = function(spec) {\r\n    new ClickOnce(spec.elementId);\r\n}</pre></p><p>ClickOnce.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.mixins;\r\n\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.InjectContainer;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/ClickOnce.js&quot;)\r\npublic class ClickOnce {\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	@InjectContainer\r\n	private ClientElement clientElement;\r\n\r\n	public void afterRender() {\r\n\r\n		JSONObject spec = new JSONObject();\r\n		spec.put(&quot;elementId&quot;, clientElement.getClientId());\r\n		javaScriptSupport.addInitializerCall(&quot;clickOnce&quot;, spec);\r\n	}\r\n\r\n}</pre></p><p>CreatingMixins2.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.annotations.SessionState;\r\n\r\nimport com.tapestry.app.entities.MyOrder;\r\n\r\npublic class CreatingMixins2 {\r\n	@SessionState\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private MyOrder myOrder;\r\n}</pre><br /></p><p>CreatingMixins2.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;padding: 20px 50px;&quot;&gt;\r\nYou have ordered ${myOrder.applesQuantity} apples, ${myOrder.orangesQuantity} oranges, ${myOrder.bananasQuantity} bananas.\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre></p><p>MyOrder.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.entities;\r\n\r\npublic class MyOrder {\r\n	private int applesQuantity;\r\n	private int orangesQuantity;\r\n	private int bananasQuantity;\r\n\r\n	public int getApplesQuantity() {\r\n		return applesQuantity;\r\n	}\r\n\r\n	public void setApplesQuantity(int applesQuantity) {\r\n		this.applesQuantity = applesQuantity;\r\n	}\r\n\r\n	public int getOrangesQuantity() {\r\n		return orangesQuantity;\r\n	}\r\n\r\n	public void setOrangesQuantity(int orangesQuantity) {\r\n		this.orangesQuantity = orangesQuantity;\r\n	}\r\n\r\n	public int getBananasQuantity() {\r\n		return bananasQuantity;\r\n	}\r\n\r\n	public void setBananasQuantity(int bananasQuantity) {\r\n		this.bananasQuantity = bananasQuantity;\r\n	}\r\n}</pre><br /></p>', 'Lesson 31：Tapestry JavaScript Mixin Count', '');
INSERT INTO `td_c_technology` VALUES ('54', null, '2016-05-12 09:27:56', 'admin', '0755', '', 'admin', '2016-05-17 10:51:11', '<p>动画效果使用了script.aculo.us的JS库，源码如下：&nbsp;</p><p>Scriptaculous.java</p><div class=\"code\"><div><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.javascript.InitializationPriority;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>public class Scriptaculous {</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String lastName;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>public void setupRender() {</div><div>&nbsp;</div><div>javaScriptSupport.addScript(InitializationPriority.LATE, String.format(&quot;Effect.Grow(\'%s\');&quot;, &quot;expando&quot;));</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>Scriptaculous.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div id=&quot;expando&quot; style=&quot;padding: 10px; background-color: #eeeeee;&quot;&gt;</div><div>&nbsp;</div><div>&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter First Name&quot; t:hintColor=&quot;#808080&quot;/&gt;</div><div>&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter Last Name&quot; t:hintColor=&quot;#808080&quot;/&gt;&lt;br/&gt;</div><div>&lt;/form&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十二讲：tapestry javaScript动画', '<p>Scriptaculous.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.javascript.InitializationPriority;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\npublic class Scriptaculous {\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String firstName;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String lastName;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	public void setupRender() {\r\n\r\n		javaScriptSupport.addScript(InitializationPriority.LATE, String.format(&quot;Effect.Grow(\'%s\');&quot;, &quot;expando&quot;));\r\n	}\r\n\r\n}</pre></p><p>Scriptaculous.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div id=&quot;expando&quot; style=&quot;padding: 10px; background-color: #eeeeee;&quot;&gt;\r\n \r\n&lt;form t:type=&quot;form&quot; t:autofocus=&quot;false&quot;&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter First Name&quot; t:hintColor=&quot;#808080&quot;/&gt;\r\n&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:mixins=&quot;TextboxHint&quot; t:hintText=&quot;Enter Last Name&quot; t:hintColor=&quot;#808080&quot;/&gt;&lt;br/&gt;\r\n&lt;/form&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 32：Tapestry JavaScript Scriptaculous', '');
INSERT INTO `td_c_technology` VALUES ('55', null, '2016-05-12 09:28:18', 'admin', '0755', '', 'admin', '2016-05-17 10:53:25', '<p>tapestry的Ajax使用非常简单，Ajax的页面无刷新，刚好解决了eventlink、actionlink等组件无刷新，这点在js应用中非常的强大。下面就于eventlink组件为例。源码如下：&nbsp;</p><p>AJAXEventLink.java</p><div class=\"code\"><div>/**</div><div>* 项目名称：TapestryStart</div><div>* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>* 版本：1.0</div><div>* 编写：飞风</div><div>* 时间：2012-02-29</div><div>*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>public class AJAXEventLink {</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone time2Zone;</div><div>&nbsp;</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private Date serverTime1;</div><div>&nbsp;</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private Date serverTime2;</div><div>&nbsp;</div><div>void onRefreshPage() {</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div><div>Object onRefreshZone() {</div><div>return request.isXHR() ? time2Zone.getBody() : null;</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime1() {</div><div>return new Date();</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime2() {</div><div>return new Date();</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>AJAXEventLink.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin-left: 50px&quot;&gt;</div><div>&lt;a t:type=&quot;eventlink&quot; t:event=&quot;refreshPage&quot; href=&quot;#&quot;&gt;页面需要刷新&lt;/a&gt;&lt;br/&gt;</div><div>&lt;a t:type=&quot;eventlink&quot; t:event=&quot;refreshZone&quot; href=&quot;#&quot; t:zone=&quot;time2Zone&quot;&gt;页面无刷新&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>serverTime1: &nbsp;${serverTime1}</div><div>&lt;t:zone t:id=&quot;time2Zone&quot;&gt;</div><div>serverTime2: &nbsp;${serverTime2}</div><div>&lt;/t:zone&gt;&lt;br/&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十三讲：tapestry Ajax eventlink无刷新页面', '<p>AJAXEventLink.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n* 项目名称：TapestryStart\r\n* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n* 版本：1.0\r\n* 编写：飞风\r\n* 时间：2012-02-29\r\n*/\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\npublic class AJAXEventLink {\r\n	@Inject\r\n	private Request request;\r\n\r\n	@InjectComponent\r\n	private Zone time2Zone;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private Date serverTime1;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private Date serverTime2;\r\n\r\n	void onRefreshPage() {\r\n\r\n	}\r\n\r\n	Object onRefreshZone() {\r\n		return request.isXHR() ? time2Zone.getBody() : null;\r\n	}\r\n\r\n	public Date getServerTime1() {\r\n		return new Date();\r\n	}\r\n\r\n	public Date getServerTime2() {\r\n		return new Date();\r\n	}\r\n\r\n}</pre><p></p><p>AJAXEventLink.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin-left: 50px&quot;&gt;\r\n&lt;a t:type=&quot;eventlink&quot; t:event=&quot;refreshPage&quot; href=&quot;#&quot;&gt;页面需要刷新&lt;/a&gt;&lt;br/&gt;\r\n&lt;a t:type=&quot;eventlink&quot; t:event=&quot;refreshZone&quot; href=&quot;#&quot; t:zone=&quot;time2Zone&quot;&gt;页面无刷新&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\nserverTime1:  ${serverTime1}\r\n&lt;t:zone t:id=&quot;time2Zone&quot;&gt;\r\nserverTime2:  ${serverTime2}\r\n&lt;/t:zone&gt;&lt;br/&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', 'Lesson 33：Tapestry Ajax Eventlink', '');
INSERT INTO `td_c_technology` VALUES ('56', null, '2016-05-12 09:29:03', 'admin', '0755', '', 'admin', '2016-05-17 10:56:13', '<p>源码如下：</p><p>AJAXActionLink.java<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>public class AJAXActionLink {</div><div>&nbsp;</div><div>@Inject</div><div>private Request reauest;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone time2Zone;</div><div>&nbsp;</div><div>void onActionFromRefreshPage(){}</div><div>&nbsp;</div><div>Object onActionFromRefreshZone(){</div><div>return reauest.isXHR()? time2Zone.getBody():null;</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime1(){</div><div>return new Date();</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime2(){</div><div>return new Date();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXActionLink.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin-left: 50px&quot;&gt;</div><div>&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshPage&quot; href=&quot;#&quot;&gt;ActionLink刷新页面&lt;/a&gt;&lt;br/&gt;</div><div>&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshZone&quot; href=&quot;#&quot; t:zone=&quot;time2Zone&quot;&gt;ActionLink AJAX无刷新&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>serverTime1: &nbsp;${serverTime1}</div><div>&lt;t:zone t:id=&quot;time2Zone&quot;&gt;</div><div>serverTime2: &nbsp;${serverTime2}</div><div>&lt;/t:zone&gt;&lt;br/&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十四讲：tapestry Ajax actiontlink无刷新页面', '<p>AJAXActionLink.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n* 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\npublic class AJAXActionLink {\r\n\r\n	@Inject\r\n	private Request reauest;\r\n\r\n	@InjectComponent\r\n	private Zone time2Zone;\r\n\r\n	void onActionFromRefreshPage() {\r\n	}\r\n\r\n	Object onActionFromRefreshZone() {\r\n		return reauest.isXHR() ? time2Zone.getBody() : null;\r\n	}\r\n\r\n	public Date getServerTime1() {\r\n		return new Date();\r\n	}\r\n\r\n	public Date getServerTime2() {\r\n		return new Date();\r\n	}\r\n}</pre><br /></p><p>AJAXActionLink.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin-left: 50px&quot;&gt;\r\n&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshPage&quot; href=&quot;#&quot;&gt;ActionLink刷新页面&lt;/a&gt;&lt;br/&gt;\r\n&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshZone&quot; href=&quot;#&quot; t:zone=&quot;time2Zone&quot;&gt;ActionLink AJAX无刷新&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\nserverTime1:  ${serverTime1}\r\n&lt;t:zone t:id=&quot;time2Zone&quot;&gt;\r\nserverTime2:  ${serverTime2}\r\n&lt;/t:zone&gt;&lt;br/&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 34：Tapestry Ajax Actionlink', '');
INSERT INTO `td_c_technology` VALUES ('57', null, '2016-05-12 09:29:29', 'admin', '0755', '', 'admin', '2016-05-17 10:58:53', '<p>实现方法很简单，在zone组件里加上t:update=&quot;show&quot;就不会出现黄色背景了。源码如下：</p><p>ZoneWithoutYellowHighlight.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>public class ZoneWithoutYellowHighlight {</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone time2Zone;</div><div>&nbsp;</div><div>void onActionFromRefreshPage(){}</div><div>&nbsp;</div><div>Object onActionFromRefreshZone(){</div><div>return request.isXHR()?time2Zone.getBody():null;</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime1(){</div><div>return new Date();</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime2(){</div><div>return new Date();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>ZoneWithoutYellowHighlight.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin-left: 50px&quot;&gt;</div><div>&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshPage&quot; href=&quot;#&quot;&gt;ActionLink刷新页面&lt;/a&gt;&lt;br/&gt;</div><div>&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshZone&quot; href=&quot;#&quot; t:zone=&quot;time2Zone&quot;&gt;ActionLink AJAX无刷新&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>serverTime1: &nbsp;${serverTime1}</div><div>&lt;t:zone t:id=&quot;time2Zone&quot; t:update=&quot;show&quot;&gt;</div><div>serverTime2: &nbsp;${serverTime2}</div><div>&lt;/t:zone&gt;&lt;br/&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十五讲：tapestry Ajax zone组件无黄色闪烁的背景', '<p>ZoneWithoutYellowHighlight.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\npublic class ZoneWithoutYellowHighlight {\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	@InjectComponent\r\n	private Zone time2Zone;\r\n\r\n	void onActionFromRefreshPage() {\r\n	}\r\n\r\n	Object onActionFromRefreshZone() {\r\n		return request.isXHR() ? time2Zone.getBody() : null;\r\n	}\r\n\r\n	public Date getServerTime1() {\r\n		return new Date();\r\n	}\r\n\r\n	public Date getServerTime2() {\r\n		return new Date();\r\n	}\r\n}</pre></p><p>ZoneWithoutYellowHighlight.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin-left: 50px&quot;&gt;\r\n&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshPage&quot; href=&quot;#&quot;&gt;ActionLink刷新页面&lt;/a&gt;&lt;br/&gt;\r\n&lt;a t:type=&quot;actionlink&quot; t:id=&quot;refreshZone&quot; href=&quot;#&quot; t:zone=&quot;time2Zone&quot;&gt;ActionLink AJAX无刷新&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\nserverTime1:  ${serverTime1}\r\n&lt;t:zone t:id=&quot;time2Zone&quot; t:update=&quot;show&quot;&gt;\r\nserverTime2:  ${serverTime2}\r\n&lt;/t:zone&gt;&lt;br/&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 35：Tapestry Zone Without Yellow Highlight', '');
INSERT INTO `td_c_technology` VALUES ('58', null, '2016-05-12 09:30:05', 'admin', '0755', '', 'admin', '2016-05-17 11:02:12', '<p>源码如下：</p><p>AJAXForm.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.text.DateFormat;</div><div>import java.text.SimpleDateFormat;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.corelib.components.DateField;</div><div>import org.apache.tapestry5.corelib.components.Form;</div><div>import org.apache.tapestry5.corelib.components.TextField;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>public class AJAXForm {</div><div>&nbsp;</div><div>@Property</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>private String lastName;</div><div>&nbsp;</div><div>@Property</div><div>private Date birthday;</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone formZone;</div><div>&nbsp;</div><div>@Component(id=&quot;firstName&quot;)</div><div>private TextField firstNameField;</div><div>&nbsp;</div><div>@Component(id=&quot;lastName&quot;)</div><div>private TextField lastNameField;</div><div>&nbsp;</div><div>@Component(id = &quot;birthday&quot;)</div><div>private DateField birthdayField;</div><div>&nbsp;</div><div>@Component(id=&quot;ajaxForm&quot;)</div><div>private Form form;</div><div>&nbsp;</div><div>void setupRender(){</div><div>if(firstName == null &amp;&amp; lastName == null &amp;&amp; birthday == null){</div><div>firstName = &quot;飞&quot;;</div><div>lastName = &quot;风&quot;;</div><div>birthday = new Date(0);</div><div>}</div><div>}</div><div>&nbsp;</div><div>void onValidateFromAjaxForm(){</div><div>if(firstName == null || firstName.trim().equals(&quot;&quot;)){</div><div>form.recordError(firstNameField, &quot;姓不能为空值！&quot;);</div><div>}</div><div>if(lastName == null || lastName.trim().equals(&quot;&quot;)){</div><div>form.recordError(lastNameField, &quot;名不能为空值！&quot;);</div><div>}</div><div>if(birthday == null){</div><div>form.recordError(birthdayField, &quot;生日不能为空值！&quot;);</div><div>Date now = new Date();</div><div>if(birthday.after(now)){</div><div>form.recordError(birthdayField, &quot;生日必须是过去的时间！&quot;);</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div><div>Object onSuccess(){</div><div>return request.isXHR()?formZone.getBody():null;</div><div>}</div><div>&nbsp;</div><div>Object onFailure(){</div><div>return request.isXHR()?formZone.getBody():null;</div><div>}</div><div>&nbsp;</div><div>public String getName(){</div><div>return firstName + &quot; &quot; + lastName;</div><div>}</div><div>&nbsp;</div><div>public DateFormat getBirthdayFormat(){</div><div>return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXForm.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:zone t:id=&quot;formZone&quot; id=&quot;formZone&quot;&gt;</div><div>&lt;form t:id=&quot;ajaxForm&quot; t:type=&quot;form&quot; t:zone=&quot;formZone&quot; style=&quot;border: 2px solid #eee; padding: 15px&quot;&gt;</div><div>&nbsp;</div><div>姓: &lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;&lt;br/&gt;</div><div>名: &lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>生日: &lt;input t:type=&quot;datefield&quot; t:id=&quot;birthday&quot;/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:errors/&gt;</div><div>&nbsp;</div><div>欢迎 ${name}. 你的生日是 &lt;t:output t:format=&quot;birthdayFormat&quot; value=&quot;birthday&quot;/&gt;</div><div>&nbsp;</div><div>&lt;/form&gt;</div><div>&lt;/t:zone&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十六讲：tapestry Ajax 表单(form)', '<p>AJAXForm.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.DateField;\r\nimport org.apache.tapestry5.corelib.components.Form;\r\nimport org.apache.tapestry5.corelib.components.TextField;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\npublic class AJAXForm {\r\n\r\n	@Property\r\n	private String firstName;\r\n\r\n	@Property\r\n	private String lastName;\r\n\r\n	@Property\r\n	private Date birthday;\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	@InjectComponent\r\n	private Zone formZone;\r\n\r\n	@Component(id = &quot;firstName&quot;)\r\n	private TextField firstNameField;\r\n\r\n	@Component(id = &quot;lastName&quot;)\r\n	private TextField lastNameField;\r\n\r\n	@Component(id = &quot;birthday&quot;)\r\n	private DateField birthdayField;\r\n\r\n	@Component(id = &quot;ajaxForm&quot;)\r\n	private Form form;\r\n\r\n	void setupRender() {\r\n		if (firstName == null &amp;&amp; lastName == null &amp;&amp; birthday == null) {\r\n			firstName = &quot;飞&quot;;\r\n			lastName = &quot;风&quot;;\r\n			birthday = new Date(0);\r\n		}\r\n	}\r\n\r\n	void onValidateFromAjaxForm() {\r\n		if (firstName == null || firstName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(firstNameField, &quot;姓不能为空值！&quot;);\r\n		}\r\n		if (lastName == null || lastName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(lastNameField, &quot;名不能为空值！&quot;);\r\n		}\r\n		if (birthday == null) {\r\n			form.recordError(birthdayField, &quot;生日不能为空值！&quot;);\r\n			Date now = new Date();\r\n			if (birthday.after(now)) {\r\n				form.recordError(birthdayField, &quot;生日必须是过去的时间！&quot;);\r\n			}\r\n		}\r\n	}\r\n\r\n	Object onSuccess() {\r\n		return request.isXHR() ? formZone.getBody() : null;\r\n	}\r\n\r\n	Object onFailure() {\r\n		return request.isXHR() ? formZone.getBody() : null;\r\n	}\r\n\r\n	public String getName() {\r\n		return firstName + &quot; &quot; + lastName;\r\n	}\r\n\r\n	public DateFormat getBirthdayFormat() {\r\n		return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n	}\r\n}</pre><br /></p><p>AJAXForm.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:zone t:id=&quot;formZone&quot; id=&quot;formZone&quot;&gt;\r\n&lt;form t:id=&quot;ajaxForm&quot; t:type=&quot;form&quot; t:zone=&quot;formZone&quot; style=&quot;border: 2px solid #eee; padding: 15px&quot;&gt;\r\n \r\n姓: &lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;&lt;br/&gt;\r\n名: &lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n生日: &lt;input t:type=&quot;datefield&quot; t:id=&quot;birthday&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:errors/&gt;\r\n \r\n欢迎 ${name}. 你的生日是 &lt;t:output t:format=&quot;birthdayFormat&quot; value=&quot;birthday&quot;/&gt;\r\n \r\n&lt;/form&gt;\r\n&lt;/t:zone&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 36：Tapestry Ajax Form', '');
INSERT INTO `td_c_technology` VALUES ('59', null, '2016-05-12 09:30:25', 'admin', '0755', '', 'admin', '2016-05-17 11:04:58', '<p>源码如下：</p><p>AJAXFormMultipleZoneUpdate.java<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.text.DateFormat;</div><div>import java.text.SimpleDateFormat;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Component;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.corelib.components.DateField;</div><div>import org.apache.tapestry5.corelib.components.Form;</div><div>import org.apache.tapestry5.corelib.components.TextField;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>import org.apache.tapestry5.services.ajax.AjaxResponseRenderer;</div><div>&nbsp;</div><div>public class AJAXFormMultipleZoneUpdate {</div><div>&nbsp;</div><div>@Property</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>private String lastName;</div><div>&nbsp;</div><div>@Property</div><div>private Date birthday;</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone formZone;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone outZone;</div><div>&nbsp;</div><div>@Component(id=&quot;firstName&quot;)</div><div>private TextField firstNameField;</div><div>&nbsp;</div><div>@Component(id=&quot;lastName&quot;)</div><div>private TextField lastNameField;</div><div>&nbsp;</div><div>@Component(id = &quot;birthday&quot;)</div><div>private DateField birthdayField;</div><div>&nbsp;</div><div>@Component(id=&quot;ajaxForm&quot;)</div><div>private Form form;</div><div>&nbsp;</div><div>@Inject</div><div>private AjaxResponseRenderer ajaxResponseRenderer;</div><div>&nbsp;</div><div>void setupRender(){</div><div>if(firstName == null &amp;&amp; lastName == null &amp;&amp; birthday == null){</div><div>firstName = &quot;飞&quot;;</div><div>lastName = &quot;风&quot;;</div><div>birthday = new Date(0);</div><div>}</div><div>}</div><div>&nbsp;</div><div>void onValidateFromAjaxForm(){</div><div>if(firstName == null || firstName.trim().equals(&quot;&quot;)){</div><div>form.recordError(firstNameField, &quot;姓不能为空值！&quot;);</div><div>}</div><div>if(lastName == null || lastName.trim().equals(&quot;&quot;)){</div><div>form.recordError(lastNameField, &quot;名不能为空值！&quot;);</div><div>}</div><div>if(birthday == null){</div><div>form.recordError(birthdayField, &quot;生日不能为空值！&quot;);</div><div>Date now = new Date();</div><div>if(birthday.after(now)){</div><div>form.recordError(birthdayField, &quot;生日必须是过去的时间！&quot;);</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div><div>void onSuccess(){</div><div>if(request.isXHR()){</div><div>ajaxResponseRenderer.addRender(formZone).addRender(outZone);</div><div>}</div><div>}</div><div>&nbsp;</div><div>void onFailue(){</div><div>if(request.isXHR()){</div><div>ajaxResponseRenderer.addRender(formZone);</div><div>}</div><div>}</div><div>&nbsp;</div><div>public String getName(){</div><div>return firstName + &quot; &quot; + lastName;</div><div>}</div><div>&nbsp;</div><div>public DateFormat getBirthdayFormat(){</div><div>return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXFormMultipleZoneUpdate.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:zone t:id=&quot;formZone&quot; id=&quot;formZone&quot;&gt;</div><div>&lt;form t:id=&quot;ajaxForm&quot; t:type=&quot;form&quot; t:zone=&quot;formZone&quot; style=&quot;border: 2px solid #eee; padding: 15px&quot;&gt;</div><div>&nbsp;</div><div>姓: &lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;&lt;br/&gt;</div><div>名: &lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;</div><div>生日: &lt;input t:type=&quot;datefield&quot; t:id=&quot;birthday&quot;/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:errors/&gt;</div><div>&nbsp;</div><div>&lt;/form&gt;</div><div>&lt;/t:zone&gt;</div><div>&lt;t:zone t:id=&quot;outZone&quot; id=&quot;outZone&quot; style=&quot;border: 2px solid #eee; padding: 15px&quot;&gt;</div><div>欢迎 ${name}. 你的生日是 &lt;t:output t:format=&quot;birthdayFormat&quot; value=&quot;birthday&quot;/&gt;</div><div>&lt;/t:zone&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十七讲：tapestry Ajax 表单(form)多zone组件', '<p>AJAXFormMultipleZoneUpdate.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Component;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.DateField;\r\nimport org.apache.tapestry5.corelib.components.Form;\r\nimport org.apache.tapestry5.corelib.components.TextField;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.ajax.AjaxResponseRenderer;\r\n\r\npublic class AJAXFormMultipleZoneUpdate {\r\n\r\n	@Property\r\n	private String firstName;\r\n\r\n	@Property\r\n	private String lastName;\r\n\r\n	@Property\r\n	private Date birthday;\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	@InjectComponent\r\n	private Zone formZone;\r\n\r\n	@InjectComponent\r\n	private Zone outZone;\r\n\r\n	@Component(id = &quot;firstName&quot;)\r\n	private TextField firstNameField;\r\n\r\n	@Component(id = &quot;lastName&quot;)\r\n	private TextField lastNameField;\r\n\r\n	@Component(id = &quot;birthday&quot;)\r\n	private DateField birthdayField;\r\n\r\n	@Component(id = &quot;ajaxForm&quot;)\r\n	private Form form;\r\n\r\n	@Inject\r\n	private AjaxResponseRenderer ajaxResponseRenderer;\r\n\r\n	void setupRender() {\r\n		if (firstName == null &amp;&amp; lastName == null &amp;&amp; birthday == null) {\r\n			firstName = &quot;飞&quot;;\r\n			lastName = &quot;风&quot;;\r\n			birthday = new Date(0);\r\n		}\r\n	}\r\n\r\n	void onValidateFromAjaxForm() {\r\n		if (firstName == null || firstName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(firstNameField, &quot;姓不能为空值！&quot;);\r\n		}\r\n		if (lastName == null || lastName.trim().equals(&quot;&quot;)) {\r\n			form.recordError(lastNameField, &quot;名不能为空值！&quot;);\r\n		}\r\n		if (birthday == null) {\r\n			form.recordError(birthdayField, &quot;生日不能为空值！&quot;);\r\n			Date now = new Date();\r\n			if (birthday.after(now)) {\r\n				form.recordError(birthdayField, &quot;生日必须是过去的时间！&quot;);\r\n			}\r\n		}\r\n	}\r\n\r\n	void onSuccess() {\r\n		if (request.isXHR()) {\r\n			ajaxResponseRenderer.addRender(formZone).addRender(outZone);\r\n		}\r\n	}\r\n\r\n	void onFailue() {\r\n		if (request.isXHR()) {\r\n			ajaxResponseRenderer.addRender(formZone);\r\n		}\r\n	}\r\n\r\n	public String getName() {\r\n		return firstName + &quot; &quot; + lastName;\r\n	}\r\n\r\n	public DateFormat getBirthdayFormat() {\r\n		return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n	}\r\n}</pre><br /></p><p>AJAXFormMultipleZoneUpdate.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:zone t:id=&quot;formZone&quot; id=&quot;formZone&quot;&gt;\r\n&lt;form t:id=&quot;ajaxForm&quot; t:type=&quot;form&quot; t:zone=&quot;formZone&quot; style=&quot;border: 2px solid #eee; padding: 15px&quot;&gt;\r\n \r\n姓: &lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot;/&gt;&lt;br/&gt;\r\n名: &lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot;/&gt;&lt;br/&gt;\r\n生日: &lt;input t:type=&quot;datefield&quot; t:id=&quot;birthday&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:errors/&gt;\r\n \r\n&lt;/form&gt;\r\n&lt;/t:zone&gt;\r\n&lt;t:zone t:id=&quot;outZone&quot; id=&quot;outZone&quot; style=&quot;border: 2px solid #eee; padding: 15px&quot;&gt;\r\n欢迎 ${name}. 你的生日是 &lt;t:output t:format=&quot;birthdayFormat&quot; value=&quot;birthday&quot;/&gt;\r\n&lt;/t:zone&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 37：Tapestry AJAX Form Multiple Zone Update', '');
INSERT INTO `td_c_technology` VALUES ('60', null, '2016-05-12 09:30:44', 'admin', '0755', '', 'admin', '2016-05-17 11:21:10', '<p>源码如下：</p><p>AJAXSelect1.java<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.ComponentResources;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>public class AJAXSelect1 {</div><div>static final private String[] ALL_MAKES = new String[] { &quot;梅州市&quot;, &quot;河源市&quot; };</div><div>static final private String[] NO_MODELS = new String[] {};</div><div>static final private String[] MEIZHOU_MODELS = new String[] { &quot;五华县&quot;, &quot;兴宁县&quot;};</div><div>static final private String[] HEYUAN_MODELS = new String[] { &quot;紫金县&quot;, &quot;龙川县&quot; };</div><div>&nbsp;</div><div>@Property</div><div>private String areaMake;</div><div>&nbsp;</div><div>@Property</div><div>private String cithModel;</div><div>&nbsp;</div><div>@Property</div><div>private String keywords;</div><div>&nbsp;</div><div>@Property</div><div>private String[] areaMakes;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String[] cithModels;</div><div>&nbsp;</div><div>@InjectPage</div><div>private AJAXSelect2 page2;</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone cithModelZone;</div><div>&nbsp;</div><div>@Inject</div><div>private ComponentResources componentResources;</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>&nbsp;</div><div>void setupRender() {</div><div>if (areaMakes == null) {</div><div>areaMakes = ALL_MAKES;</div><div>cithModels = NO_MODELS;</div><div>}</div><div>}</div><div>&nbsp;</div><div>Object onValueChangedFromAreaMake(String areaMake) {</div><div>this.areaMake = areaMake;</div><div>areaMakes = ALL_MAKES;</div><div>&nbsp;</div><div>if (areaMake == null) {</div><div>cithModels = NO_MODELS;</div><div>}</div><div>else if (areaMake.equals(areaMakes[0])) {</div><div>cithModels = MEIZHOU_MODELS;</div><div>}</div><div>else if (areaMake.equals(areaMakes[1])) {</div><div>cithModels = HEYUAN_MODELS;</div><div>}</div><div>else {</div><div>cithModels = NO_MODELS;</div><div>}</div><div>cithModel = null;</div><div>&nbsp;</div><div>return request.isXHR() ? cithModelZone.getBody() : null;</div><div>}</div><div>&nbsp;</div><div>Object onSuccess() {</div><div>page2.set(areaMake, cithModel, keywords);</div><div>componentResources.discardPersistentFieldChanges();</div><div>return page2;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>AJAXSelect1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form t:type=&quot;form&quot; t:id=&quot;searchCriteria&quot;&gt;</div><div>&nbsp;</div><div>&lt;t:label for=&quot;areaMake&quot;/&gt;:</div><div>&lt;select t:type=&quot;select&quot; t:id=&quot;areaMake&quot; t:model=&quot;areaMakes&quot; t:zone=&quot;cithModelZone&quot;</div><div>t:blankOption=&quot;ALWAYS&quot; t:blankLabel=&quot;请选择&quot; t:validate=&quot;required&quot;/&gt;</div><div>&nbsp;</div><div>&lt;t:zone t:id=&quot;cithModelZone&quot; id=&quot;cithModelZone&quot; style=&quot;display: inline;&quot;&gt;</div><div>&lt;t:label for=&quot;cithModel&quot;/&gt;:</div><div>&lt;select t:type=&quot;select&quot; t:id=&quot;cithModel&quot; t:model=&quot;cithModels&quot;&nbsp;</div><div>t:blankOption=&quot;ALWAYS&quot; t:blankLabel=&quot;请选择&quot; t:validate=&quot;required&quot;/&gt;</div><div>&lt;/t:zone&gt;</div><div>&nbsp;</div><div>说明: &lt;input t:type=&quot;TextField&quot; t:id=&quot;keywords&quot;/&gt; (optional)&lt;br/&gt;&nbsp;</div><div>&nbsp;</div><div>&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</div><div>&lt;t:errors/&gt;</div><div>&nbsp;</div><div>&lt;/form&gt;&lt;br/&gt;</div><div>&lt;/html&gt;</div></div><p>AJAXSelect2.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.PersistenceConstants;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class AJAXSelect2 {</div><div>@Persist(PersistenceConstants.FLASH)</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String areaMake;</div><div>&nbsp;</div><div>@Persist(PersistenceConstants.FLASH)</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String cithModel;</div><div>&nbsp;</div><div>@Persist(PersistenceConstants.FLASH)</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String keyWords;</div><div>&nbsp;</div><div>public void set(String areaMake, String cithModel, String keyWords) {</div><div>this.areaMake = areaMake;</div><div>this.cithModel = cithModel;</div><div>this.keyWords = keyWords;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXSelect2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>您选择的地区是: ${areaMake} ${cithModel} ${keyWords}!&lt;br/&gt;&lt;br/&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十八讲：tapestry Ajax 关联下拉选框(select)组件', '<p>AJAXSelect1.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\npublic class AJAXSelect1 {\r\n	static final private String[] ALL_MAKES = new String[] { &quot;梅州市&quot;, &quot;河源市&quot; };\r\n	static final private String[] NO_MODELS = new String[] {};\r\n	static final private String[] MEIZHOU_MODELS = new String[] { &quot;五华县&quot;, &quot;兴宁县&quot; };\r\n	static final private String[] HEYUAN_MODELS = new String[] { &quot;紫金县&quot;, &quot;龙川县&quot; };\r\n\r\n	@Property\r\n	private String areaMake;\r\n\r\n	@Property\r\n	private String cithModel;\r\n\r\n	@Property\r\n	private String keywords;\r\n\r\n	@Property\r\n	private String[] areaMakes;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String[] cithModels;\r\n\r\n	@InjectPage\r\n	private AJAXSelect2 page2;\r\n\r\n	@InjectComponent\r\n	private Zone cithModelZone;\r\n\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	void setupRender() {\r\n		if (areaMakes == null) {\r\n			areaMakes = ALL_MAKES;\r\n			cithModels = NO_MODELS;\r\n		}\r\n	}\r\n\r\n	Object onValueChangedFromAreaMake(String areaMake) {\r\n		this.areaMake = areaMake;\r\n		areaMakes = ALL_MAKES;\r\n\r\n		if (areaMake == null) {\r\n			cithModels = NO_MODELS;\r\n		} else if (areaMake.equals(areaMakes[0])) {\r\n			cithModels = MEIZHOU_MODELS;\r\n		} else if (areaMake.equals(areaMakes[1])) {\r\n			cithModels = HEYUAN_MODELS;\r\n		} else {\r\n			cithModels = NO_MODELS;\r\n		}\r\n		cithModel = null;\r\n\r\n		return request.isXHR() ? cithModelZone.getBody() : null;\r\n	}\r\n\r\n	Object onSuccess() {\r\n		page2.set(areaMake, cithModel, keywords);\r\n		componentResources.discardPersistentFieldChanges();\r\n		return page2;\r\n	}\r\n\r\n}</pre><br /><p></p><p>AJAXSelect1.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form t:type=&quot;form&quot; t:id=&quot;searchCriteria&quot;&gt;\r\n \r\n&lt;t:label for=&quot;areaMake&quot;/&gt;:\r\n&lt;select t:type=&quot;select&quot; t:id=&quot;areaMake&quot; t:model=&quot;areaMakes&quot; t:zone=&quot;cithModelZone&quot;\r\nt:blankOption=&quot;ALWAYS&quot; t:blankLabel=&quot;请选择&quot; t:validate=&quot;required&quot;/&gt;\r\n \r\n&lt;t:zone t:id=&quot;cithModelZone&quot; id=&quot;cithModelZone&quot; style=&quot;display: inline;&quot;&gt;\r\n&lt;t:label for=&quot;cithModel&quot;/&gt;:\r\n&lt;select t:type=&quot;select&quot; t:id=&quot;cithModel&quot; t:model=&quot;cithModels&quot; \r\nt:blankOption=&quot;ALWAYS&quot; t:blankLabel=&quot;请选择&quot; t:validate=&quot;required&quot;/&gt;\r\n&lt;/t:zone&gt;\r\n \r\n说明: &lt;input t:type=&quot;TextField&quot; t:id=&quot;keywords&quot;/&gt; (optional)&lt;br/&gt; \r\n \r\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;\r\n&lt;t:errors/&gt;\r\n \r\n&lt;/form&gt;&lt;br/&gt;\r\n&lt;/html&gt;</pre><br /><p></p><p>AJAXSelect2.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.PersistenceConstants;\r\nimport org.apache.tapestry5.annotations.Persist;\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class AJAXSelect2 {\r\n	@Persist(PersistenceConstants.FLASH)\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String areaMake;\r\n\r\n	@Persist(PersistenceConstants.FLASH)\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String cithModel;\r\n\r\n	@Persist(PersistenceConstants.FLASH)\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String keyWords;\r\n\r\n	public void set(String areaMake, String cithModel, String keyWords) {\r\n		this.areaMake = areaMake;\r\n		this.cithModel = cithModel;\r\n		this.keyWords = keyWords;\r\n	}\r\n}</pre><br /><p></p><p>AJAXSelect2.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n您选择的地区是: ${areaMake} ${cithModel} ${keyWords}!&lt;br/&gt;&lt;br/&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', 'Lesson 38：Tapestry AJAX Select', '');
INSERT INTO `td_c_technology` VALUES ('61', null, '2016-05-12 09:31:07', 'admin', '0755', '', 'admin', '2016-05-17 11:20:56', '<p>ProgressiveDisplay组件其实就是londing。在请求没完成时调出一个等待的gif动画，告诉用户请求没完成请等待！代码如下：</p><p>ProgressiveDisplay.java&nbsp;<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>&nbsp;</div><div>public class ProgressiveDisplay {</div><div>static final private String[] ALL_THINGS = { &quot;吃饭&quot;, &quot;睡觉&quot;, &quot;绘画&quot; } ;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String[] things;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private String thing;</div><div>&nbsp;</div><div>public void onProgressiveDisplayFromShowThings() {</div><div>&nbsp;</div><div>things = ALL_THINGS;</div><div>&nbsp;</div><div>sleep(5000);</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div><div>private void sleep(long millis) {</div><div>try {</div><div>Thread.sleep(millis);</div><div>}</div><div>catch (InterruptedException e) {</div><div>&nbsp;</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>ProgressiveDisplay.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:ProgressiveDisplay t:id=&quot;showThings&quot; style=&quot;margin-left: 10px;&quot;&gt;</div><div>&lt;div t:type=&quot;Loop&quot; t:source=&quot;things&quot; t:value=&quot;thing&quot;&gt;</div><div>${thing}</div><div>&lt;/div&gt;</div><div>&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;&nbsp;</div><div>&lt;/html&gt;</div></div>', null, '17', '第三十九讲：tapestry 页面加载等待过程(ProgressiveDisplay)组件', '<p>ProgressiveDisplay.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\npublic class ProgressiveDisplay {\r\n	static final private String[] ALL_THINGS = { &quot;吃饭&quot;, &quot;睡觉&quot;, &quot;绘画&quot; };\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String[] things;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private String thing;\r\n\r\n	public void onProgressiveDisplayFromShowThings() {\r\n\r\n		things = ALL_THINGS;\r\n\r\n		sleep(5000);\r\n\r\n	}\r\n\r\n	private void sleep(long millis) {\r\n		try {\r\n			Thread.sleep(millis);\r\n		} catch (InterruptedException e) {\r\n\r\n		}\r\n	}\r\n}</pre><br /></p><p>ProgressiveDisplay.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:ProgressiveDisplay t:id=&quot;showThings&quot; style=&quot;margin-left: 10px;&quot;&gt;\r\n&lt;div t:type=&quot;Loop&quot; t:source=&quot;things&quot; t:value=&quot;thing&quot;&gt;\r\n${thing}\r\n&lt;/div&gt;\r\n&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt; \r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 39：Tapestry ProgressiveDisplay', '');
INSERT INTO `td_c_technology` VALUES ('62', null, '2016-05-12 09:31:42', 'admin', '0755', '', 'admin', '2016-05-17 11:26:39', '<p>源码如下：</p><p>ProgressiveDisplayVariations.java<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.Block;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>&nbsp;</div><div>public class ProgressiveDisplayVariations {</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private int sleepTimeMillis;</div><div>&nbsp;</div><div>@Inject</div><div>private Block resultSixBlock;</div><div>&nbsp;</div><div>&nbsp;</div><div>public void onProgressiveDisplayFromShowOne() {</div><div>sleep(1000);</div><div>}</div><div>&nbsp;</div><div>public void onProgressiveDisplayFromShowTwo() {</div><div>sleep(2000);</div><div>}</div><div>&nbsp;</div><div>public void onProgressiveDisplayFromShowThree(int sleepTimeMillis) {</div><div>this.sleepTimeMillis = sleepTimeMillis;</div><div>sleep(sleepTimeMillis);</div><div>}</div><div>&nbsp;</div><div>public void onProgressiveDisplayFromShowFour() {</div><div>sleep(4000);</div><div>}</div><div>&nbsp;</div><div>public void onProgressiveDisplayFromShowFive() {</div><div>sleep(5000);</div><div>}</div><div>&nbsp;</div><div>public Block onProgressiveDisplayFromShowSix() {</div><div>sleep(6000);</div><div>return resultSixBlock;</div><div>}</div><div>&nbsp;</div><div>private void sleep(long millis) {</div><div>try {</div><div>Thread.sleep(millis);</div><div>}</div><div>catch (InterruptedException e) {</div><div>&nbsp;</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>ProgressiveDisplayVariations.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:ProgressiveDisplay t:id=&quot;showOne&quot; style=&quot;margin-left: 10px;&quot;&gt;</div><div>第一个</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:ProgressiveDisplay t:id=&quot;showTwo&quot; style=&quot;margin-left: 10px;&quot;&gt;</div><div>第二个</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;br/&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:ProgressiveDisplay t:id=&quot;showThree&quot; t:context=&quot;literal:3000&quot; style=&quot;margin-left: 10px;&quot;&gt;</div><div>等待 ${sleepTimeMillis} 毫秒.</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:ProgressiveDisplay t:id=&quot;showFour&quot; t:initial=&quot;block:loadingBlock&quot; style=&quot;margin-left: 10px;&quot;&gt;</div><div>第四个</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:ProgressiveDisplay t:id=&quot;showFive&quot; t:update=&quot;slidedown&quot; style=&quot;margin-left: 10px;&quot;&gt;</div><div>第五个&lt;br/&gt;</div><div>第五个&lt;br/&gt;</div><div>第五个</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:ProgressiveDisplay t:id=&quot;showSix&quot; style=&quot;margin-left: 10px;&quot;/&gt;</div><div>&nbsp;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:block t:id=&quot;loadingBlock&quot;&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;div style=&quot;font-weight: bold; text-decoration: blink;&quot;&gt;</div><div>请等待...4000毫秒</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/div&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:block&gt;</div><div>&nbsp;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;t:block t:id=&quot;resultSixBlock&quot;&gt;</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>第六个</div><div>&nbsp;<span style=\"white-space:pre;\"> </span>&lt;/t:block&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第四十讲：tapestry ProgressiveDisplay组件详细使用', '<p>ProgressiveDisplayVariations.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.Block;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\n\r\npublic class ProgressiveDisplayVariations {\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private int sleepTimeMillis;\r\n\r\n	@Inject\r\n	private Block resultSixBlock;\r\n\r\n	public void onProgressiveDisplayFromShowOne() {\r\n		sleep(1000);\r\n	}\r\n\r\n	public void onProgressiveDisplayFromShowTwo() {\r\n		sleep(2000);\r\n	}\r\n\r\n	public void onProgressiveDisplayFromShowThree(int sleepTimeMillis) {\r\n		this.sleepTimeMillis = sleepTimeMillis;\r\n		sleep(sleepTimeMillis);\r\n	}\r\n\r\n	public void onProgressiveDisplayFromShowFour() {\r\n		sleep(4000);\r\n	}\r\n\r\n	public void onProgressiveDisplayFromShowFive() {\r\n		sleep(5000);\r\n	}\r\n\r\n	public Block onProgressiveDisplayFromShowSix() {\r\n		sleep(6000);\r\n		return resultSixBlock;\r\n	}\r\n\r\n	private void sleep(long millis) {\r\n		try {\r\n			Thread.sleep(millis);\r\n		} catch (InterruptedException e) {\r\n\r\n		}\r\n	}\r\n}</pre><br /></p><p>ProgressiveDisplayVariations.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:ProgressiveDisplay t:id=&quot;showOne&quot; style=&quot;margin-left: 10px;&quot;&gt;\r\n第一个\r\n  &lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;\r\n \r\n&lt;t:ProgressiveDisplay t:id=&quot;showTwo&quot; style=&quot;margin-left: 10px;&quot;&gt;\r\n第二个\r\n  &lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;\r\n \r\n&lt;br/&gt;&lt;br/&gt;\r\n \r\n&lt;t:ProgressiveDisplay t:id=&quot;showThree&quot; t:context=&quot;literal:3000&quot; style=&quot;margin-left: 10px;&quot;&gt;\r\n等待 ${sleepTimeMillis} 毫秒.\r\n  &lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;\r\n \r\n    &lt;br/&gt;\r\n \r\n&lt;t:ProgressiveDisplay t:id=&quot;showFour&quot; t:initial=&quot;block:loadingBlock&quot; style=&quot;margin-left: 10px;&quot;&gt;\r\n第四个\r\n  &lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;\r\n \r\n&lt;t:ProgressiveDisplay t:id=&quot;showFive&quot; t:update=&quot;slidedown&quot; style=&quot;margin-left: 10px;&quot;&gt;\r\n第五个&lt;br/&gt;\r\n第五个&lt;br/&gt;\r\n第五个\r\n  &lt;/t:ProgressiveDisplay&gt;&lt;br/&gt;\r\n \r\n&lt;t:ProgressiveDisplay t:id=&quot;showSix&quot; style=&quot;margin-left: 10px;&quot;/&gt;\r\n \r\n  &lt;t:block t:id=&quot;loadingBlock&quot;&gt;\r\n  &lt;div style=&quot;font-weight: bold; text-decoration: blink;&quot;&gt;\r\n请等待...4000毫秒\r\n  &lt;/div&gt;\r\n  &lt;/t:block&gt;\r\n \r\n  &lt;t:block t:id=&quot;resultSixBlock&quot;&gt;\r\n  第六个\r\n  &lt;/t:block&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 40：Tapestry ProgressiveDisplay Variations', '');
INSERT INTO `td_c_technology` VALUES ('63', null, '2016-05-12 09:32:04', 'admin', '0755', '', 'admin', '2016-05-17 11:31:02', '<p>源码如下：</p><p>AJAXPeriodicUpdate.java<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.Request;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library = &quot;context:assets/js/AJAXPeriodicUpdate.js&quot;)</div><div>public class AJAXPeriodicUpdate {</div><div>&nbsp;</div><div>@InjectComponent</div><div>private Zone timeZone;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>public void setupRender() {</div><div>javaScriptSupport.addInitializerCall(&quot;periodicTimeZoneUpdater&quot;, new JSONObject());</div><div>}</div><div>&nbsp;</div><div>Object onRefreshTimeZone() {</div><div>return request.isXHR() ? timeZone.getBody() : null;</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime() {</div><div>return new Date();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXPeriodicUpdate.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin-left: 50px&quot;&gt;</div><div>&lt;a t:type=&quot;eventlink&quot; t:id=&quot;refreshTimeZone&quot; href=&quot;#&quot; t:zone=&quot;timeZone&quot; style=&quot;display: none;&quot;&gt;Hidden EventLink&lt;/a&gt;</div><div>&nbsp;</div><div>&lt;t:zone t:id=&quot;timeZone&quot;&gt;</div><div>serverTime: &nbsp;${serverTime}</div><div>&lt;/t:zone&gt;&lt;br/&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div><p>AJAXPeriodicUpdate.js</p><div class=\"code\"><div>PeriodicTimeZoneUpdater = Class.create( {</div><div>&nbsp;</div><div>initialize: function() {</div><div>var eventLink = $(\'refreshTimeZone\');</div><div>&nbsp;</div><div>var updatesCount = 0;</div><div>&nbsp;</div><div>new PeriodicalExecuter(function(pe) {</div><div>if (updatesCount++ &lt; 4) {</div><div>Tapestry.findZoneManager(eventLink).updateFromURL(eventLink.href);</div><div>}</div><div>else {</div><div>pe.stop();</div><div>}</div><div>}, 3);</div><div>}</div><div>&nbsp;</div><div>})</div><div>&nbsp;</div><div>Tapestry.Initializer.periodicTimeZoneUpdater = function(spec) {</div><div>new PeriodicTimeZoneUpdater();</div><div>}</div></div>', null, '17', '第四十一讲：tapestry Ajax周期性更新', '<p>AJAXPeriodicUpdate.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/AJAXPeriodicUpdate.js&quot;)\r\npublic class AJAXPeriodicUpdate {\r\n\r\n	@InjectComponent\r\n	private Zone timeZone;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	public void setupRender() {\r\n		javaScriptSupport.addInitializerCall(&quot;periodicTimeZoneUpdater&quot;, new JSONObject());\r\n	}\r\n\r\n	Object onRefreshTimeZone() {\r\n		return request.isXHR() ? timeZone.getBody() : null;\r\n	}\r\n\r\n	public Date getServerTime() {\r\n		return new Date();\r\n	}\r\n}</pre><br /></p><p>AJAXPeriodicUpdate.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin-left: 50px&quot;&gt;\r\n&lt;a t:type=&quot;eventlink&quot; t:id=&quot;refreshTimeZone&quot; href=&quot;#&quot; t:zone=&quot;timeZone&quot; style=&quot;display: none;&quot;&gt;Hidden EventLink&lt;/a&gt;\r\n \r\n&lt;t:zone t:id=&quot;timeZone&quot;&gt;\r\nserverTime:  ${serverTime}\r\n&lt;/t:zone&gt;&lt;br/&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /></p><p>AJAXPeriodicUpdate.js</p><p><pre class=\"prettyprint lang-js\">PeriodicTimeZoneUpdater = Class.create( {\r\n \r\ninitialize: function() {\r\nvar eventLink = $(\'refreshTimeZone\');\r\n \r\nvar updatesCount = 0;\r\n \r\nnew PeriodicalExecuter(function(pe) {\r\nif (updatesCount++ &lt; 4) {\r\nTapestry.findZoneManager(eventLink).updateFromURL(eventLink.href);\r\n}\r\nelse {\r\npe.stop();\r\n}\r\n}, 3);\r\n}\r\n \r\n})\r\n \r\nTapestry.Initializer.periodicTimeZoneUpdater = function(spec) {\r\nnew PeriodicTimeZoneUpdater();\r\n}</pre><br /></p>', 'Lesson 41：Tapestry AJAX Periodic Update', '');
INSERT INTO `td_c_technology` VALUES ('64', null, '2016-05-12 09:32:30', 'admin', '0755', '', 'admin', '2016-05-17 11:34:18', '<p>源码如下：</p><p>AJAXPeriodicUpdateMixin.java<br /></p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectComponent;</div><div>import org.apache.tapestry5.corelib.components.Zone;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>public class AJAXPeriodicUpdateMixin {</div><div>@InjectComponent</div><div>private Zone timeZone;</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>Object onRefreshTimeZone() {</div><div>return request.isXHR() ? timeZone.getBody() : null;</div><div>}</div><div>&nbsp;</div><div>public Date getServerTime() {</div><div>return new Date();</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXPeriodicUpdateMixin.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin-left: 50px&quot;&gt;</div><div>&lt;t:zone t:id=&quot;timeZone&quot; t:mixins=&quot;PeriodicZoneUpdater&quot; t:event=&quot;refreshTimeZone&quot; t:frequencySecs=&quot;3&quot; t:maxUpdates=&quot;4&quot;&gt;</div><div>serverTime: &nbsp;${serverTime}</div><div>&lt;/t:zone&gt;</div><div>&lt;/div&gt;&lt;br/&gt;</div><div>&lt;/html&gt;</div></div><p>PeriodicZoneUpdater.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.mixins;</div><div>&nbsp;</div><div>import org.apache.tapestry5.BindingConstants;</div><div>import org.apache.tapestry5.ClientElement;</div><div>import org.apache.tapestry5.ComponentResources;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.InjectContainer;</div><div>import org.apache.tapestry5.annotations.Parameter;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library=&quot;context:assets/js/PeriodicZoneUpdater.js&quot;)</div><div>public class PeriodicZoneUpdater {</div><div>@Parameter(required = true, defaultPrefix = BindingConstants.LITERAL)</div><div>private String event;</div><div>&nbsp;</div><div>@Parameter</div><div>private Object[] context;</div><div>&nbsp;</div><div>@Parameter(defaultPrefix = BindingConstants.LITERAL, required = true)</div><div>private int frequencySecs;</div><div>&nbsp;</div><div>@Parameter(defaultPrefix = BindingConstants.LITERAL, required = true)</div><div>private int maxUpdates;</div><div>&nbsp;</div><div>@Inject</div><div>private ComponentResources componentResources;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>@InjectContainer</div><div>private ClientElement clientElement;</div><div>&nbsp;</div><div>void afterRender() {</div><div>&nbsp;</div><div>JSONObject spec = new JSONObject();</div><div>spec.put(&quot;zoneElementId&quot;, clientElement.getClientId());</div><div>spec.put(&quot;eventURL&quot;, componentResources.createEventLink(event, context).toAbsoluteURI());</div><div>spec.put(&quot;frequencySecs&quot;, frequencySecs);</div><div>spec.put(&quot;maxUpdates&quot;, maxUpdates);</div><div>javaScriptSupport.addInitializerCall(&quot;periodicZoneUpdater&quot;, spec);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>PeriodicZoneUpdater.js</p><div class=\"code\"><div>PeriodicZoneUpdater = Class.create( {</div><div>&nbsp;</div><div>initialize : function(spec){</div><div>this.zoneElement = $(spec.zoneElementId).getStorage();</div><div>this.eventURL = spec.eventURL;</div><div>this.frequencySecs = spec.frequencySecs;</div><div>this.maxUpdates = spec.maxUpdates;</div><div>&nbsp;</div><div>// Use Prototype\'s PeriodicalExecuter to run updateZone() every 3 seconds, this.maxUpdates times.</div><div>&nbsp;</div><div>var updatesCount = 0;</div><div>&nbsp;</div><div>new PeriodicalExecuter(function(pe) {</div><div>if (updatesCount++ &lt; this.maxUpdates) {</div><div>this.updateZone();</div><div>}</div><div>else {</div><div>pe.stop();</div><div>}</div><div>}.bind(this), this.frequencySecs);</div><div>&nbsp;</div><div>},</div><div>&nbsp;</div><div>updateZone : function() {</div><div>var zoneManager = this.zoneElement.zoneManager;</div><div>if(!zoneManager){</div><div>return;</div><div>}</div><div>&nbsp;</div><div>zoneManager.updateFromURL(this.eventURL);</div><div>}</div><div>&nbsp;</div><div>} )</div><div>&nbsp;</div><div>// Extend the Tapestry.Initializer with a static method that instantiates a PeriodicZoneUpdater.</div><div>&nbsp;</div><div>Tapestry.Initializer.periodicZoneUpdater = function(spec) {</div><div>&nbsp; &nbsp; new PeriodicZoneUpdater(spec);</div><div>}</div></div>', null, '17', '第四十二讲：tapestry Ajax混合(mixins)周期性更新', '<p>AJAXPeriodicUpdateMixin.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.Date;\r\n\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\npublic class AJAXPeriodicUpdateMixin {\r\n	@InjectComponent\r\n	private Zone timeZone;\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	Object onRefreshTimeZone() {\r\n		return request.isXHR() ? timeZone.getBody() : null;\r\n	}\r\n\r\n	public Date getServerTime() {\r\n		return new Date();\r\n	}\r\n}</pre><br /><p></p><p>AJAXPeriodicUpdateMixin.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin-left: 50px&quot;&gt;\r\n&lt;t:zone t:id=&quot;timeZone&quot; t:mixins=&quot;PeriodicZoneUpdater&quot; t:event=&quot;refreshTimeZone&quot; t:frequencySecs=&quot;3&quot; t:maxUpdates=&quot;4&quot;&gt;\r\nserverTime:  ${serverTime}\r\n&lt;/t:zone&gt;\r\n&lt;/div&gt;&lt;br/&gt;\r\n&lt;/html&gt;</pre><br /><p></p><p>PeriodicZoneUpdater.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.mixins;\r\n\r\nimport org.apache.tapestry5.BindingConstants;\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.InjectContainer;\r\nimport org.apache.tapestry5.annotations.Parameter;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/PeriodicZoneUpdater.js&quot;)\r\npublic class PeriodicZoneUpdater {\r\n	@Parameter(required = true, defaultPrefix = BindingConstants.LITERAL)\r\n	private String event;\r\n\r\n	@Parameter\r\n	private Object[] context;\r\n\r\n	@Parameter(defaultPrefix = BindingConstants.LITERAL, required = true)\r\n	private int frequencySecs;\r\n\r\n	@Parameter(defaultPrefix = BindingConstants.LITERAL, required = true)\r\n	private int maxUpdates;\r\n\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	@InjectContainer\r\n	private ClientElement clientElement;\r\n\r\n	void afterRender() {\r\n\r\n		JSONObject spec = new JSONObject();\r\n		spec.put(&quot;zoneElementId&quot;, clientElement.getClientId());\r\n		spec.put(&quot;eventURL&quot;, componentResources.createEventLink(event, context).toAbsoluteURI());\r\n		spec.put(&quot;frequencySecs&quot;, frequencySecs);\r\n		spec.put(&quot;maxUpdates&quot;, maxUpdates);\r\n		javaScriptSupport.addInitializerCall(&quot;periodicZoneUpdater&quot;, spec);\r\n	}\r\n}</pre><br /><p></p><p>PeriodicZoneUpdater.js</p><p></p><pre class=\"prettyprint lang-js\">PeriodicZoneUpdater = Class.create( {\r\n \r\ninitialize : function(spec){\r\nthis.zoneElement = $(spec.zoneElementId).getStorage();\r\nthis.eventURL = spec.eventURL;\r\nthis.frequencySecs = spec.frequencySecs;\r\nthis.maxUpdates = spec.maxUpdates;\r\n \r\n// Use Prototype\'s PeriodicalExecuter to run updateZone() every 3 seconds, this.maxUpdates times.\r\n \r\nvar updatesCount = 0;\r\n \r\nnew PeriodicalExecuter(function(pe) {\r\nif (updatesCount++ &lt; this.maxUpdates) {\r\nthis.updateZone();\r\n}\r\nelse {\r\npe.stop();\r\n}\r\n}.bind(this), this.frequencySecs);\r\n \r\n},\r\n \r\nupdateZone : function() {\r\nvar zoneManager = this.zoneElement.zoneManager;\r\nif(!zoneManager){\r\nreturn;\r\n}\r\n \r\nzoneManager.updateFromURL(this.eventURL);\r\n}\r\n \r\n} )\r\n \r\n// Extend the Tapestry.Initializer with a static method that instantiates a PeriodicZoneUpdater.\r\n \r\nTapestry.Initializer.periodicZoneUpdater = function(spec) {\r\n    new PeriodicZoneUpdater(spec);\r\n}</pre><br /><p></p>', 'Lesson 42：Tapestry AJAX Periodic Update Mixin', '');
INSERT INTO `td_c_technology` VALUES ('65', null, '2016-05-12 09:33:10', 'admin', '0755', '', 'admin', '2016-05-17 11:50:38', '<p>tapestry Ajax表单验证，作用非常大可做检查用户名是否存在。源码如下：</p><p>AJAXValidators1.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.util.List;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.InjectPage;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.Request;</div><div>&nbsp;</div><div>import com.tapestry.app.entities.Person;</div><div>import com.tapestry.app.services.StartDAO;</div><div>&nbsp;</div><div>public class AJAXValidators1 {</div><div>@Property</div><div>private String firstName;</div><div>&nbsp;</div><div>@Property</div><div>private String lastName;</div><div>&nbsp;</div><div>@Property</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>private List&lt;Person&gt; persons;</div><div>&nbsp;</div><div>@InjectPage</div><div>private AJAXValidators2 page2;</div><div>&nbsp;</div><div>@Inject</div><div>private Request request;</div><div>&nbsp;</div><div>@Inject</div><div>private StartDAO dao;</div><div>&nbsp;</div><div>void setupRender() {</div><div>StringBuffer sql = new StringBuffer();</div><div>sql.append(&quot;from Person&quot;);</div><div>persons = dao.findWithQuery(sql.toString());</div><div>}</div><div>&nbsp;</div><div>JSONObject onAjaxValidateFromFirstName() {</div><div>String firstName = request.getParameter(&quot;param&quot;);</div><div>&nbsp;</div><div>try {</div><div>validateFirstNameIsUnique(firstName);</div><div>}</div><div>catch (Exception e) {</div><div>return new JSONObject().put(&quot;error&quot;, e.getMessage());</div><div>}</div><div>&nbsp;</div><div>return new JSONObject();</div><div>}</div><div>&nbsp;</div><div>Object onSuccess() {</div><div>page2.set(firstName, lastName);</div><div>return page2;</div><div>}</div><div>&nbsp;</div><div>void validateFirstNameIsUnique(String firstName) throws Exception {</div><div>if (firstName != null) {</div><div>List&lt;Person&gt; persons = dao.searchQuery(firstName);</div><div>&nbsp;</div><div>if (persons.size() &gt; 0) {</div><div>throw new Exception(&quot;姓已经存在.&quot;);</div><div>}</div><div>}</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>AJAXValidators1.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;div style=&quot;margin: 20px;&quot;&gt;</div><div>&lt;form t:type=&quot;CustomForm&quot; t:id=&quot;inputs&quot;&gt;</div><div>&lt;t:errors/&gt;</div><div>&lt;table&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;&lt;t:label for=&quot;firstName&quot;/&gt;:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;</div><div>t:mixins=&quot;ajaxValidator&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;(required, maxLength=10, new name only)&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;th&gt;&lt;/th&gt;</div><div>&lt;td colspan=&quot;2&quot;&gt;&lt;t:customerror for=&quot;firstName&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;&lt;t:label for=&quot;lastName&quot;/&gt;:&lt;/td&gt;</div><div>&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:validate=&quot;required, maxLength=10&quot; size=&quot;10&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;(required, maxLength=10, new name only)&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;th&gt;&lt;/th&gt;</div><div>&lt;td colspan=&quot;2&quot;&gt;&lt;t:customerror for=&quot;lastName&quot;/&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;tr&gt;</div><div>&lt;td&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Display&quot;/&gt;&lt;/td&gt;</div><div>&lt;td&gt;&lt;/td&gt;</div><div>&lt;/tr&gt;</div><div>&lt;/table&gt;</div><div>&lt;/form&gt;&lt;br/&gt;</div><div>&lt;table t:type=&quot;grid&quot; t:source=&quot;persons&quot; t:row=&quot;var:person&quot; include=&quot;firstName,lastName&quot;&gt;[Grid here]&lt;/table&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div><p>AjaxValidator.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.mixins;</div><div>&nbsp;</div><div>import org.apache.tapestry5.ClientElement;</div><div>import org.apache.tapestry5.ComponentResources;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>import org.apache.tapestry5.annotations.InjectContainer;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.json.JSONObject;</div><div>import org.apache.tapestry5.services.javascript.JavaScriptSupport;</div><div>&nbsp;</div><div>@Import(library = &quot;context:assets/js/AjaxValidator.js&quot;)</div><div>public class AjaxValidator {</div><div>@Inject</div><div>private ComponentResources componentResources;</div><div>&nbsp;</div><div>@Inject</div><div>private JavaScriptSupport javaScriptSupport;</div><div>&nbsp;</div><div>@InjectContainer</div><div>private ClientElement clientElement;</div><div>&nbsp;</div><div>void afterRender() {</div><div>&nbsp;</div><div>JSONObject spec = new JSONObject();</div><div>spec.put(&quot;elementId&quot;, clientElement.getClientId());</div><div>spec.put(&quot;listenerURI&quot;, componentResources.createEventLink(&quot;ajaxValidate&quot;).toAbsoluteURI());</div><div>javaScriptSupport.addInitializerCall(&quot;ajaxValidator&quot;, spec);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AjaxValidator.js</p><div class=\"code\"><div>AjaxValidator = Class.create( {</div><div>&nbsp;</div><div>initialize : function(spec) {</div><div>this.field = $(spec.elementId);</div><div>this.listenerURI = spec.listenerURI;</div><div>&nbsp;</div><div>// Set up a listener that validates the field - asynchronously in the server - on change of focus</div><div>&nbsp;</div><div>document.observe(Tapestry.FOCUS_CHANGE_EVENT, function(event) {</div><div>&nbsp;</div><div>// If changing focus *within the same form* then perform validation. &nbsp;</div><div>// Note that Tapestry.currentFocusField does not change</div><div>// until after the FOCUS_CHANGE_EVENT notification.</div><div>&nbsp;</div><div>if (Tapestry.currentFocusField == this.field &amp;&amp; this.field.form == event.memo.form) {</div><div>this.asyncValidateInServer();</div><div>}</div><div>&nbsp;</div><div>}.bindAsEventListener(this)<span style=\"white-space:pre;\"> </span>);</div><div>},</div><div>&nbsp;</div><div>asyncValidateInServer : function() {</div><div>var value = this.field.value;</div><div>var listenerURIWithValue = this.listenerURI;</div><div>&nbsp; &nbsp;</div><div>if (value) {</div><div>listenerURIWithValue = addRequestParameter(\'param\', value, this.listenerURI);</div><div>&nbsp;</div><div>new Ajax.Request(listenerURIWithValue, {</div><div>method: \'get\',</div><div>onFailure: function(t) {</div><div>&nbsp; &nbsp;alert(\'Error communication with the server: \' + t.responseText.stripTags());</div><div>},</div><div>onException: function(t, exception) {</div><div>&nbsp; &nbsp;alert(\'Error communication with the server: \' + exception.message);</div><div>},</div><div>onSuccess: function(t) {</div><div>if (t.responseJSON.error) {</div><div>this.field.showValidationMessage(t.responseJSON.error);</div><div>}</div><div>}.bind(this)</div><div>});</div><div>}</div><div>}</div><div>&nbsp;</div><div>} )</div><div>&nbsp;</div><div>function addRequestParameter(name, value, url) {</div><div>if (url.indexOf(\'?\') &lt; 0) {</div><div>url += \'?\'</div><div>} else {</div><div>url += \'&amp;\';</div><div>}</div><div>value = escape(value);</div><div>url += name + \'=\' + value;</div><div>return url;</div><div>}</div><div>&nbsp;</div><div>// Extend the Tapestry.Initializer with a static method that instantiates an AjaxValidator.</div><div>&nbsp;</div><div>Tapestry.Initializer.ajaxValidator = function(spec) {</div><div>&nbsp; &nbsp; new AjaxValidator(spec);</div><div>}</div></div><p>AJAXValidators2.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>public class AJAXValidators2 {</div><div>private String firstName;</div><div>&nbsp;</div><div>private String lastName;</div><div>&nbsp;</div><div>public void set(String firstName, String lastName) {</div><div>this.firstName = firstName;</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>String[] onPassivate() {</div><div>return new String[] { firstName, lastName };</div><div>}</div><div>&nbsp;</div><div>void onActivate(String firstName, String lastName) {</div><div>this.firstName = firstName;</div><div>this.lastName = lastName;</div><div>}</div><div>&nbsp;</div><div>public String getName() {</div><div>return firstName + &quot; &quot; + lastName;</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>AJAXValidators2.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span>xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>你好， ${name}</div><div>&lt;/html&gt;</div></div>', null, '17', '第四十三讲：tapestry Ajax表单验证', '<p>AJAXValidators1.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.annotations.InjectPage;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.Request;\r\n\r\nimport com.tapestry.app.entities.Person;\r\nimport com.tapestry.app.services.StartDAO;\r\n\r\npublic class AJAXValidators1 {\r\n	@Property\r\n	private String firstName;\r\n\r\n	@Property\r\n	private String lastName;\r\n\r\n	@Property\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	private List&lt;Person&gt; persons;\r\n\r\n	@InjectPage\r\n	private AJAXValidators2 page2;\r\n\r\n	@Inject\r\n	private Request request;\r\n\r\n	@Inject\r\n	private StartDAO dao;\r\n\r\n	void setupRender() {\r\n		StringBuffer sql = new StringBuffer();\r\n		sql.append(&quot;from Person&quot;);\r\n		persons = dao.findWithQuery(sql.toString());\r\n	}\r\n\r\n	JSONObject onAjaxValidateFromFirstName() {\r\n		String firstName = request.getParameter(&quot;param&quot;);\r\n\r\n		try {\r\n			validateFirstNameIsUnique(firstName);\r\n		} catch (Exception e) {\r\n			return new JSONObject().put(&quot;error&quot;, e.getMessage());\r\n		}\r\n\r\n		return new JSONObject();\r\n	}\r\n\r\n	Object onSuccess() {\r\n		page2.set(firstName, lastName);\r\n		return page2;\r\n	}\r\n\r\n	void validateFirstNameIsUnique(String firstName) throws Exception {\r\n		if (firstName != null) {\r\n			List&lt;Person&gt; persons = dao.searchQuery(firstName);\r\n\r\n			if (persons.size() &gt; 0) {\r\n				throw new Exception(&quot;姓已经存在.&quot;);\r\n			}\r\n		}\r\n	}\r\n\r\n}</pre><br /></p><p>AJAXValidators1.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;div style=&quot;margin: 20px;&quot;&gt;\r\n&lt;form t:type=&quot;CustomForm&quot; t:id=&quot;inputs&quot;&gt;\r\n&lt;t:errors/&gt;\r\n&lt;table&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;&lt;t:label for=&quot;firstName&quot;/&gt;:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;firstName&quot; t:validate=&quot;required, maxlength=10&quot; size=&quot;10&quot;\r\nt:mixins=&quot;ajaxValidator&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;(required, maxLength=10, new name only)&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;th&gt;&lt;/th&gt;\r\n&lt;td colspan=&quot;2&quot;&gt;&lt;t:customerror for=&quot;firstName&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;&lt;t:label for=&quot;lastName&quot;/&gt;:&lt;/td&gt;\r\n&lt;td&gt;&lt;input t:type=&quot;TextField&quot; t:id=&quot;lastName&quot; t:validate=&quot;required, maxLength=10&quot; size=&quot;10&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;(required, maxLength=10, new name only)&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;th&gt;&lt;/th&gt;\r\n&lt;td colspan=&quot;2&quot;&gt;&lt;t:customerror for=&quot;lastName&quot;/&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Display&quot;/&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/form&gt;&lt;br/&gt;\r\n&lt;table t:type=&quot;grid&quot; t:source=&quot;persons&quot; t:row=&quot;var:person&quot; include=&quot;firstName,lastName&quot;&gt;[Grid here]&lt;/table&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /></p><p>AjaxValidator.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.mixins;\r\n\r\nimport org.apache.tapestry5.ClientElement;\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.Import;\r\nimport org.apache.tapestry5.annotations.InjectContainer;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n@Import(library = &quot;context:assets/js/AjaxValidator.js&quot;)\r\npublic class AjaxValidator {\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n\r\n	@InjectContainer\r\n	private ClientElement clientElement;\r\n\r\n	void afterRender() {\r\n\r\n		JSONObject spec = new JSONObject();\r\n		spec.put(&quot;elementId&quot;, clientElement.getClientId());\r\n		spec.put(&quot;listenerURI&quot;, componentResources.createEventLink(&quot;ajaxValidate&quot;).toAbsoluteURI());\r\n		javaScriptSupport.addInitializerCall(&quot;ajaxValidator&quot;, spec);\r\n	}\r\n}</pre><br /></p><p>AjaxValidator.js</p><p><pre class=\"prettyprint lang-js\">AjaxValidator = Class.create( {\r\n \r\ninitialize : function(spec) {\r\nthis.field = $(spec.elementId);\r\nthis.listenerURI = spec.listenerURI;\r\n \r\n// Set up a listener that validates the field - asynchronously in the server - on change of focus\r\n \r\ndocument.observe(Tapestry.FOCUS_CHANGE_EVENT, function(event) {\r\n \r\n// If changing focus *within the same form* then perform validation.  \r\n// Note that Tapestry.currentFocusField does not change\r\n// until after the FOCUS_CHANGE_EVENT notification.\r\n \r\nif (Tapestry.currentFocusField == this.field &amp;&amp; this.field.form == event.memo.form) {\r\nthis.asyncValidateInServer();\r\n}\r\n \r\n}.bindAsEventListener(this) );\r\n},\r\n \r\nasyncValidateInServer : function() {\r\nvar value = this.field.value;\r\nvar listenerURIWithValue = this.listenerURI;\r\n   \r\nif (value) {\r\nlistenerURIWithValue = addRequestParameter(\'param\', value, this.listenerURI);\r\n \r\nnew Ajax.Request(listenerURIWithValue, {\r\nmethod: \'get\',\r\nonFailure: function(t) {\r\n   alert(\'Error communication with the server: \' + t.responseText.stripTags());\r\n},\r\nonException: function(t, exception) {\r\n   alert(\'Error communication with the server: \' + exception.message);\r\n},\r\nonSuccess: function(t) {\r\nif (t.responseJSON.error) {\r\nthis.field.showValidationMessage(t.responseJSON.error);\r\n}\r\n}.bind(this)\r\n});\r\n}\r\n}\r\n \r\n} )\r\n \r\nfunction addRequestParameter(name, value, url) {\r\nif (url.indexOf(\'?\') &lt; 0) {\r\nurl += \'?\'\r\n} else {\r\nurl += \'&amp;\';\r\n}\r\nvalue = escape(value);\r\nurl += name + \'=\' + value;\r\nreturn url;\r\n}\r\n \r\n// Extend the Tapestry.Initializer with a static method that instantiates an AjaxValidator.\r\n \r\nTapestry.Initializer.ajaxValidator = function(spec) {\r\n    new AjaxValidator(spec);\r\n}</pre><br /></p><p>AJAXValidators2.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\npublic class AJAXValidators2 {\r\n	private String firstName;\r\n\r\n	private String lastName;\r\n\r\n	public void set(String firstName, String lastName) {\r\n		this.firstName = firstName;\r\n		this.lastName = lastName;\r\n	}\r\n\r\n	String[] onPassivate() {\r\n		return new String[] { firstName, lastName };\r\n	}\r\n\r\n	void onActivate(String firstName, String lastName) {\r\n		this.firstName = firstName;\r\n		this.lastName = lastName;\r\n	}\r\n\r\n	public String getName() {\r\n		return firstName + &quot; &quot; + lastName;\r\n	}\r\n}</pre><br /></p><p>AJAXValidators2.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n你好， ${name}\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 43：Tapestry AJAX Validators', '');
INSERT INTO `td_c_technology` VALUES ('66', null, '2016-05-12 09:33:31', 'admin', '0755', '', 'admin', '2016-05-17 11:53:46', '<p>tapestry提供了上传组件，使用起来非常简单。代码如下：</p><p>先在pom.xml中引进tapestry-upload，</p><div class=\"code\"><div>&lt;dependency&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;org.apache.tapestry&lt;/groupId&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;tapestry-upload&lt;/artifactId&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;${tapestry-release-version}&lt;/version&gt;</div><div>&nbsp;&lt;/dependency&gt;</div></div><p>然后修改服务配置AppModule.java把UploadModule类引进去，如果需要可以设置下文件上传的大小限制UploadSymbols.FILESIZE_MAX。</p><div class=\"code\"><div>package com.tapestry.app.services;</div><div>&nbsp;</div><div>import java.io.IOException;</div><div>&nbsp;</div><div>import org.apache.tapestry5.*;</div><div>import org.apache.tapestry5.hibernate.HibernateCoreModule;</div><div>import org.apache.tapestry5.hibernate.HibernateModule;</div><div>import org.apache.tapestry5.hibernate.HibernateSymbols;</div><div>import org.apache.tapestry5.hibernate.HibernateTransactionAdvisor;</div><div>import org.apache.tapestry5.ioc.MappedConfiguration;</div><div>import org.apache.tapestry5.ioc.MethodAdviceReceiver;</div><div>import org.apache.tapestry5.ioc.OrderedConfiguration;</div><div>import org.apache.tapestry5.ioc.ServiceBinder;</div><div>import org.apache.tapestry5.ioc.annotations.Local;</div><div>import org.apache.tapestry5.ioc.annotations.Match;</div><div>import org.apache.tapestry5.ioc.annotations.SubModule;</div><div>import org.apache.tapestry5.services.Request;</div><div>import org.apache.tapestry5.services.RequestFilter;</div><div>import org.apache.tapestry5.services.RequestHandler;</div><div>import org.apache.tapestry5.services.Response;</div><div>import org.apache.tapestry5.upload.services.UploadModule;</div><div>import org.apache.tapestry5.upload.services.UploadSymbols;</div><div>import org.slf4j.Logger;</div><div>&nbsp;</div><div>@SubModule({HibernateModule.class, HibernateCoreModule.class,UploadModule.class})</div><div>public class AppModule</div><div>{</div><div>&nbsp; &nbsp; public static void bind(ServiceBinder binder)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; binder.bind(StartDAO.class, StartDAOImpl.class);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public static void contributeFactoryDefaults(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MappedConfiguration&lt;String, Object&gt; configuration)</div><div>&nbsp; &nbsp; {&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; public static void contributeApplicationDefaults(</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MappedConfiguration&lt;String, Object&gt; configuration)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(SymbolConstants.PRODUCTION_MODE, &quot;false&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(UploadSymbols.FILESIZE_MAX, &quot;50000000&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(SymbolConstants.APPLICATION_VERSION, &quot;1.0-SNAPSHOT&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration</div><div>.add(HibernateSymbols.ENTITY_SESSION_STATE_PERSISTENCE_STRATEGY_ENABLED,</div><div>&quot;true&quot;);</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp; @Match(&quot;*DAO&quot;)</div><div>public static void adviseTransactions(HibernateTransactionAdvisor advisor,</div><div>MethodAdviceReceiver receiver) {</div><div>advisor.addTransactionCommitAdvice(receiver);</div><div>}</div><div>&nbsp;</div><div>&nbsp; &nbsp; public RequestFilter buildTimingFilter(final Logger log)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return new RequestFilter()</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public boolean service(Request request, Response response, RequestHandler handler)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throws IOException</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; long startTime = System.currentTimeMillis();</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return handler.service(request, response);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } finally</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; long elapsed = System.currentTimeMillis() - startTime;</div><div>&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log.info(String.format(&quot;Request time: %d ms&quot;, elapsed));</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; };</div><div>&nbsp; &nbsp; }</div><div>&nbsp;</div><div>&nbsp; &nbsp;</div><div>&nbsp; &nbsp; public void contributeRequestHandler(OrderedConfiguration&lt;RequestFilter&gt; configuration,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@Local</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RequestFilter filter)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; configuration.add(&quot;Timing&quot;, filter);</div><div>&nbsp; &nbsp; }</div><div>}</div><div>&nbsp;</div></div><p>实现上传如下： TapestryUpload.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.io.File;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.upload.services.UploadedFile;</div><div>&nbsp;</div><div>public class TapestryUpload {</div><div>&nbsp;</div><div>@Property</div><div>private UploadedFile file;</div><div>&nbsp;</div><div>void onSuccess(){</div><div>//上传文件到d盘</div><div>File copied = new File(&quot;d:\\\\&quot; + file.getFileName());</div><div>file.write(copied);</div><div>}</div><div>}</div><div>&nbsp;</div></div><p>TapestryUpload.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;t:form&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;t:errors/&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;input t:type=&quot;upload&quot; t:id=&quot;file&quot; t:value=&quot;file&quot; validate=&quot;required&quot;/&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;br/&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&lt;/html&gt;</div></div>', null, '17', '第四十四讲：tapestry upload组件', '<p>AppModule.java</p><p><pre class=\"prettyprint lang-java\">package com.tapestry.app.services;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.apache.tapestry5.*;\r\nimport org.apache.tapestry5.hibernate.HibernateCoreModule;\r\nimport org.apache.tapestry5.hibernate.HibernateModule;\r\nimport org.apache.tapestry5.hibernate.HibernateSymbols;\r\nimport org.apache.tapestry5.hibernate.HibernateTransactionAdvisor;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.MethodAdviceReceiver;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Local;\r\nimport org.apache.tapestry5.ioc.annotations.Match;\r\nimport org.apache.tapestry5.ioc.annotations.SubModule;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.RequestFilter;\r\nimport org.apache.tapestry5.services.RequestHandler;\r\nimport org.apache.tapestry5.services.Response;\r\nimport org.apache.tapestry5.upload.services.UploadModule;\r\nimport org.apache.tapestry5.upload.services.UploadSymbols;\r\nimport org.slf4j.Logger;\r\n\r\n@SubModule({ HibernateModule.class, HibernateCoreModule.class, UploadModule.class })\r\npublic class AppModule {\r\n	public static void bind(ServiceBinder binder) {\r\n		binder.bind(StartDAO.class, StartDAOImpl.class);\r\n	}\r\n\r\n	public static void contributeFactoryDefaults(MappedConfiguration&lt;String, Object&gt; configuration) {\r\n		configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);\r\n	}\r\n\r\n	public static void contributeApplicationDefaults(MappedConfiguration&lt;String, Object&gt; configuration) {\r\n		configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en&quot;);\r\n		configuration.add(SymbolConstants.PRODUCTION_MODE, &quot;false&quot;);\r\n		configuration.add(UploadSymbols.FILESIZE_MAX, &quot;50000000&quot;);\r\n		configuration.add(SymbolConstants.APPLICATION_VERSION, &quot;1.0-SNAPSHOT&quot;);\r\n		configuration.add(HibernateSymbols.ENTITY_SESSION_STATE_PERSISTENCE_STRATEGY_ENABLED, &quot;true&quot;);\r\n	}\r\n\r\n	@Match(&quot;*DAO&quot;)\r\n	public static void adviseTransactions(HibernateTransactionAdvisor advisor, MethodAdviceReceiver receiver) {\r\n		advisor.addTransactionCommitAdvice(receiver);\r\n	}\r\n\r\n	public RequestFilter buildTimingFilter(final Logger log) {\r\n		return new RequestFilter() {\r\n			public boolean service(Request request, Response response, RequestHandler handler) throws IOException {\r\n				long startTime = System.currentTimeMillis();\r\n\r\n				try {\r\n					return handler.service(request, response);\r\n				} finally {\r\n					long elapsed = System.currentTimeMillis() - startTime;\r\n\r\n					log.info(String.format(&quot;Request time: %d ms&quot;, elapsed));\r\n				}\r\n			}\r\n		};\r\n	}\r\n\r\n	public void contributeRequestHandler(OrderedConfiguration&lt;RequestFilter&gt; configuration,\r\n			@Local RequestFilter filter) {\r\n		configuration.add(&quot;Timing&quot;, filter);\r\n	}\r\n}</pre><br /></p><p>TapestryUpload.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.io.File;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.upload.services.UploadedFile;\r\n\r\npublic class TapestryUpload {\r\n\r\n	@Property\r\n	private UploadedFile file;\r\n\r\n	void onSuccess() {\r\n		// 上传文件到d盘\r\n		File copied = new File(&quot;d:\\\\&quot; + file.getFileName());\r\n		file.write(copied);\r\n	}\r\n}</pre><br /></p><p>TapestryUpload.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;t:form&gt;\r\n        &lt;t:errors/&gt;\r\n        &lt;input t:type=&quot;upload&quot; t:id=&quot;file&quot; t:value=&quot;file&quot; validate=&quot;required&quot;/&gt;\r\n        &lt;br/&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;\r\n&lt;/t:form&gt;\r\n&lt;/html&gt;</pre><br /></p>', 'Lesson 44：Tapestry Upload', '');
INSERT INTO `td_c_technology` VALUES ('67', null, '2016-05-12 09:34:26', 'admin', '0755', '', 'admin', '2016-05-17 13:40:37', '<p>此教程我们使用常用的multipart/form-data同过post方式实现上传，上传实现依旧使用了 tapestry的UploadedFile组件，我随便写了个字符串to，这个字符串可以随便命名的，没有具体实际意义，作用就是传一个值到上传处理页面让它知道执行了上传这个动作。还需要创建一个解码器。代码如下：</p><p>UploadTypeFile.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;form action=&quot;UploadTypeFile/to/&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; &gt; &nbsp;</div><div>&nbsp; &nbsp; &nbsp; &lt;input type=&quot;file&quot; name=&quot;filename&quot;/&gt; &nbsp;</div><div>&nbsp; &nbsp; &nbsp; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt; &nbsp; &nbsp; &nbsp; &nbsp;</div><div>&lt;/form&gt;</div><div>&lt;/html&gt;</div></div><p>UploadTypeFile.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.io.File;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.upload.services.MultipartDecoder;</div><div>import org.apache.tapestry5.upload.services.UploadedFile;</div><div>&nbsp;</div><div>public class UploadTypeFile {</div><div>&nbsp;</div><div>@Property</div><div>private UploadedFile file;</div><div>&nbsp;</div><div>@Inject</div><div>private MultipartDecoder decoder;</div><div>&nbsp;</div><div>void onActivate(String to){</div><div>file = decoder.getFileUpload(&quot;filename&quot;);</div><div>File copied = new File(&quot;d:\\\\&quot;, file.getFileName());</div><div>file.write(copied);</div><div>}</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第四十五讲：tapestry upload组件使用input type=\"file\"实现上传', '<p>UploadTypeFile.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;form action=&quot;UploadTypeFile/to/&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; &gt;  \r\n      &lt;input type=&quot;file&quot; name=&quot;filename&quot;/&gt;  \r\n      &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;        \r\n&lt;/form&gt;\r\n&lt;/html&gt;</pre><br /></p><p>UploadTypeFile.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.io.File;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.upload.services.MultipartDecoder;\r\nimport org.apache.tapestry5.upload.services.UploadedFile;\r\n\r\npublic class UploadTypeFile {\r\n\r\n	@Property\r\n	private UploadedFile file;\r\n\r\n	@Inject\r\n	private MultipartDecoder decoder;\r\n\r\n	void onActivate(String to) {\r\n		file = decoder.getFileUpload(&quot;filename&quot;);\r\n		File copied = new File(&quot;d:\\\\&quot;, file.getFileName());\r\n		file.write(copied);\r\n	}\r\n\r\n}</pre><br /></p>', 'Lesson 45：Tapestry Upload input type upload', '');
INSERT INTO `td_c_technology` VALUES ('68', null, '2016-05-12 09:35:43', 'admin', '0755', '', 'admin', '2016-05-17 13:46:19', '<p>tapestry的上传提供了很简洁的代码，但很多时候并不是我们想要的，例如上到的本工程目录的文件夹下怎么实现？虽然在服务里面设置了文件上传的大小，但那是所有上传的控制，能不能在某个上传的时候进行文件大小上传限制？等等诸如此类的问题。下面看下源码：</p><p>UploadDetail.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.io.File;</div><div>import java.text.SimpleDateFormat;</div><div>import java.util.Date;</div><div>import javax.servlet.http.HttpServletRequest;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Persist;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.ApplicationGlobals;</div><div>import org.apache.tapestry5.services.RequestGlobals;</div><div>import org.apache.tapestry5.upload.services.UploadedFile;</div><div>&nbsp;</div><div>import com.tapestry.app.util.UiUtils;</div><div>&nbsp;</div><div>public class UploadDetail {</div><div>&nbsp;</div><div>@Inject</div><div>private ApplicationGlobals applicationGlobals;</div><div>&nbsp;</div><div>@Inject</div><div>private RequestGlobals requestGlobals;</div><div>&nbsp;</div><div>@Property</div><div>private UploadedFile file;</div><div>&nbsp;</div><div>@Persist</div><div>@Property</div><div>private String dataUrl;</div><div>&nbsp;</div><div>@Persist</div><div>@Property</div><div>private String tooBig;</div><div>&nbsp;</div><div>protected final HttpServletRequest getRequest() {</div><div>return requestGlobals.getHTTPServletRequest();</div><div>}</div><div>&nbsp;</div><div>void onSuccess(){</div><div>uploadImage();</div><div>}</div><div>&nbsp;</div><div>void uploadImage(){</div><div>// 文件保存目录路径</div><div>String savePath = applicationGlobals.getServletContext().getRealPath(&quot;/uploadImages/&quot;) + &quot;\\\\&quot;;</div><div>&nbsp;</div><div>// 文件保存目录URl地址</div><div>String saveUrl = getRequest().getContextPath() + &quot;/uploadImages/&quot;;</div><div>&nbsp;</div><div>&nbsp;</div><div>//最大文件大小</div><div>long maxSize = 1048576;</div><div>&nbsp;</div><div>// 检查目录</div><div>File uploadDir = new File(savePath);</div><div>&nbsp;</div><div>if (!uploadDir.exists()) {</div><div>uploadDir.mkdirs();</div><div>}</div><div>&nbsp;</div><div>// 检查目录写权限</div><div>if (!uploadDir.canWrite()) {</div><div>System.out.println(&quot;上传目录没有写权限。&quot;);</div><div>return;</div><div>}</div><div>&nbsp;</div><div>//文件夹名</div><div>String dirName = &quot;uploadData&quot;;</div><div>// 创建文件夹</div><div>savePath += dirName + &quot;/&quot;;</div><div>saveUrl += dirName + &quot;/&quot;;</div><div>File saveDirFile = new File(savePath);</div><div>if (!saveDirFile.exists()) {</div><div>saveDirFile.mkdirs();</div><div>}</div><div>&nbsp;</div><div>String fileName = file.getFileName();</div><div>//转换文件名为时间_随机数的名字格式如21120229_8888745544.gif</div><div>SimpleDateFormat df = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);</div><div>String newFileName = df.format(new Date()) + &quot;_&quot; + UiUtils.createFileName(fileName);</div><div>&nbsp;</div><div>&nbsp;</div><div>File copied = new File(savePath + newFileName);</div><div>&nbsp;</div><div>long fileSize = file.getSize();</div><div>&nbsp;</div><div>//判断文件大小</div><div>if(fileSize &gt; maxSize){</div><div>tooBig = &quot;上传失败！文件大小超过1M。&quot;;</div><div>System.out.println(&quot;上传失败！文件大小超过1M。&quot;);</div><div>return;</div><div>}else{</div><div>tooBig = &quot;&quot;;</div><div>}</div><div>&nbsp;</div><div>file.write(copied);</div><div>&nbsp;</div><div>//图片上传成功之后返回的途径</div><div>dataUrl = saveUrl + &nbsp;newFileName;</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>UploadDetail.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>文件路径：${dataUrl}&lt;br/&gt;</div><div>&nbsp;</div><div>&lt;t:form t:id=&quot;uploadForm&quot;&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;t:errors/&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;input t:type=&quot;upload&quot; t:id=&quot;file&quot; t:value=&quot;file&quot; &nbsp;validate=&quot;required&quot;/&gt;&lt;span style=&quot;color:red&quot;&gt;${tooBig}&lt;/span&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;br/&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;</div><div>&lt;/t:form&gt;</div><div>&nbsp;</div><div>&lt;/html&gt;</div></div><p>UiUtils.java</p><div class=\"code\"><div>package com.tapestry.app.util;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>import java.util.Random;</div><div>&nbsp;</div><div>public class UiUtils {</div><div>public static String splitString(String str, String split) {</div><div>int index = str.lastIndexOf(split);</div><div>return str.substring(index + 1);</div><div>}</div><div>&nbsp;</div><div>public static String splitStringPath(String str) {</div><div>str = str.replace(&quot;/&quot;, &quot;\\\\&quot;);</div><div>int index = str.lastIndexOf(&quot;\\\\&quot;);</div><div>return str.substring(index + 1);</div><div>}</div><div>&nbsp;</div><div>public static String createFileName(String name) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; Long randomNum = new Random().nextLong();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String radomStr = randomNum.toString().substring(2, 5);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String accessoryAutoName = new Date().getTime() + radomStr;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String extendedName = splitString(name, &quot;.&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String fileName = accessoryAutoName;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (extendedName != null) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fileName = accessoryAutoName + &quot;.&quot; + extendedName;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return fileName;</div><div>&nbsp; &nbsp; }</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第四十六讲：tapestry upload组件常用的配置详解', '<p>UploadDetail.java</p><p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.io.File;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport javax.servlet.http.HttpServletRequest;\r\n\r\nimport org.apache.tapestry5.annotations.Persist;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.ApplicationGlobals;\r\nimport org.apache.tapestry5.services.RequestGlobals;\r\nimport org.apache.tapestry5.upload.services.UploadedFile;\r\n\r\nimport com.tapestry.app.util.UiUtils;\r\n\r\npublic class UploadDetail {\r\n\r\n	@Inject\r\n	private ApplicationGlobals applicationGlobals;\r\n\r\n	@Inject\r\n	private RequestGlobals requestGlobals;\r\n\r\n	@Property\r\n	private UploadedFile file;\r\n\r\n	@Persist\r\n	@Property\r\n	private String dataUrl;\r\n\r\n	@Persist\r\n	@Property\r\n	private String tooBig;\r\n\r\n	protected final HttpServletRequest getRequest() {\r\n		return requestGlobals.getHTTPServletRequest();\r\n	}\r\n\r\n	void onSuccess() {\r\n		uploadImage();\r\n	}\r\n\r\n	void uploadImage() {\r\n		// 文件保存目录路径\r\n		String savePath = applicationGlobals.getServletContext().getRealPath(&quot;/uploadImages/&quot;) + &quot;\\\\&quot;;\r\n\r\n		// 文件保存目录URl地址\r\n		String saveUrl = getRequest().getContextPath() + &quot;/uploadImages/&quot;;\r\n\r\n		// 最大文件大小\r\n		long maxSize = 1048576;\r\n\r\n		// 检查目录\r\n		File uploadDir = new File(savePath);\r\n\r\n		if (!uploadDir.exists()) {\r\n			uploadDir.mkdirs();\r\n		}\r\n\r\n		// 检查目录写权限\r\n		if (!uploadDir.canWrite()) {\r\n			System.out.println(&quot;上传目录没有写权限。&quot;);\r\n			return;\r\n		}\r\n\r\n		// 文件夹名\r\n		String dirName = &quot;uploadData&quot;;\r\n		// 创建文件夹\r\n		savePath += dirName + &quot;/&quot;;\r\n		saveUrl += dirName + &quot;/&quot;;\r\n		File saveDirFile = new File(savePath);\r\n		if (!saveDirFile.exists()) {\r\n			saveDirFile.mkdirs();\r\n		}\r\n\r\n		String fileName = file.getFileName();\r\n		// 转换文件名为时间_随机数的名字格式如21120229_8888745544.gif\r\n		SimpleDateFormat df = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);\r\n		String newFileName = df.format(new Date()) + &quot;_&quot; + UiUtils.createFileName(fileName);\r\n\r\n		File copied = new File(savePath + newFileName);\r\n\r\n		long fileSize = file.getSize();\r\n\r\n		// 判断文件大小\r\n		if (fileSize &gt; maxSize) {\r\n			tooBig = &quot;上传失败！文件大小超过1M。&quot;;\r\n			System.out.println(&quot;上传失败！文件大小超过1M。&quot;);\r\n			return;\r\n		} else {\r\n			tooBig = &quot;&quot;;\r\n		}\r\n\r\n		file.write(copied);\r\n\r\n		// 图片上传成功之后返回的途径\r\n		dataUrl = saveUrl + newFileName;\r\n\r\n	}\r\n\r\n}</pre><br /></p><p>UploadDetail.tml</p><p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n文件路径：${dataUrl}&lt;br/&gt;\r\n \r\n&lt;t:form t:id=&quot;uploadForm&quot;&gt;\r\n        &lt;t:errors/&gt;\r\n        &lt;input t:type=&quot;upload&quot; t:id=&quot;file&quot; t:value=&quot;file&quot;  validate=&quot;required&quot;/&gt;&lt;span style=&quot;color:red&quot;&gt;${tooBig}&lt;/span&gt;\r\n        &lt;br/&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;\r\n&lt;/t:form&gt;\r\n \r\n&lt;/html&gt;</pre><br /></p><p>UiUtils.java</p><p><pre class=\"prettyprint lang-java\">package com.tapestry.app.util;\r\n\r\nimport java.util.Date;\r\nimport java.util.Random;\r\n\r\npublic class UiUtils {\r\n	public static String splitString(String str, String split) {\r\n		int index = str.lastIndexOf(split);\r\n		return str.substring(index + 1);\r\n	}\r\n\r\n	public static String splitStringPath(String str) {\r\n		str = str.replace(&quot;/&quot;, &quot;\\\\&quot;);\r\n		int index = str.lastIndexOf(&quot;\\\\&quot;);\r\n		return str.substring(index + 1);\r\n	}\r\n\r\n	public static String createFileName(String name) {\r\n		Long randomNum = new Random().nextLong();\r\n		String radomStr = randomNum.toString().substring(2, 5);\r\n		String accessoryAutoName = new Date().getTime() + radomStr;\r\n		String extendedName = splitString(name, &quot;.&quot;);\r\n		String fileName = accessoryAutoName;\r\n		if (extendedName != null) {\r\n			fileName = accessoryAutoName + &quot;.&quot; + extendedName;\r\n		}\r\n		return fileName;\r\n	}\r\n}</pre><br /></p>', 'Lesson 46：Tapestry Upload Configuration ', '');
INSERT INTO `td_c_technology` VALUES ('69', null, '2016-05-12 09:36:04', 'admin', '0755', '', 'admin', '2016-05-17 15:30:34', '<p>tapestry upload上传虽然简单易用，但并不能显示上传进度。swfupload是flash结合js写的上传，上传进度一目了然，下面是tapestry整合swfupload上传的代码：<br />&nbsp;</p><p>首先去swfupload官网<a title=\"\" target=\"_blank\" href=\"http://www.swfupload.org/\">http://www.swfupload.org/</a>下载文件，解压之后可看到，上传例子很多就以Simple Upload Demo为例，使用tapestry制作flash上传。<br />&nbsp;</p><p>第一步：把swfupload.js、swfupload.queue.js、fileprogress.js、handlers.js、swfupload.swf拷贝到工程静态目录webapp\\assets\\js\\swfupload目录下，文件夹没有的话可以自己在webapp下创建它。<br />&nbsp;</p><p>第二步：把TestImageNoText_65x29.png图片拷贝到webapp\\assets\\images目录下，把default.css拷贝到webapp\\assets\\style目录下面。</p><p>以上步骤完成之后就看下面代码：</p><p>SWFUpload.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Import;</div><div>&nbsp;</div><div>@Import(library={&quot;context:assets/js/swfupload/swfupload.js&quot;,&nbsp;</div><div>&quot;context:assets/js/swfupload/swfupload.queue.js&quot;,&nbsp;</div><div>&quot;context:assets/js/swfupload/fileprogress.js&quot;,&nbsp;</div><div>&quot;context:assets/js/swfupload/handlers.js&quot;},&nbsp;</div><div>stylesheet=&quot;context:assets/style/default.css&quot;)</div><div>public class SWFUpload {</div><div>&nbsp;</div><div>}</div></div><p>SWFUpload.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&lt;script type=&quot;text/javascript&quot;&gt;</div><div>var swfu;</div><div>&nbsp;</div><div>window.onload = function() {</div><div>var settings = {</div><div>flash_url : &quot;${context:assets/js/swfupload/swfupload.swf}&quot;,</div><div>upload_url: &quot;SWFUploadHander/&quot;,</div><div>//post_params: {&quot;PHPSESSID&quot; : &quot;&lt;?php echo session_id(); ?&gt;&quot;},</div><div>file_size_limit : &quot;100 MB&quot;,</div><div>file_types : &quot;*.*&quot;,</div><div>file_types_description : &quot;All Files&quot;,</div><div>file_upload_limit : 100,</div><div>file_queue_limit : 0,</div><div>custom_settings : {</div><div>progressTarget : &quot;fsUploadProgress&quot;,</div><div>cancelButtonId : &quot;btnCancel&quot;</div><div>},</div><div>debug: false,</div><div>&nbsp;</div><div>// Button settings</div><div>button_image_url: &quot;${context:assets/images/TestImageNoText_65x29.png}&quot;,</div><div>button_width: &quot;65&quot;,</div><div>button_height: &quot;29&quot;,</div><div>button_placeholder_id: &quot;spanButtonPlaceHolder&quot;,</div><div>button_text: \'&lt;span class=&quot;theFont&quot;&gt;上传&lt;/span&gt;\',</div><div>button_text_style: &quot;.theFont { font-size: 16; }&quot;,</div><div>button_text_left_padding: 12,</div><div>button_text_top_padding: 3,</div><div>&nbsp;</div><div>// The event handler functions are defined in handlers.js</div><div>file_queued_handler : fileQueued,</div><div>file_queue_error_handler : fileQueueError,</div><div>file_dialog_complete_handler : fileDialogComplete,</div><div>upload_start_handler : uploadStart,</div><div>upload_progress_handler : uploadProgress,</div><div>upload_error_handler : uploadError,</div><div>upload_success_handler : uploadSuccess,</div><div>upload_complete_handler : uploadComplete,</div><div>queue_complete_handler : queueComplete<span class=\"Apple-tab-span\" style=\"white-space:pre;\"> </span>// Queue plugin event</div><div>};</div><div>&nbsp;</div><div>swfu = new SWFUpload(settings);</div><div>&nbsp; &nbsp; };</div><div>&lt;/script&gt;</div><div>&lt;div id=&quot;content&quot;&gt;</div><div>&lt;h2&gt;Simple Demo&lt;/h2&gt;</div><div>&lt;form id=&quot;form1&quot; action=&quot;index.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</div><div>&lt;p&gt;This page demonstrates a simple usage of SWFUpload. &nbsp;It uses the Queue Plugin to simplify uploading or cancelling all queued files.&lt;/p&gt;</div><div>&nbsp;</div><div>&lt;div class=&quot;fieldset flash&quot; id=&quot;fsUploadProgress&quot;&gt;</div><div>&lt;span class=&quot;legend&quot;&gt;Upload Queue&lt;/span&gt;</div><div>&lt;/div&gt;</div><div>&lt;div id=&quot;divStatus&quot;&gt;0 Files Uploaded&lt;/div&gt;</div><div>&lt;div&gt;</div><div>&lt;span id=&quot;spanButtonPlaceHolder&quot;&gt;&lt;/span&gt;</div><div>&lt;input id=&quot;btnCancel&quot; type=&quot;button&quot; value=&quot;Cancel All Uploads&quot; onclick=&quot;swfu.cancelQueue();&quot; disabled=&quot;disabled&quot; style=&quot;margin-left: 2px; font-size: 8pt; height: 29px;&quot; /&gt;</div><div>&lt;/div&gt;</div><div>&nbsp;</div><div>&lt;/form&gt;</div><div>&lt;/div&gt;</div><div>&lt;/html&gt;</div></div><p>SWFUploadHander.java</p><div class=\"code\"><div>/**</div><div>&nbsp;* 项目名称：TapestryStart</div><div>&nbsp;* 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql</div><div><div>&nbsp;* 网址：<a href=\"http://www.flywind.org\">http://www.flywind.org</a></div></div><div>&nbsp;* 版本：1.0</div><div>&nbsp;* 编写：飞风</div><div>&nbsp;* 时间：2012-02-29</div><div>&nbsp;*/</div><div>package com.tapestry.app.pages;</div><div>&nbsp;</div><div>import java.io.File;</div><div>import java.text.SimpleDateFormat;</div><div>import java.util.Date;</div><div>&nbsp;</div><div>import javax.servlet.http.HttpServletRequest;</div><div>&nbsp;</div><div>import org.apache.tapestry5.annotations.Property;</div><div>import org.apache.tapestry5.ioc.annotations.Inject;</div><div>import org.apache.tapestry5.services.ApplicationGlobals;</div><div>import org.apache.tapestry5.services.RequestGlobals;</div><div>import org.apache.tapestry5.upload.services.MultipartDecoder;</div><div>import org.apache.tapestry5.upload.services.UploadedFile;</div><div>&nbsp;</div><div>import com.tapestry.app.util.UiUtils;</div><div>&nbsp;</div><div>public class SWFUploadHander {</div><div>&nbsp;</div><div>@Inject</div><div>private ApplicationGlobals applicationGlobals;</div><div>&nbsp;</div><div>@Inject</div><div>private RequestGlobals requestGlobals;</div><div>&nbsp;</div><div>@SuppressWarnings(&quot;unused&quot;)</div><div>@Property</div><div>private UploadedFile file;</div><div>&nbsp;</div><div>@Inject</div><div>private MultipartDecoder decoder;</div><div>&nbsp;</div><div>void onActivate() throws Exception{</div><div>UploadedFile file = decoder.getFileUpload(&quot;Filedata&quot;);</div><div>&nbsp;</div><div>// 文件保存目录路径</div><div>String savePath = applicationGlobals.getServletContext().getRealPath(&quot;/uploadImages/&quot;) + &quot;\\\\&quot;;</div><div>&nbsp;</div><div>// 文件保存目录UR</div><div>//String saveUrl = getRequest().getContextPath() + &quot;/uploadImages/&quot;;</div><div>&nbsp;</div><div>//最大文件大小</div><div>long maxSize = 1048576;</div><div>&nbsp;</div><div>// 检查目录</div><div>File uploadDir = new File(savePath);</div><div>&nbsp;</div><div>if (!uploadDir.exists()) {</div><div>uploadDir.mkdirs();</div><div>}</div><div>&nbsp;</div><div>// 检查目录写权限</div><div>if (!uploadDir.canWrite()) {</div><div>System.out.println(&quot;上传目录没有写权限。&quot;);</div><div>return;</div><div>}</div><div>&nbsp;</div><div>//文件夹名字</div><div>String dirName = &quot;swfData&quot;;</div><div>// 创建文件夹</div><div>savePath += dirName + &quot;/&quot;;</div><div>//saveUrl += dirName + &quot;/&quot;;</div><div>File saveDirFile = new File(savePath);</div><div>if (!saveDirFile.exists()) {</div><div>saveDirFile.mkdirs();</div><div>}</div><div>&nbsp;</div><div>String fileName = file.getFileName();</div><div>&nbsp;</div><div>SimpleDateFormat df = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);</div><div>String newFileName = df.format(new Date()) + &quot;_&quot; + UiUtils.createFileName(fileName);</div><div>&nbsp;</div><div>File copied = new File(savePath + newFileName);</div><div>&nbsp;</div><div>long fileSize = file.getSize();</div><div>&nbsp;</div><div>if(fileSize &gt; maxSize){</div><div>System.out.println(&quot;上传文件大小超过限制。&quot;);</div><div>return;</div><div>}</div><div>&nbsp;</div><div>file.write(copied);</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div><div>protected final HttpServletRequest getRequest() {</div><div>return requestGlobals.getHTTPServletRequest();</div><div>}</div><div>&nbsp;</div><div>}</div><div>&nbsp;</div></div><p>SWFUploadHander.tml</p><div class=\"code\"><div>&lt;html&nbsp;<span style=\"line-height: 1.5;\">xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;</span></div><div>&nbsp;</div><div>&lt;/html&gt;</div></div><p>UiUtils.java</p><div class=\"code\"><div>package com.tapestry.app.util;</div><div>&nbsp;</div><div>import java.util.Date;</div><div>import java.util.Random;</div><div>&nbsp;</div><div>public class UiUtils {</div><div>public static String splitString(String str, String split) {</div><div>int index = str.lastIndexOf(split);</div><div>return str.substring(index + 1);</div><div>}</div><div>&nbsp;</div><div>public static String splitStringPath(String str) {</div><div>str = str.replace(&quot;/&quot;, &quot;\\\\&quot;);</div><div>int index = str.lastIndexOf(&quot;\\\\&quot;);</div><div>return str.substring(index + 1);</div><div>}</div><div>&nbsp;</div><div>public static String createFileName(String name) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; Long randomNum = new Random().nextLong();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String radomStr = randomNum.toString().substring(2, 5);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String accessoryAutoName = new Date().getTime() + radomStr;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String extendedName = splitString(name, &quot;.&quot;);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; String fileName = accessoryAutoName;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if (extendedName != null) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fileName = accessoryAutoName + &quot;.&quot; + extendedName;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return fileName;</div><div>&nbsp; &nbsp; }</div><div>}</div><div>&nbsp;</div></div>', null, '17', '第四十七讲：tapestry 与 swfupload上传', '<p>Swfupload download&nbsp;<a title=\"\" target=\"_blank\" href=\"http://www.swfupload.org/\">http://www.swfupload.org/</a></p><p>SWFUpload.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport org.apache.tapestry5.annotations.Import;\r\n\r\n@Import(library = { &quot;context:assets/js/swfupload/swfupload.js&quot;, &quot;context:assets/js/swfupload/swfupload.queue.js&quot;,\r\n		&quot;context:assets/js/swfupload/fileprogress.js&quot;,\r\n		&quot;context:assets/js/swfupload/handlers.js&quot; }, stylesheet = &quot;context:assets/style/default.css&quot;)\r\npublic class SWFUpload {\r\n\r\n}</pre><p></p><p>SWFUpload.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\nvar swfu;\r\n \r\nwindow.onload = function() {\r\nvar settings = {\r\nflash_url : &quot;${context:assets/js/swfupload/swfupload.swf}&quot;,\r\nupload_url: &quot;SWFUploadHander/&quot;,\r\n//post_params: {&quot;PHPSESSID&quot; : &quot;&lt;?php echo session_id(); ?&gt;&quot;},\r\nfile_size_limit : &quot;100 MB&quot;,\r\nfile_types : &quot;*.*&quot;,\r\nfile_types_description : &quot;All Files&quot;,\r\nfile_upload_limit : 100,\r\nfile_queue_limit : 0,\r\ncustom_settings : {\r\nprogressTarget : &quot;fsUploadProgress&quot;,\r\ncancelButtonId : &quot;btnCancel&quot;\r\n},\r\ndebug: false,\r\n \r\n// Button settings\r\nbutton_image_url: &quot;${context:assets/images/TestImageNoText_65x29.png}&quot;,\r\nbutton_width: &quot;65&quot;,\r\nbutton_height: &quot;29&quot;,\r\nbutton_placeholder_id: &quot;spanButtonPlaceHolder&quot;,\r\nbutton_text: \'&lt;span class=&quot;theFont&quot;&gt;上传&lt;/span&gt;\',\r\nbutton_text_style: &quot;.theFont { font-size: 16; }&quot;,\r\nbutton_text_left_padding: 12,\r\nbutton_text_top_padding: 3,\r\n \r\n// The event handler functions are defined in handlers.js\r\nfile_queued_handler : fileQueued,\r\nfile_queue_error_handler : fileQueueError,\r\nfile_dialog_complete_handler : fileDialogComplete,\r\nupload_start_handler : uploadStart,\r\nupload_progress_handler : uploadProgress,\r\nupload_error_handler : uploadError,\r\nupload_success_handler : uploadSuccess,\r\nupload_complete_handler : uploadComplete,\r\nqueue_complete_handler : queueComplete // Queue plugin event\r\n};\r\n \r\nswfu = new SWFUpload(settings);\r\n    };\r\n&lt;/script&gt;\r\n&lt;div id=&quot;content&quot;&gt;\r\n&lt;h2&gt;Simple Demo&lt;/h2&gt;\r\n&lt;form id=&quot;form1&quot; action=&quot;index.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n&lt;p&gt;This page demonstrates a simple usage of SWFUpload.  It uses the Queue Plugin to simplify uploading or cancelling all queued files.&lt;/p&gt;\r\n \r\n&lt;div class=&quot;fieldset flash&quot; id=&quot;fsUploadProgress&quot;&gt;\r\n&lt;span class=&quot;legend&quot;&gt;Upload Queue&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;div id=&quot;divStatus&quot;&gt;0 Files Uploaded&lt;/div&gt;\r\n&lt;div&gt;\r\n&lt;span id=&quot;spanButtonPlaceHolder&quot;&gt;&lt;/span&gt;\r\n&lt;input id=&quot;btnCancel&quot; type=&quot;button&quot; value=&quot;Cancel All Uploads&quot; onclick=&quot;swfu.cancelQueue();&quot; disabled=&quot;disabled&quot; style=&quot;margin-left: 2px; font-size: 8pt; height: 29px;&quot; /&gt;\r\n&lt;/div&gt;\r\n \r\n&lt;/form&gt;\r\n&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p><p>SWFUploadHander.java</p><p></p><pre class=\"prettyprint lang-java\">/**\r\n * 项目名称：TapestryStart\r\n * 开发模式：Maven+Tapestry5.x+Tapestry-hibernate+Mysql\r\n * 网址：http://www.flywind.org\r\n * 版本：1.0\r\n * 编写：飞风\r\n * 时间：2012-02-29\r\n */\r\npackage com.tapestry.app.pages;\r\n\r\nimport java.io.File;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.services.ApplicationGlobals;\r\nimport org.apache.tapestry5.services.RequestGlobals;\r\nimport org.apache.tapestry5.upload.services.MultipartDecoder;\r\nimport org.apache.tapestry5.upload.services.UploadedFile;\r\n\r\nimport com.tapestry.app.util.UiUtils;\r\n\r\npublic class SWFUploadHander {\r\n\r\n	@Inject\r\n	private ApplicationGlobals applicationGlobals;\r\n\r\n	@Inject\r\n	private RequestGlobals requestGlobals;\r\n\r\n	@SuppressWarnings(&quot;unused&quot;)\r\n	@Property\r\n	private UploadedFile file;\r\n\r\n	@Inject\r\n	private MultipartDecoder decoder;\r\n\r\n	void onActivate() throws Exception {\r\n		UploadedFile file = decoder.getFileUpload(&quot;Filedata&quot;);\r\n\r\n		// 文件保存目录路径\r\n		String savePath = applicationGlobals.getServletContext().getRealPath(&quot;/uploadImages/&quot;) + &quot;\\\\&quot;;\r\n\r\n		// 文件保存目录UR\r\n		// String saveUrl = getRequest().getContextPath() + &quot;/uploadImages/&quot;;\r\n\r\n		// 最大文件大小\r\n		long maxSize = 1048576;\r\n\r\n		// 检查目录\r\n		File uploadDir = new File(savePath);\r\n\r\n		if (!uploadDir.exists()) {\r\n			uploadDir.mkdirs();\r\n		}\r\n\r\n		// 检查目录写权限\r\n		if (!uploadDir.canWrite()) {\r\n			System.out.println(&quot;上传目录没有写权限。&quot;);\r\n			return;\r\n		}\r\n\r\n		// 文件夹名字\r\n		String dirName = &quot;swfData&quot;;\r\n		// 创建文件夹\r\n		savePath += dirName + &quot;/&quot;;\r\n		// saveUrl += dirName + &quot;/&quot;;\r\n		File saveDirFile = new File(savePath);\r\n		if (!saveDirFile.exists()) {\r\n			saveDirFile.mkdirs();\r\n		}\r\n\r\n		String fileName = file.getFileName();\r\n\r\n		SimpleDateFormat df = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);\r\n		String newFileName = df.format(new Date()) + &quot;_&quot; + UiUtils.createFileName(fileName);\r\n\r\n		File copied = new File(savePath + newFileName);\r\n\r\n		long fileSize = file.getSize();\r\n\r\n		if (fileSize &gt; maxSize) {\r\n			System.out.println(&quot;上传文件大小超过限制。&quot;);\r\n			return;\r\n		}\r\n\r\n		file.write(copied);\r\n\r\n	}\r\n\r\n	protected final HttpServletRequest getRequest() {\r\n		return requestGlobals.getHTTPServletRequest();\r\n	}\r\n\r\n}</pre><p></p><p>SWFUploadHander.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_3.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n \r\n&lt;/html&gt;</pre><p></p><p>UiUtils.java</p><p></p><pre class=\"prettyprint lang-java\">package com.tapestry.app.util;\r\n\r\nimport java.util.Date;\r\nimport java.util.Random;\r\n\r\npublic class UiUtils {\r\n	public static String splitString(String str, String split) {\r\n		int index = str.lastIndexOf(split);\r\n		return str.substring(index + 1);\r\n	}\r\n\r\n	public static String splitStringPath(String str) {\r\n		str = str.replace(&quot;/&quot;, &quot;\\\\&quot;);\r\n		int index = str.lastIndexOf(&quot;\\\\&quot;);\r\n		return str.substring(index + 1);\r\n	}\r\n\r\n	public static String createFileName(String name) {\r\n		Long randomNum = new Random().nextLong();\r\n		String radomStr = randomNum.toString().substring(2, 5);\r\n		String accessoryAutoName = new Date().getTime() + radomStr;\r\n		String extendedName = splitString(name, &quot;.&quot;);\r\n		String fileName = accessoryAutoName;\r\n		if (extendedName != null) {\r\n			fileName = accessoryAutoName + &quot;.&quot; + extendedName;\r\n		}\r\n		return fileName;\r\n	}\r\n}</pre><br /><p></p>', 'Lesson 47：Tapestry Swfupload', '');
INSERT INTO `td_c_technology` VALUES ('229', null, '2016-06-08 14:30:15', 'admin', '0755', '', 'admin', '2016-06-12 09:27:36', '<p><a href=\"http://tapestry.flywind.org/examples/tw/FDatetimepickerTest\" target=\"_blank\">View demo</a></p><p>FDatetimepickerTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.tw;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.json.JSONObject;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry Widgets Components&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月8日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class FDatetimepickerTest {\r\n\r\n	@Property\r\n	private String name,name2;\r\n	\r\n	public JSONObject getOptions(){\r\n		JSONObject opts = new JSONObject();\r\n		opts.put(&quot;timepicker&quot;, true);\r\n		opts.put(&quot;datepicker&quot;, false);\r\n		opts.put(&quot;format&quot;, &quot;H:i&quot;);\r\n		return opts;\r\n	}\r\n}\r\n</pre>FDatetimepickerTest.tml<br /><p></p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;\r\n	xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;\r\n			FDatetimepicker组件,\r\n			&lt;a href=&quot;http://xdsoft.net/jqplugins/datetimepicker/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;\r\n			,参数如下:\r\n		&lt;/h3&gt;\r\n		&lt;table class=&quot;table table-hover table-bordered table-striped&quot; border=&quot;0&quot;&gt;\r\n			&lt;thead&gt;\r\n				&lt;tr style=&quot;white-space: nowrap;&quot;&gt;\r\n					&lt;th&gt;名称&lt;/th&gt;\r\n					&lt;th&gt;类型&lt;/th&gt;\r\n					&lt;th&gt;标志&lt;/th&gt;\r\n					&lt;th&gt;默认&lt;/th&gt;\r\n					&lt;th&gt;默认前缀&lt;/th&gt;\r\n					&lt;th&gt;此版本开始&lt;/th&gt;\r\n					&lt;th&gt;描述&lt;/th&gt;\r\n				&lt;/tr&gt;\r\n			&lt;/thead&gt;\r\n			&lt;tbody&gt;\r\n				&lt;tr&gt;\r\n					&lt;td&gt;params&lt;/td&gt;\r\n					&lt;td&gt;JSONObject&lt;/td&gt;\r\n					&lt;td&gt;&lt;/td&gt;\r\n					&lt;td&gt;{\'lang\':\'ch\',\'format\':\'Y-m-d\',\'timepicker\':false,\'datepicker\':true,\'yearStart\':\'2000\',\'yearEnd\':\'2050\',\'todayButton\':true}&lt;/td&gt;\r\n					&lt;td&gt;&lt;/td&gt;\r\n					&lt;td&gt;1.0&lt;/td&gt;\r\n					&lt;td&gt;\r\n						日历组件的组件的默认参数,lang:ch(语言选择),format:Y-m-d(格式化日期Y-m-d\r\n						H:i),timepicker:false(是否开启时间选项),datepicker:true(是否开启日期选型),\r\n						yearStart:2000(设置最小年份),yearEnd:2050(设置最大年份),todayButton:true(是否开启选择今天按钮).参数可以随意覆盖与添加,更详细参数请参考\r\n						&lt;a href=&quot;http://xdsoft.net/jqplugins/datetimepicker/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;\r\n					&lt;/td&gt;\r\n				&lt;/tr&gt;\r\n			&lt;/tbody&gt;\r\n		&lt;/table&gt;\r\n		&lt;t:form autofocus=&quot;false&quot;&gt;\r\n			&lt;t:textfield style=&quot;margin-top:15px;&quot; class=&quot;input-time&quot;\r\n				t:id=&quot;name&quot; t:mixins=&quot;widgets/FDatetimepicker&quot; /&gt;\r\n			&lt;t:textfield style=&quot;margin-top:15px;&quot; t:id=&quot;name2&quot;\r\n				t:mixins=&quot;widgets/FDatetimepicker&quot; FDatetimepicker.params=&quot;${options}&quot; /&gt;\r\n		&lt;/t:form&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><div><br /></div>', null, '14', '[TW1.0]第十讲：Tapestry FDatetimepicker组件', '<p><a href=\"http://tapestry.flywind.org/examples/tw/FDatetimepickerTest\" target=\"_blank\">View demo</a></p><p>FDatetimepickerTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.tw;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.json.JSONObject;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry Widgets Components&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月8日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class FDatetimepickerTest {\r\n\r\n	@Property\r\n	private String name,name2;\r\n	\r\n	public JSONObject getOptions(){\r\n		JSONObject opts = new JSONObject();\r\n		opts.put(&quot;timepicker&quot;, true);\r\n		opts.put(&quot;datepicker&quot;, false);\r\n		opts.put(&quot;format&quot;, &quot;H:i&quot;);\r\n		return opts;\r\n	}\r\n}\r\n</pre>FDatetimepickerTest.tml<br /><p></p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;\r\n	xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;\r\n			FDatetimepicker组件,\r\n			&lt;a href=&quot;http://xdsoft.net/jqplugins/datetimepicker/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;\r\n			,参数如下:\r\n		&lt;/h3&gt;\r\n		&lt;table class=&quot;table table-hover table-bordered table-striped&quot; border=&quot;0&quot;&gt;\r\n			&lt;thead&gt;\r\n				&lt;tr style=&quot;white-space: nowrap;&quot;&gt;\r\n					&lt;th&gt;名称&lt;/th&gt;\r\n					&lt;th&gt;类型&lt;/th&gt;\r\n					&lt;th&gt;标志&lt;/th&gt;\r\n					&lt;th&gt;默认&lt;/th&gt;\r\n					&lt;th&gt;默认前缀&lt;/th&gt;\r\n					&lt;th&gt;此版本开始&lt;/th&gt;\r\n					&lt;th&gt;描述&lt;/th&gt;\r\n				&lt;/tr&gt;\r\n			&lt;/thead&gt;\r\n			&lt;tbody&gt;\r\n				&lt;tr&gt;\r\n					&lt;td&gt;params&lt;/td&gt;\r\n					&lt;td&gt;JSONObject&lt;/td&gt;\r\n					&lt;td&gt;&lt;/td&gt;\r\n					&lt;td&gt;{\'lang\':\'ch\',\'format\':\'Y-m-d\',\'timepicker\':false,\'datepicker\':true,\'yearStart\':\'2000\',\'yearEnd\':\'2050\',\'todayButton\':true}&lt;/td&gt;\r\n					&lt;td&gt;&lt;/td&gt;\r\n					&lt;td&gt;1.0&lt;/td&gt;\r\n					&lt;td&gt;\r\n						日历组件的组件的默认参数,lang:ch(语言选择),format:Y-m-d(格式化日期Y-m-d\r\n						H:i),timepicker:false(是否开启时间选项),datepicker:true(是否开启日期选型),\r\n						yearStart:2000(设置最小年份),yearEnd:2050(设置最大年份),todayButton:true(是否开启选择今天按钮).参数可以随意覆盖与添加,更详细参数请参考\r\n						&lt;a href=&quot;http://xdsoft.net/jqplugins/datetimepicker/&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;\r\n					&lt;/td&gt;\r\n				&lt;/tr&gt;\r\n			&lt;/tbody&gt;\r\n		&lt;/table&gt;\r\n		&lt;t:form autofocus=&quot;false&quot;&gt;\r\n			&lt;t:textfield style=&quot;margin-top:15px;&quot; class=&quot;input-time&quot;\r\n				t:id=&quot;name&quot; t:mixins=&quot;widgets/FDatetimepicker&quot; /&gt;\r\n			&lt;t:textfield style=&quot;margin-top:15px;&quot; t:id=&quot;name2&quot;\r\n				t:mixins=&quot;widgets/FDatetimepicker&quot; FDatetimepicker.params=&quot;${options}&quot; /&gt;\r\n		&lt;/t:form&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', '[TW1.0]Lesson 10：Tapestry FDatetimepicker', '');
INSERT INTO `td_c_technology` VALUES ('230', null, '2016-06-08 14:36:34', 'admin', '0755', '', 'admin', '2016-06-12 09:28:21', '<p><a href=\"http://tapestry.flywind.org/examples/tw/FSubgridTest\" target=\"_blank\">View demo</a></p><p>FSubgridTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.tw;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.annotations.OnEvent;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONArray;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.flywind.tapestry.business.example.ExampleService;\r\nimport org.flywind.tapestry.entities.example.Example;\r\nimport org.flywind.tapestry.entities.example.Item;\r\nimport org.flywind.widgets.WidgetSymbolConstants;\r\nimport org.flywind.widgets.core.dao.FPage;\r\nimport org.flywind.widgets.utils.JQueryUtils;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry Widgets Components&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月8日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class FSubgridTest {\r\n\r\n	@Inject\r\n	private ExampleService exampleService;\r\n	\r\n	@Property\r\n	private List&lt;Example&gt; examples;\r\n	\r\n	@Property\r\n	private List&lt;Item&gt; items;\r\n		\r\n	@Property\r\n	private String url,delUrl;\r\n	\r\n	@InjectComponent\r\n	private Zone zoneOne;\r\n	\r\n	@Inject\r\n	private Request request;\r\n	\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n	\r\n	@OnEvent(component=&quot;newContracts2&quot;, value=WidgetSymbolConstants.EASYUI_SUBGRID_LOAD_DATA)\r\n	public void filterExamplesData2(){\r\n		String customerCode = &quot;0755&quot;;\r\n		examples = exampleService.getAllExamples(customerCode,(FPage)request.getAttribute(&quot;page&quot;));\r\n	}\r\n\r\n	public void setupRender(){\r\n		url = componentResources.createEventLink(&quot;show&quot;).toAbsoluteURI();\r\n		delUrl = componentResources.createEventLink(&quot;del&quot;).toAbsoluteURI();\r\n	}\r\n	\r\n	public JSONObject onShow(Long id){\r\n		items = exampleService.getItemsByExampleId(id);  \r\n		return JQueryUtils.toGridJson(items, items.size());\r\n	}\r\n	\r\n	public void onDel(Long id){\r\n		System.out.println(id);\r\n	}\r\n	\r\n	public JSONArray getOpts(){\r\n		\r\n		JSONObject nj = new JSONObject();\r\n		nj.put(&quot;field&quot;, &quot;id&quot;);\r\n		nj.put(&quot;title&quot;, &quot;编号&quot;);\r\n		nj.put(&quot;width&quot;, 50);\r\n		\r\n		JSONObject uj = new JSONObject();\r\n		uj.put(&quot;field&quot;, &quot;userName&quot;);\r\n		uj.put(&quot;title&quot;, &quot;用户名&quot;);\r\n		uj.put(&quot;width&quot;, 100);\r\n		\r\n		JSONObject cj = new JSONObject();\r\n		cj.put(&quot;field&quot;, &quot;creater&quot;);\r\n		cj.put(&quot;title&quot;, &quot;创建人&quot;);\r\n		cj.put(&quot;width&quot;, 300);\r\n		\r\n		JSONArray d = new JSONArray();\r\n		d.put(nj);\r\n		d.put(uj);\r\n		d.put(cj);\r\n		\r\n		return d;\r\n	}\r\n}\r\n</pre>FSubgridTest.tml<br /><p></p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;\r\n	xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;FSubgrid组件&lt;/h3&gt;\r\n		&lt;div id=&quot;selectCondition&quot;&gt;\r\n			&lt;div class=&quot;btn-group mr10&quot;&gt;\r\n				&lt;t:widgets.fdatagridbtn t:clientId=&quot;delete&quot;\r\n					zone=&quot;zoneOne&quot; text=&quot;删除&quot; url=&quot;${delUrl}&quot; alertMsg=&quot;没有选择&quot; gridId=&quot;newContracts2&quot; /&gt;\r\n			&lt;/div&gt;\r\n		&lt;/div&gt;&lt;!-- selectCondition end --&gt;\r\n		&lt;t:zone t:id=&quot;zoneOne&quot; id=&quot;zoneOne&quot;&gt;\r\n			&lt;div id=&quot;gridContent&quot;&gt;\r\n				&lt;table t:type=&quot;widgets/fsubgrid&quot; t:id=&quot;newContracts2&quot;\r\n					t:source=&quot;examples&quot; t:subUrl=&quot;${url}&quot; t:subColumns=&quot;${opts}&quot;\r\n					t:fixLayout=&quot;true&quot;&gt;\r\n					&lt;thead&gt;\r\n						&lt;tr&gt;\r\n							&lt;th data-options=&quot;field:\'userName\',width:150,title:\'用户名\'&quot;&gt;&lt;/th&gt;\r\n							&lt;th data-options=&quot;field:\'creater\',width:300,title:\'创建者\'&quot;&gt;&lt;/th&gt;\r\n						&lt;/tr&gt;\r\n					&lt;/thead&gt;\r\n				&lt;/table&gt;\r\n			&lt;/div&gt;\r\n		&lt;/t:zone&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><div><br /></div>', null, '14', '[TW1.0]第十一讲：Tapestry FSubgrid组件', '<p><a href=\"http://tapestry.flywind.org/examples/tw/FSubgridTest\" target=\"_blank\">View demo</a></p><p>FSubgridTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.tw;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.InjectComponent;\r\nimport org.apache.tapestry5.annotations.OnEvent;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.corelib.components.Zone;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONArray;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.flywind.tapestry.business.example.ExampleService;\r\nimport org.flywind.tapestry.entities.example.Example;\r\nimport org.flywind.tapestry.entities.example.Item;\r\nimport org.flywind.widgets.WidgetSymbolConstants;\r\nimport org.flywind.widgets.core.dao.FPage;\r\nimport org.flywind.widgets.utils.JQueryUtils;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry Widgets Components&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月8日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class FSubgridTest {\r\n\r\n	@Inject\r\n	private ExampleService exampleService;\r\n	\r\n	@Property\r\n	private List&lt;Example&gt; examples;\r\n	\r\n	@Property\r\n	private List&lt;Item&gt; items;\r\n		\r\n	@Property\r\n	private String url,delUrl;\r\n	\r\n	@InjectComponent\r\n	private Zone zoneOne;\r\n	\r\n	@Inject\r\n	private Request request;\r\n	\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n	\r\n	@OnEvent(component=&quot;newContracts2&quot;, value=WidgetSymbolConstants.EASYUI_SUBGRID_LOAD_DATA)\r\n	public void filterExamplesData2(){\r\n		String customerCode = &quot;0755&quot;;\r\n		examples = exampleService.getAllExamples(customerCode,(FPage)request.getAttribute(&quot;page&quot;));\r\n	}\r\n\r\n	public void setupRender(){\r\n		url = componentResources.createEventLink(&quot;show&quot;).toAbsoluteURI();\r\n		delUrl = componentResources.createEventLink(&quot;del&quot;).toAbsoluteURI();\r\n	}\r\n	\r\n	public JSONObject onShow(Long id){\r\n		items = exampleService.getItemsByExampleId(id);  \r\n		return JQueryUtils.toGridJson(items, items.size());\r\n	}\r\n	\r\n	public void onDel(Long id){\r\n		System.out.println(id);\r\n	}\r\n	\r\n	public JSONArray getOpts(){\r\n		\r\n		JSONObject nj = new JSONObject();\r\n		nj.put(&quot;field&quot;, &quot;id&quot;);\r\n		nj.put(&quot;title&quot;, &quot;编号&quot;);\r\n		nj.put(&quot;width&quot;, 50);\r\n		\r\n		JSONObject uj = new JSONObject();\r\n		uj.put(&quot;field&quot;, &quot;userName&quot;);\r\n		uj.put(&quot;title&quot;, &quot;用户名&quot;);\r\n		uj.put(&quot;width&quot;, 100);\r\n		\r\n		JSONObject cj = new JSONObject();\r\n		cj.put(&quot;field&quot;, &quot;creater&quot;);\r\n		cj.put(&quot;title&quot;, &quot;创建人&quot;);\r\n		cj.put(&quot;width&quot;, 300);\r\n		\r\n		JSONArray d = new JSONArray();\r\n		d.put(nj);\r\n		d.put(uj);\r\n		d.put(cj);\r\n		\r\n		return d;\r\n	}\r\n}\r\n</pre>FSubgridTest.tml<br /><p></p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;\r\n	xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;FSubgrid组件&lt;/h3&gt;\r\n		&lt;div id=&quot;selectCondition&quot;&gt;\r\n			&lt;div class=&quot;btn-group mr10&quot;&gt;\r\n				&lt;t:widgets.fdatagridbtn t:clientId=&quot;delete&quot;\r\n					zone=&quot;zoneOne&quot; text=&quot;删除&quot; url=&quot;${delUrl}&quot; alertMsg=&quot;没有选择&quot; gridId=&quot;newContracts2&quot; /&gt;\r\n			&lt;/div&gt;\r\n		&lt;/div&gt;&lt;!-- selectCondition end --&gt;\r\n		&lt;t:zone t:id=&quot;zoneOne&quot; id=&quot;zoneOne&quot;&gt;\r\n			&lt;div id=&quot;gridContent&quot;&gt;\r\n				&lt;table t:type=&quot;widgets/fsubgrid&quot; t:id=&quot;newContracts2&quot;\r\n					t:source=&quot;examples&quot; t:subUrl=&quot;${url}&quot; t:subColumns=&quot;${opts}&quot;\r\n					t:fixLayout=&quot;true&quot;&gt;\r\n					&lt;thead&gt;\r\n						&lt;tr&gt;\r\n							&lt;th data-options=&quot;field:\'userName\',width:150,title:\'用户名\'&quot;&gt;&lt;/th&gt;\r\n							&lt;th data-options=&quot;field:\'creater\',width:300,title:\'创建者\'&quot;&gt;&lt;/th&gt;\r\n						&lt;/tr&gt;\r\n					&lt;/thead&gt;\r\n				&lt;/table&gt;\r\n			&lt;/div&gt;\r\n		&lt;/t:zone&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', '[TW1.0]Lesson 11：Tapestry FSubgrid', '');
INSERT INTO `td_c_technology` VALUES ('231', null, '2016-06-08 14:45:46', 'admin', '0755', '', 'admin', '2016-06-12 09:28:58', '<p><a href=\"http://tapestry.flywind.org/examples/tw/FEditorTest\" target=\"_blank\">View demo</a></p><p>图片上传实现请看教程&nbsp;<a href=\"http://www.flywind.org/zh_CN/blogdetial/132\" target=\"_blank\">http://www.flywind.org/zh_CN/blogdetial/132</a></p><p>FEditorTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.tw;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry Widgets Components&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月8日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class FEditorTest {\r\n\r\n	@Property\r\n	private String content;\r\n}\r\n</pre>FEditorTest.tml<br /><p></p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;\r\n	xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;FEditor组件&lt;/h3&gt;\r\n		&lt;t:form&gt;\r\n			&lt;t:textarea t:id=&quot;content&quot; t:mixins=&quot;widgets/editor&quot;\r\n				style=&quot;height:200px;&quot; editor.upImgUrl=&quot;UploadHander&quot; /&gt;\r\n			&lt;t:submit value=&quot;kis&quot; /&gt;\r\n		&lt;/t:form&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><div><br /></div>', null, '14', '[TW1.0]第十二讲：Tapestry FEditor富文本编辑器组件', '<p><a href=\"http://tapestry.flywind.org/examples/tw/FEditorTest\" target=\"_blank\">View demo</a></p><p>How to upload images? See&nbsp;<a href=\"http://www.flywind.org/en/blogdetial/132\" target=\"_blank\">http://www.flywind.org/en/blogdetial/132</a></p><p>FEditorTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.tw;\r\n\r\nimport org.apache.tapestry5.annotations.Property;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry Widgets Components&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月8日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class FEditorTest {\r\n\r\n	@Property\r\n	private String content;\r\n}\r\n</pre>FEditorTest.tml<br /><p></p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;\r\n	xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;FEditor组件&lt;/h3&gt;\r\n		&lt;t:form&gt;\r\n			&lt;t:textarea t:id=&quot;content&quot; t:mixins=&quot;widgets/editor&quot;\r\n				style=&quot;height:200px;&quot; editor.upImgUrl=&quot;UploadHander&quot; /&gt;\r\n			&lt;t:submit value=&quot;kis&quot; /&gt;\r\n		&lt;/t:form&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p>', '[TW1.0]Lesson 12：Tapestry FEditor', '');
INSERT INTO `td_c_technology` VALUES ('233', null, '2016-06-16 10:26:45', 'admin', '0755', '', 'admin', '2016-06-24 10:54:00', '<p><a href=\"http://tapestry.flywind.org/examples/t54/HtmlValidateFormTest\" target=\"_blank\">View demo</a></p><p>HtmlValidateFormTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.t54;\r\n\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry5.4 API&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月3日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class HtmlValidateFormTest {\r\n	\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n	\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n	\r\n	@Property\r\n	private String saveUrl;\r\n	\r\n	@Inject\r\n	private Request request;\r\n	\r\n	public void setupRender(){\r\n		saveUrl = componentResources.createEventLink(&quot;saveForm&quot;).toAbsoluteURI();\r\n		javaScriptSupport.require(&quot;init-htmlvalidateform&quot;).invoke(&quot;init&quot;).with(saveUrl);;\r\n	}\r\n	\r\n	//可以理解为控制层的方法\r\n	public JSONObject onSaveForm(){\r\n		String name = request.getParameter(&quot;name&quot;);\r\n		JSONObject spec = new JSONObject();\r\n		try {\r\n			spec.put(&quot;name&quot;, &quot;Hello &quot;+name);\r\n			spec.put(&quot;result&quot;, &quot;Success...&quot;);\r\n			return spec;\r\n		} catch (Exception e) {\r\n			spec.put(&quot;result&quot;, &quot;Failed!!!&quot;);\r\n			return spec;\r\n		}\r\n		\r\n	}\r\n}\r\n</pre><p>HtmlValidateFormTest.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;Tapestry Html Form and jQuery validate&lt;/h3&gt;\r\n		&lt;h3 id=&quot;muName&quot;&gt;&lt;/h3&gt;\r\n		&lt;div class=&quot;fbox&quot;&gt;\r\n			&lt;form id=&quot;meform&quot; class=&quot;form-horizontal&quot;&gt;\r\n				&lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Name&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Password&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Confirm password&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;password&quot; id=&quot;confirm_password&quot; name=&quot;confirm_password&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Email&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Please agree to our policy&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;checkbox&quot; class=&quot;checkbox&quot; id=&quot;agree&quot; name=&quot;agree&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;div class=&quot;col-sm-4 col-sm-offset-2&quot;&gt;\r\n	                	&lt;input class=&quot;btn btn-block btn-info&quot; type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n			&lt;/form&gt;\r\n		&lt;/div&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p><p></p><p></p>AppModule.java<p></p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.services;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.apache.tapestry5.*;\r\nimport org.apache.tapestry5.annotations.Path;\r\nimport org.apache.tapestry5.beanvalidator.BeanValidatorConfigurer;\r\nimport org.apache.tapestry5.beanvalidator.BeanValidatorSource;\r\nimport org.apache.tapestry5.ioc.Configuration;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.Resource;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Contribute;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.ioc.annotations.Local;\r\nimport org.apache.tapestry5.ioc.annotations.Symbol;\r\nimport org.apache.tapestry5.ioc.services.ApplicationDefaults;\r\nimport org.apache.tapestry5.ioc.services.SymbolProvider;\r\nimport org.apache.tapestry5.services.*;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptModuleConfiguration;\r\nimport org.apache.tapestry5.services.javascript.ModuleManager;\r\nimport org.slf4j.Logger;\r\n\r\n/**\r\n * This module is automatically included as part of the Tapestry IoC Registry, it\'s a good place to\r\n * configure and extend Tapestry, or to place your own service definitions.\r\n */\r\npublic class AppModule\r\n{\r\n	\r\n	public static final String PLUGINS_PATH = &quot;plugins.path&quot;;\r\n	\r\n    public static void bind(ServiceBinder binder)\r\n    {\r\n    	binder.bind(CountryNames.class);\r\n    }\r\n\r\n    public static void contributeFactoryDefaults(\r\n        MappedConfiguration&lt;String, Object&gt; configuration)\r\n    {\r\n        // The values defined here (as factory default overrides) are themselves\r\n        // overridden with application defaults by DevelopmentModule and QaModule.\r\n\r\n        // The application version is primarily useful as it appears in\r\n        // any exception reports (HTML or textual).\r\n        configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);\r\n\r\n        // This is something that should be removed when going to production, but is useful\r\n        // in the early stages of development.\r\n        configuration.override(SymbolConstants.PRODUCTION_MODE, true);\r\n    }\r\n\r\n    public static void contributeApplicationDefaults(\r\n        MappedConfiguration&lt;String, Object&gt; configuration)\r\n    {\r\n        // Contributions to ApplicationDefaults will override any contributions to\r\n        // FactoryDefaults (with the same key). Here we\'re restricting the supported\r\n        // locales to just &quot;en&quot; (English). As you add localised message catalogs and other assets,\r\n        // you can extend this list of locales (it\'s a comma separated series of locale names;\r\n        // the first locale name is the default when there\'s no reasonable match).\r\n        configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en,zh_CN&quot;);\r\n\r\n              // You should change the passphrase immediately; the HMAC passphrase is used to secure\r\n        // the hidden field data stored in forms to encrypt and digitally sign client-side data.\r\n        configuration.add(SymbolConstants.HMAC_PASSPHRASE, &quot;change this immediately&quot;);\r\n        //configuration.add(SymbolConstants.BOOTSTRAP_ROOT, &quot;classpath:&quot;);\r\n        \r\n        configuration.add(SymbolConstants.COMBINE_SCRIPTS, false);\r\n    	\r\n    	configuration.add(SymbolConstants.COMPRESS_WHITESPACE, false);\r\n        \r\n    	configuration.add(SymbolConstants.GZIP_COMPRESSION_ENABLED, false);\r\n    	\r\n    	configuration.add(SymbolConstants.ASSET_URL_FULL_QUALIFIED, true);\r\n    	\r\n    	configuration.add(SymbolConstants.ASSET_PATH_PREFIX, &quot;assets&quot;);\r\n        \r\n        configuration.add(SymbolConstants.COMPACT_JSON, &quot;true&quot;);\r\n        \r\n        configuration.add(PLUGINS_PATH, &quot;classpath:/META-INF/modules/plugins&quot;);\r\n    }\r\n\r\n	/**\r\n	 * Use annotation or method naming convention: &lt;code&gt;contributeApplicationDefaults&lt;/code&gt;\r\n	 */\r\n	@Contribute(SymbolProvider.class)\r\n	@ApplicationDefaults\r\n	public static void setupEnvironment(MappedConfiguration&lt;String, Object&gt; configuration)\r\n	{\r\n        // Support for jQuery is new in Tapestry 5.4 and will become the only supported\r\n        // option in 5.5.\r\n		//configuration.add(SymbolConstants.JAVASCRIPT_INFRASTRUCTURE_PROVIDER, &quot;jquery&quot;);\r\n		configuration.add(SymbolConstants.BOOTSTRAP_ROOT, &quot;context:mybootstrap&quot;);\r\n		//configuration.add(SymbolConstants.MINIFICATION_ENABLED, true);\r\n	}\r\n	\r\n	/**\r\n     * 贡献rest easy组件，webservice目录\r\n     * @param configuration\r\n     */\r\n    public static void contributeResteasyPackageManager(Configuration&lt;String&gt; configuration)\r\n    {\r\n    	configuration.add(&quot;org.flywind.cms.rest&quot;);\r\n    }\r\n    \r\n    /**\r\n     * 贡献组件静态资源目录，组件开发时未贡献的目录在项目中无法调用\r\n     * @param configuration\r\n     */\r\n    public static void contributeClasspathAssetAliasManager(\r\n			MappedConfiguration&lt;String, String&gt; configuration) {\r\n		//定义modules资源路径,如果是modules也可以不定义，默认会是modules这个文件夹\r\n		configuration.add(&quot;modules-root&quot;, &quot;META-INF/modules&quot;);\r\n	}\r\n    \r\n    /**\r\n     * requireJS shim---注册jQuery模块\r\n     * @param configuration\r\n     * @param fastclick 组件\r\n     * @param placeholder 组件\r\n     * @param slimscroll 组件\r\n     * @param app 程序默认模块\r\n     */\r\n    @Contribute(ModuleManager.class)\r\n	public static void setupComponentsShims(\r\n			MappedConfiguration&lt;String, Object&gt; configuration,\r\n			@Inject @Path(&quot;${plugins.path}/validate/jquery.validate.js&quot;) Resource jvalidate) {\r\n    	\r\n    	//后台module\r\n		configuration.add(&quot;plugin/validate&quot;,new JavaScriptModuleConfiguration(jvalidate).dependsOn(&quot;jquery&quot;));\r\n	} \r\n\r\n	/**\r\n     * decorateRequestExceptionHandler(覆盖T5异常页面)\r\n     * TODO(重新定义T5异常页面，在产品模式下生效)\r\n     * @Exception MyExceptionReport\r\n     */\r\n     public RequestExceptionHandler decorateRequestExceptionHandler(final Object delegate, final ResponseRenderer renderer,\r\n         final ComponentSource componentSource, @Symbol(SymbolConstants.PRODUCTION_MODE) final boolean productionMode, Object service) {\r\n\r\n         return new RequestExceptionHandler() {\r\n             public void handleRequestException(final Throwable exception) throws IOException {\r\n                 if (productionMode) {\r\n                     String exceptionPage = &quot;MyExceptionTest&quot;;\r\n                     final ExceptionReporter errorPage = (ExceptionReporter) componentSource.getPage(exceptionPage);\r\n                     errorPage.reportException(exception);\r\n                     renderer.renderPageMarkupResponse(exceptionPage);\r\n                 } else {\r\n                     ((RequestExceptionHandler) delegate).handleRequestException(exception);\r\n                 }\r\n             }\r\n         };\r\n\r\n     }\r\n\r\n    @Contribute(BeanValidatorSource.class)\r\n    public static void provideBeanValidatorConfigurer(OrderedConfiguration&lt;BeanValidatorConfigurer&gt; configuration)\r\n    {\r\n       configuration.add(&quot;MyConfigurer&quot;, new BeanValidatorConfigurer()\r\n       {\r\n          public void configure(javax.validation.Configuration&lt;?&gt; configuration)\r\n          {\r\n             configuration.ignoreXmlConfiguration();\r\n          }\r\n       });\r\n    }\r\n	\r\n    /**\r\n     * This is a service definition, the service will be named &quot;TimingFilter&quot;. The interface,\r\n     * RequestFilter, is used within the RequestHandler service pipeline, which is built from the\r\n     * RequestHandler service configuration. Tapestry IoC is responsible for passing in an\r\n     * appropriate Logger instance. Requests for static resources are handled at a higher level, so\r\n     * this filter will only be invoked for Tapestry related requests.\r\n     *\r\n     *\r\n     * Service builder methods are useful when the implementation is inline as an inner class\r\n     * (as here) or require some other kind of special initialization. In most cases,\r\n     * use the static bind() method instead.\r\n     *\r\n     *\r\n     * If this method was named &quot;build&quot;, then the service id would be taken from the\r\n     * service interface and would be &quot;RequestFilter&quot;.  Since Tapestry already defines\r\n     * a service named &quot;RequestFilter&quot; we use an explicit service id that we can reference\r\n     * inside the contribution method.\r\n     */\r\n    public RequestFilter buildTimingFilter(final Logger log)\r\n    {\r\n        return new RequestFilter()\r\n        {\r\n            public boolean service(Request request, Response response, RequestHandler handler)\r\n            throws IOException\r\n            {\r\n                long startTime = System.currentTimeMillis();\r\n\r\n                try\r\n                {\r\n                    // The responsibility of a filter is to invoke the corresponding method\r\n                    // in the handler. When you chain multiple filters together, each filter\r\n                    // received a handler that is a bridge to the next filter.\r\n\r\n                    return handler.service(request, response);\r\n                } finally\r\n                {\r\n                    long elapsed = System.currentTimeMillis() - startTime;\r\n\r\n                    log.info(&quot;Request time: {} ms&quot;, elapsed);\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * This is a contribution to the RequestHandler service configuration. This is how we extend\r\n     * Tapestry using the timing filter. A common use for this kind of filter is transaction\r\n     * management or security. The @Local annotation selects the desired service by type, but only\r\n     * from the same module.  Without @Local, there would be an error due to the other service(s)\r\n     * that implement RequestFilter (defined in other modules).\r\n     */\r\n    @Contribute(RequestHandler.class)\r\n    public void addTimingFilter(OrderedConfiguration&lt;RequestFilter&gt; configuration,\r\n     @Local\r\n     RequestFilter filter)\r\n    {\r\n        // Each contribution to an ordered configuration has a name, When necessary, you may\r\n        // set constraints to precisely control the invocation order of the contributed filter\r\n        // within the pipeline.\r\n\r\n        configuration.add(&quot;Timing&quot;, filter);\r\n    }\r\n}\r\n</pre>jquery.validate.js下载地址<a href=\"https://jqueryvalidation.org/\" target=\"_blank\">https://jqueryvalidation.org/</a><br /><p></p><p></p><p>init-htmlvalidateform.js</p><p></p><pre class=\"prettyprint lang-js\">define([&quot;jquery&quot;,&quot;t5/core/dom&quot;,&quot;t5/core/ajax&quot;,&quot;plugin/validate&quot;],function($,dom,ajax,jvalidate){\r\n	var init,getFormData;\r\n	\r\n	init = function(url){\r\n		$(&quot;#meform&quot;).validate({\r\n            rules: {\r\n            	name: {\r\n                    required: true,\r\n                    minlength: 2\r\n                },\r\n                password: {\r\n					required: true,\r\n					minlength: 5\r\n				},\r\n				confirm_password: {\r\n					required: true,\r\n					minlength: 5,\r\n					equalTo: &quot;#password&quot;\r\n				},\r\n				email: {\r\n					required: true,\r\n					email: true\r\n				},\r\n				topic: {\r\n					required: &quot;#newsletter:checked&quot;,\r\n					minlength: 2\r\n				},\r\n				agree: &quot;required&quot;\r\n            },\r\n            messages: {\r\n				name: {\r\n					required: &quot;Please enter a name&quot;,\r\n					minlength: &quot;Your username must consist of at least 2 characters&quot;\r\n				},\r\n				password: {\r\n					required: &quot;Please provide a password&quot;,\r\n					minlength: &quot;Your password must be at least 5 characters long&quot;\r\n				},\r\n				confirm_password: {\r\n					required: &quot;Please provide a password&quot;,\r\n					minlength: &quot;Your password must be at least 5 characters long&quot;,\r\n					equalTo: &quot;Please enter the same password as above&quot;\r\n				},\r\n				email: &quot;Please enter a valid email address&quot;,\r\n				agree: &quot;Please accept our policy&quot;\r\n			},\r\n            submitHandler: function(form) {\r\n            	data = getFormData(\'meform\');\r\n    			var ajaxOpts = {\r\n    				data: data,\r\n    				dataType: \'json\',\r\n    				success: function(data){\r\n    					if(data.statusText == &quot;OK&quot;){\r\n    						var d = $.parseJSON(data.text);\r\n    						$(\'#muName\').empty().html(d.name);\r\n    						console.log(d.result);\r\n    					}\r\n    				}\r\n    			};\r\n    			\r\n    			dom.ajaxRequest(url,ajaxOpts);\r\n    			\r\n                return false;\r\n            }\r\n        });\r\n		\r\n		/*$(\'#myBtn\').click(function(){\r\n			var name = $(\'#name\').val().trim();\r\n			if(name == &quot;&quot;){\r\n				alert(&quot;姓名不能为空!&quot;);\r\n				return;\r\n			};\r\n			\r\n			data = getFormData(\'meform\');\r\n			var ajaxOpts = {\r\n				data: data,\r\n				dataType: \'json\',\r\n				success: function(data){\r\n					if(data.statusText == &quot;OK&quot;){\r\n						var d = $.parseJSON(data.text);\r\n						$(\'#muName\').empty().html(d.name);\r\n						console.log(d.result);\r\n					}\r\n				}\r\n			};\r\n			\r\n			dom.ajaxRequest(url,ajaxOpts);\r\n		});*/\r\n	};\r\n	\r\n	//系列化表单数据\r\n	getFormData = function(formId){\r\n    	var o = {};\r\n		var a = $(\'#\'+formId).serializeArray();\r\n		$.each(a, function() {\r\n			if (o[this.name] !== undefined) {\r\n				if (!o[this.name].push) {\r\n					o[this.name] = [ o[this.name] ];\r\n				}\r\n				o[this.name].push(this.value || \'\');\r\n			} else {\r\n				o[this.name] = this.value || \'\';\r\n			}\r\n		});\r\n		return o;\r\n    };\r\n\r\n	return {\r\n		init:init\r\n	}\r\n})</pre><br /><p></p>', null, '1', '[T5.4]第四十五讲：Tapestry 与Html Form的jQuery validate校验', '<p><a href=\"http://tapestry.flywind.org/examples/t54/HtmlValidateFormTest\" target=\"_blank\">View demo</a></p><p>HtmlValidateFormTest.java</p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.pages.examples.t54;\r\n\r\nimport org.apache.tapestry5.ComponentResources;\r\nimport org.apache.tapestry5.annotations.Property;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.json.JSONObject;\r\nimport org.apache.tapestry5.services.Request;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptSupport;\r\n\r\n/**\r\n * &lt;p&gt;Tapestry5.4 API&lt;/p&gt;\r\n * \r\n * @author flywind(飞风)\r\n * @date 2016年6月3日\r\n * @网址：http://www.flywind.org\r\n * @QQ技术群：41138107(人数较多最好先加这个)或33106572\r\n * @since 1.0\r\n */\r\npublic class HtmlValidateFormTest {\r\n	\r\n	@Inject\r\n	private ComponentResources componentResources;\r\n	\r\n	@Inject\r\n	private JavaScriptSupport javaScriptSupport;\r\n	\r\n	@Property\r\n	private String saveUrl;\r\n	\r\n	@Inject\r\n	private Request request;\r\n	\r\n	public void setupRender(){\r\n		saveUrl = componentResources.createEventLink(&quot;saveForm&quot;).toAbsoluteURI();\r\n		javaScriptSupport.require(&quot;init-htmlvalidateform&quot;).invoke(&quot;init&quot;).with(saveUrl);;\r\n	}\r\n	\r\n	//可以理解为控制层的方法\r\n	public JSONObject onSaveForm(){\r\n		String name = request.getParameter(&quot;name&quot;);\r\n		JSONObject spec = new JSONObject();\r\n		try {\r\n			spec.put(&quot;name&quot;, &quot;Hello &quot;+name);\r\n			spec.put(&quot;result&quot;, &quot;Success...&quot;);\r\n			return spec;\r\n		} catch (Exception e) {\r\n			spec.put(&quot;result&quot;, &quot;Failed!!!&quot;);\r\n			return spec;\r\n		}\r\n		\r\n	}\r\n}\r\n</pre><p>HtmlValidateFormTest.tml</p><p></p><pre class=\"prettyprint lang-html\">&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot; xmlns:p=&quot;tapestry:parameter&quot;&gt;\r\n	&lt;div class=&quot;container&quot;&gt;\r\n		&lt;h3&gt;Tapestry Html Form and jQuery validate&lt;/h3&gt;\r\n		&lt;h3 id=&quot;muName&quot;&gt;&lt;/h3&gt;\r\n		&lt;div class=&quot;fbox&quot;&gt;\r\n			&lt;form id=&quot;meform&quot; class=&quot;form-horizontal&quot;&gt;\r\n				&lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Name&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Password&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Confirm password&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;password&quot; id=&quot;confirm_password&quot; name=&quot;confirm_password&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Email&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; class=&quot;form-control&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;label class=&quot;col-sm-2&quot;&gt;Please agree to our policy&lt;/label&gt;\r\n	                &lt;div class=&quot;col-sm-4&quot;&gt;\r\n	                    &lt;input type=&quot;checkbox&quot; class=&quot;checkbox&quot; id=&quot;agree&quot; name=&quot;agree&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n	            &lt;div class=&quot;form-group&quot;&gt;\r\n	                &lt;div class=&quot;col-sm-4 col-sm-offset-2&quot;&gt;\r\n	                	&lt;input class=&quot;btn btn-block btn-info&quot; type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;\r\n	                &lt;/div&gt;\r\n	            &lt;/div&gt;\r\n			&lt;/form&gt;\r\n		&lt;/div&gt;\r\n	&lt;/div&gt;\r\n&lt;/html&gt;</pre><br /><p></p><p></p><p></p>AppModule.java<p></p><p></p><pre class=\"prettyprint lang-java\">package org.flywind.tapestry.services;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.apache.tapestry5.*;\r\nimport org.apache.tapestry5.annotations.Path;\r\nimport org.apache.tapestry5.beanvalidator.BeanValidatorConfigurer;\r\nimport org.apache.tapestry5.beanvalidator.BeanValidatorSource;\r\nimport org.apache.tapestry5.ioc.Configuration;\r\nimport org.apache.tapestry5.ioc.MappedConfiguration;\r\nimport org.apache.tapestry5.ioc.OrderedConfiguration;\r\nimport org.apache.tapestry5.ioc.Resource;\r\nimport org.apache.tapestry5.ioc.ServiceBinder;\r\nimport org.apache.tapestry5.ioc.annotations.Contribute;\r\nimport org.apache.tapestry5.ioc.annotations.Inject;\r\nimport org.apache.tapestry5.ioc.annotations.Local;\r\nimport org.apache.tapestry5.ioc.annotations.Symbol;\r\nimport org.apache.tapestry5.ioc.services.ApplicationDefaults;\r\nimport org.apache.tapestry5.ioc.services.SymbolProvider;\r\nimport org.apache.tapestry5.services.*;\r\nimport org.apache.tapestry5.services.javascript.JavaScriptModuleConfiguration;\r\nimport org.apache.tapestry5.services.javascript.ModuleManager;\r\nimport org.slf4j.Logger;\r\n\r\n/**\r\n * This module is automatically included as part of the Tapestry IoC Registry, it\'s a good place to\r\n * configure and extend Tapestry, or to place your own service definitions.\r\n */\r\npublic class AppModule\r\n{\r\n	\r\n	public static final String PLUGINS_PATH = &quot;plugins.path&quot;;\r\n	\r\n    public static void bind(ServiceBinder binder)\r\n    {\r\n    	binder.bind(CountryNames.class);\r\n    }\r\n\r\n    public static void contributeFactoryDefaults(\r\n        MappedConfiguration&lt;String, Object&gt; configuration)\r\n    {\r\n        // The values defined here (as factory default overrides) are themselves\r\n        // overridden with application defaults by DevelopmentModule and QaModule.\r\n\r\n        // The application version is primarily useful as it appears in\r\n        // any exception reports (HTML or textual).\r\n        configuration.override(SymbolConstants.APPLICATION_VERSION, &quot;1.0&quot;);\r\n\r\n        // This is something that should be removed when going to production, but is useful\r\n        // in the early stages of development.\r\n        configuration.override(SymbolConstants.PRODUCTION_MODE, true);\r\n    }\r\n\r\n    public static void contributeApplicationDefaults(\r\n        MappedConfiguration&lt;String, Object&gt; configuration)\r\n    {\r\n        // Contributions to ApplicationDefaults will override any contributions to\r\n        // FactoryDefaults (with the same key). Here we\'re restricting the supported\r\n        // locales to just &quot;en&quot; (English). As you add localised message catalogs and other assets,\r\n        // you can extend this list of locales (it\'s a comma separated series of locale names;\r\n        // the first locale name is the default when there\'s no reasonable match).\r\n        configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en,zh_CN&quot;);\r\n\r\n              // You should change the passphrase immediately; the HMAC passphrase is used to secure\r\n        // the hidden field data stored in forms to encrypt and digitally sign client-side data.\r\n        configuration.add(SymbolConstants.HMAC_PASSPHRASE, &quot;change this immediately&quot;);\r\n        //configuration.add(SymbolConstants.BOOTSTRAP_ROOT, &quot;classpath:&quot;);\r\n        \r\n        configuration.add(SymbolConstants.COMBINE_SCRIPTS, false);\r\n    	\r\n    	configuration.add(SymbolConstants.COMPRESS_WHITESPACE, false);\r\n        \r\n    	configuration.add(SymbolConstants.GZIP_COMPRESSION_ENABLED, false);\r\n    	\r\n    	configuration.add(SymbolConstants.ASSET_URL_FULL_QUALIFIED, true);\r\n    	\r\n    	configuration.add(SymbolConstants.ASSET_PATH_PREFIX, &quot;assets&quot;);\r\n        \r\n        configuration.add(SymbolConstants.COMPACT_JSON, &quot;true&quot;);\r\n        \r\n        configuration.add(PLUGINS_PATH, &quot;classpath:/META-INF/modules/plugins&quot;);\r\n    }\r\n\r\n	/**\r\n	 * Use annotation or method naming convention: &lt;code&gt;contributeApplicationDefaults&lt;/code&gt;\r\n	 */\r\n	@Contribute(SymbolProvider.class)\r\n	@ApplicationDefaults\r\n	public static void setupEnvironment(MappedConfiguration&lt;String, Object&gt; configuration)\r\n	{\r\n        // Support for jQuery is new in Tapestry 5.4 and will become the only supported\r\n        // option in 5.5.\r\n		//configuration.add(SymbolConstants.JAVASCRIPT_INFRASTRUCTURE_PROVIDER, &quot;jquery&quot;);\r\n		configuration.add(SymbolConstants.BOOTSTRAP_ROOT, &quot;context:mybootstrap&quot;);\r\n		//configuration.add(SymbolConstants.MINIFICATION_ENABLED, true);\r\n	}\r\n	\r\n	/**\r\n     * 贡献rest easy组件，webservice目录\r\n     * @param configuration\r\n     */\r\n    public static void contributeResteasyPackageManager(Configuration&lt;String&gt; configuration)\r\n    {\r\n    	configuration.add(&quot;org.flywind.cms.rest&quot;);\r\n    }\r\n    \r\n    /**\r\n     * 贡献组件静态资源目录，组件开发时未贡献的目录在项目中无法调用\r\n     * @param configuration\r\n     */\r\n    public static void contributeClasspathAssetAliasManager(\r\n			MappedConfiguration&lt;String, String&gt; configuration) {\r\n		//定义modules资源路径,如果是modules也可以不定义，默认会是modules这个文件夹\r\n		configuration.add(&quot;modules-root&quot;, &quot;META-INF/modules&quot;);\r\n	}\r\n    \r\n    /**\r\n     * requireJS shim---注册jQuery模块\r\n     * @param configuration\r\n     * @param fastclick 组件\r\n     * @param placeholder 组件\r\n     * @param slimscroll 组件\r\n     * @param app 程序默认模块\r\n     */\r\n    @Contribute(ModuleManager.class)\r\n	public static void setupComponentsShims(\r\n			MappedConfiguration&lt;String, Object&gt; configuration,\r\n			@Inject @Path(&quot;${plugins.path}/validate/jquery.validate.js&quot;) Resource jvalidate) {\r\n    	\r\n    	//后台module\r\n		configuration.add(&quot;plugin/validate&quot;,new JavaScriptModuleConfiguration(jvalidate).dependsOn(&quot;jquery&quot;));\r\n	} \r\n\r\n	/**\r\n     * decorateRequestExceptionHandler(覆盖T5异常页面)\r\n     * TODO(重新定义T5异常页面，在产品模式下生效)\r\n     * @Exception MyExceptionReport\r\n     */\r\n     public RequestExceptionHandler decorateRequestExceptionHandler(final Object delegate, final ResponseRenderer renderer,\r\n         final ComponentSource componentSource, @Symbol(SymbolConstants.PRODUCTION_MODE) final boolean productionMode, Object service) {\r\n\r\n         return new RequestExceptionHandler() {\r\n             public void handleRequestException(final Throwable exception) throws IOException {\r\n                 if (productionMode) {\r\n                     String exceptionPage = &quot;MyExceptionTest&quot;;\r\n                     final ExceptionReporter errorPage = (ExceptionReporter) componentSource.getPage(exceptionPage);\r\n                     errorPage.reportException(exception);\r\n                     renderer.renderPageMarkupResponse(exceptionPage);\r\n                 } else {\r\n                     ((RequestExceptionHandler) delegate).handleRequestException(exception);\r\n                 }\r\n             }\r\n         };\r\n\r\n     }\r\n\r\n    @Contribute(BeanValidatorSource.class)\r\n    public static void provideBeanValidatorConfigurer(OrderedConfiguration&lt;BeanValidatorConfigurer&gt; configuration)\r\n    {\r\n       configuration.add(&quot;MyConfigurer&quot;, new BeanValidatorConfigurer()\r\n       {\r\n          public void configure(javax.validation.Configuration&lt;?&gt; configuration)\r\n          {\r\n             configuration.ignoreXmlConfiguration();\r\n          }\r\n       });\r\n    }\r\n	\r\n    /**\r\n     * This is a service definition, the service will be named &quot;TimingFilter&quot;. The interface,\r\n     * RequestFilter, is used within the RequestHandler service pipeline, which is built from the\r\n     * RequestHandler service configuration. Tapestry IoC is responsible for passing in an\r\n     * appropriate Logger instance. Requests for static resources are handled at a higher level, so\r\n     * this filter will only be invoked for Tapestry related requests.\r\n     *\r\n     *\r\n     * Service builder methods are useful when the implementation is inline as an inner class\r\n     * (as here) or require some other kind of special initialization. In most cases,\r\n     * use the static bind() method instead.\r\n     *\r\n     *\r\n     * If this method was named &quot;build&quot;, then the service id would be taken from the\r\n     * service interface and would be &quot;RequestFilter&quot;.  Since Tapestry already defines\r\n     * a service named &quot;RequestFilter&quot; we use an explicit service id that we can reference\r\n     * inside the contribution method.\r\n     */\r\n    public RequestFilter buildTimingFilter(final Logger log)\r\n    {\r\n        return new RequestFilter()\r\n        {\r\n            public boolean service(Request request, Response response, RequestHandler handler)\r\n            throws IOException\r\n            {\r\n                long startTime = System.currentTimeMillis();\r\n\r\n                try\r\n                {\r\n                    // The responsibility of a filter is to invoke the corresponding method\r\n                    // in the handler. When you chain multiple filters together, each filter\r\n                    // received a handler that is a bridge to the next filter.\r\n\r\n                    return handler.service(request, response);\r\n                } finally\r\n                {\r\n                    long elapsed = System.currentTimeMillis() - startTime;\r\n\r\n                    log.info(&quot;Request time: {} ms&quot;, elapsed);\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * This is a contribution to the RequestHandler service configuration. This is how we extend\r\n     * Tapestry using the timing filter. A common use for this kind of filter is transaction\r\n     * management or security. The @Local annotation selects the desired service by type, but only\r\n     * from the same module.  Without @Local, there would be an error due to the other service(s)\r\n     * that implement RequestFilter (defined in other modules).\r\n     */\r\n    @Contribute(RequestHandler.class)\r\n    public void addTimingFilter(OrderedConfiguration&lt;RequestFilter&gt; configuration,\r\n     @Local\r\n     RequestFilter filter)\r\n    {\r\n        // Each contribution to an ordered configuration has a name, When necessary, you may\r\n        // set constraints to precisely control the invocation order of the contributed filter\r\n        // within the pipeline.\r\n\r\n        configuration.add(&quot;Timing&quot;, filter);\r\n    }\r\n}\r\n</pre>jquery.validate.js下载地址<a href=\"https://jqueryvalidation.org/\" target=\"_blank\">https://jqueryvalidation.org/</a><br /><p></p><p></p><p>init-htmlvalidateform.js</p><p></p><pre class=\"prettyprint lang-js\">define([&quot;jquery&quot;,&quot;t5/core/dom&quot;,&quot;t5/core/ajax&quot;,&quot;plugin/validate&quot;],function($,dom,ajax,jvalidate){\r\n	var init,getFormData;\r\n	\r\n	init = function(url){\r\n		$(&quot;#meform&quot;).validate({\r\n            rules: {\r\n            	name: {\r\n                    required: true,\r\n                    minlength: 2\r\n                },\r\n                password: {\r\n					required: true,\r\n					minlength: 5\r\n				},\r\n				confirm_password: {\r\n					required: true,\r\n					minlength: 5,\r\n					equalTo: &quot;#password&quot;\r\n				},\r\n				email: {\r\n					required: true,\r\n					email: true\r\n				},\r\n				topic: {\r\n					required: &quot;#newsletter:checked&quot;,\r\n					minlength: 2\r\n				},\r\n				agree: &quot;required&quot;\r\n            },\r\n            messages: {\r\n				name: {\r\n					required: &quot;Please enter a name&quot;,\r\n					minlength: &quot;Your username must consist of at least 2 characters&quot;\r\n				},\r\n				password: {\r\n					required: &quot;Please provide a password&quot;,\r\n					minlength: &quot;Your password must be at least 5 characters long&quot;\r\n				},\r\n				confirm_password: {\r\n					required: &quot;Please provide a password&quot;,\r\n					minlength: &quot;Your password must be at least 5 characters long&quot;,\r\n					equalTo: &quot;Please enter the same password as above&quot;\r\n				},\r\n				email: &quot;Please enter a valid email address&quot;,\r\n				agree: &quot;Please accept our policy&quot;\r\n			},\r\n            submitHandler: function(form) {\r\n            	data = getFormData(\'meform\');\r\n    			var ajaxOpts = {\r\n    				data: data,\r\n    				dataType: \'json\',\r\n    				success: function(data){\r\n    					if(data.statusText == &quot;OK&quot;){\r\n    						var d = $.parseJSON(data.text);\r\n    						$(\'#muName\').empty().html(d.name);\r\n    						console.log(d.result);\r\n    					}\r\n    				}\r\n    			};\r\n    			\r\n    			dom.ajaxRequest(url,ajaxOpts);\r\n    			\r\n                return false;\r\n            }\r\n        });\r\n		\r\n		/*$(\'#myBtn\').click(function(){\r\n			var name = $(\'#name\').val().trim();\r\n			if(name == &quot;&quot;){\r\n				alert(&quot;姓名不能为空!&quot;);\r\n				return;\r\n			};\r\n			\r\n			data = getFormData(\'meform\');\r\n			var ajaxOpts = {\r\n				data: data,\r\n				dataType: \'json\',\r\n				success: function(data){\r\n					if(data.statusText == &quot;OK&quot;){\r\n						var d = $.parseJSON(data.text);\r\n						$(\'#muName\').empty().html(d.name);\r\n						console.log(d.result);\r\n					}\r\n				}\r\n			};\r\n			\r\n			dom.ajaxRequest(url,ajaxOpts);\r\n		});*/\r\n	};\r\n	\r\n	//系列化表单数据\r\n	getFormData = function(formId){\r\n    	var o = {};\r\n		var a = $(\'#\'+formId).serializeArray();\r\n		$.each(a, function() {\r\n			if (o[this.name] !== undefined) {\r\n				if (!o[this.name].push) {\r\n					o[this.name] = [ o[this.name] ];\r\n				}\r\n				o[this.name].push(this.value || \'\');\r\n			} else {\r\n				o[this.name] = this.value || \'\';\r\n			}\r\n		});\r\n		return o;\r\n    };\r\n\r\n	return {\r\n		init:init\r\n	}\r\n})</pre><div><br /></div>', '[T5.4]Lesson 45：Tapestry Html jQuery validateForm', '');
INSERT INTO `td_c_technology` VALUES ('234', null, '2016-12-09 08:08:14', 'admin', '0755', '', 'admin', '2016-12-09 08:08:14', 'kkkkkkkkk', null, '13', 'kkkk', null, null, '');
INSERT INTO `td_c_technology` VALUES ('235', null, '2016-12-20 08:47:21', 'admin', '0755', '', 'admin', '2016-12-20 08:47:21', null, null, '17', null, '<p>uuuu</p>', 'uuu', '');
INSERT INTO `td_c_technology` VALUES ('236', null, '2016-12-20 08:48:23', 'admin', '0755', '', 'admin', '2016-12-20 08:48:23', null, null, '17', null, '<p>uuu</p>', 'uuu', '');
INSERT INTO `td_c_technology` VALUES ('237', null, '2016-12-20 08:49:17', 'admin', '0755', '', 'admin', '2016-12-20 08:49:17', null, null, '14', null, '<p>uuu</p>', 'uuu', '');
INSERT INTO `td_c_technology` VALUES ('238', null, '2016-12-20 08:51:42', 'admin', '0755', '', 'admin', '2016-12-20 08:51:42', null, null, '14', null, '<p>uuu</p>', 'uuu', '');
INSERT INTO `td_c_technology` VALUES ('239', null, '2016-12-20 08:52:04', 'admin', '0755', '', 'admin', '2016-12-20 08:52:04', null, null, '13', null, '<p>uuu</p>', 'uuu', '');
INSERT INTO `td_c_technology` VALUES ('240', null, '2016-12-20 08:53:51', 'admin', '0755', '', 'admin', '2016-12-20 08:53:51', null, null, '13', null, '<p>yyyyy</p>', 'uuu', '');

-- ----------------------------
-- Table structure for `td_c_work`
-- ----------------------------
DROP TABLE IF EXISTS `td_c_work`;
CREATE TABLE `td_c_work` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `content` text,
  `content_en` text,
  `is_hot` bit(1) DEFAULT NULL,
  `smallImgurl` varchar(400) DEFAULT NULL,
  `title` varchar(200) DEFAULT NULL,
  `title_en` varchar(200) DEFAULT NULL,
  `type` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_c_work
-- ----------------------------
INSERT INTO `td_c_work` VALUES ('5', null, '2016-12-14 13:57:21', 'admin', '0755', '', 'admin', '2016-12-14 13:58:53', 'uuuuu', 'yyy', '', null, 'uuuu', 'yyy', '1');
INSERT INTO `td_c_work` VALUES ('7', null, '2016-12-14 15:31:10', 'admin', '0755', '', 'admin', '2016-12-20 09:15:28', '<p><img src=\"/tapestry-cms/uploadImages/editor/20161214153010.png\" data-filename=\"img\" style=\"width: 862px;\"><br></p>', '<p>444</p>', '', '/tapestry-cms/uploadImages/contentData/work_e39ec21b-bdae-478f-9f8b-61f80a737353.png', '作品2', '445', '2');
INSERT INTO `td_c_work` VALUES ('8', null, '2016-12-20 09:06:52', 'admin', '0755', '', 'admin', '2016-12-20 09:06:52', null, '<p>yyyyy</p>', '', null, null, 'uuu', '2');

-- ----------------------------
-- Table structure for `td_d_grid_header`
-- ----------------------------
DROP TABLE IF EXISTS `td_d_grid_header`;
CREATE TABLE `td_d_grid_header` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `field` varchar(100) DEFAULT NULL,
  `table_name` varchar(100) DEFAULT NULL,
  `title_zh_cn` varchar(100) DEFAULT NULL,
  `title_en` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_d_grid_header
-- ----------------------------

-- ----------------------------
-- Table structure for `td_example`
-- ----------------------------
DROP TABLE IF EXISTS `td_example`;
CREATE TABLE `td_example` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `userName` varchar(255) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `company_id` bigint(20) DEFAULT NULL,
  `company_name` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_example
-- ----------------------------
INSERT INTO `td_example` VALUES ('1', '2016-06-22 00:00:00', 'hello', '', 'admin', '2016-02-29 00:00:00', 'kitty', '0755', '1', '中兴通讯2');
INSERT INTO `td_example` VALUES ('30', null, 'king', '', 'admin', '2016-02-17 13:56:58', 'kitty', '0755', '2', '华为技术');
INSERT INTO `td_example` VALUES ('32', null, 'hello', '', 'admin', '2016-02-29 00:00:00', 'kitty', '0755', '1', '中兴通讯');
INSERT INTO `td_example` VALUES ('33', '2016-06-24 00:00:00', 'hello', '', 'admin', '2016-02-29 00:00:00', 'kitty', '0755', '1', '中兴通讯');

-- ----------------------------
-- Table structure for `td_item`
-- ----------------------------
DROP TABLE IF EXISTS `td_item`;
CREATE TABLE `td_item` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `parentId` bigint(20) DEFAULT NULL,
  `userName` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_item
-- ----------------------------
INSERT INTO `td_item` VALUES ('1', '2015-11-30 17:29:37', 'kitty', '0755', '', 'kitty', '2015-11-30 17:29:37', '1', 'item 01');
INSERT INTO `td_item` VALUES ('2', '2015-11-30 17:29:37', 'kitty2', '0755', '', 'kitty2', '2015-11-30 17:29:37', '1', 'item 02');
INSERT INTO `td_item` VALUES ('3', '2015-11-30 17:29:37', 'kitty2', '0755', '', 'kitty2', '2015-11-30 17:29:37', '2', 'item 03');
INSERT INTO `td_item` VALUES ('4', '2015-11-30 17:29:37', 'kitty2', '0755', '', 'kitty2', '2015-11-30 17:29:37', '3', 'item 04');
INSERT INTO `td_item` VALUES ('5', '2015-11-30 17:29:37', 'kitty2', '0755', '', 'kitty2', '2015-11-30 17:29:37', '3', 'item 05');

-- ----------------------------
-- Table structure for `td_myuser`
-- ----------------------------
DROP TABLE IF EXISTS `td_myuser`;
CREATE TABLE `td_myuser` (
  `USER_SHOW` int(11) DEFAULT NULL,
  `USER_AGE` int(11) DEFAULT NULL,
  `UESR_NAME` varchar(255) DEFAULT NULL,
  `USER_ID` int(11) NOT NULL,
  PRIMARY KEY (`USER_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_myuser
-- ----------------------------
INSERT INTO `td_myuser` VALUES ('1', '1', 'FLYWIND', '1');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty2', '2');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty', '3');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty3', '4');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty4', '5');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty5', '6');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty6', '7');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty7', '8');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty8', '9');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty9', '10');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty10', '11');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty11', '12');
INSERT INTO `td_myuser` VALUES ('1', '1', 'kitty12', '13');

-- ----------------------------
-- Table structure for `td_s_comment`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_comment`;
CREATE TABLE `td_s_comment` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `content` varchar(300) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `title` varchar(100) DEFAULT NULL,
  `reply` varchar(300) DEFAULT NULL,
  `content_id` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_comment
-- ----------------------------

-- ----------------------------
-- Table structure for `td_s_contact_us`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_contact_us`;
CREATE TABLE `td_s_contact_us` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `content` varchar(300) DEFAULT NULL,
  `content_en` varchar(300) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `email_en` varchar(100) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `name_en` varchar(100) DEFAULT NULL,
  `title` varchar(100) DEFAULT NULL,
  `title_en` varchar(100) DEFAULT NULL,
  `ip` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_contact_us
-- ----------------------------
INSERT INTO `td_s_contact_us` VALUES ('9', null, '2016-12-20 14:49:56', null, '0755', '', null, null, 'uuu', null, '38204054@qq.com', null, 'flywind2', null, 'yyy5', null, '0:0:0:0:0:0:0:1');

-- ----------------------------
-- Table structure for `td_s_discuss`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_discuss`;
CREATE TABLE `td_s_discuss` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `author` varchar(50) DEFAULT NULL,
  `message` varchar(500) DEFAULT NULL,
  `post_id` bigint(20) NOT NULL,
  `reply` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_discuss
-- ----------------------------

-- ----------------------------
-- Table structure for `td_s_friendlink`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_friendlink`;
CREATE TABLE `td_s_friendlink` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `logo` varchar(300) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `link` varchar(300) DEFAULT NULL,
  `seqNum` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_friendlink
-- ----------------------------
INSERT INTO `td_s_friendlink` VALUES ('3', null, '2015-12-11 15:11:08', 'admin', '0755', '', 'admin', '2015-12-11 15:11:08', 'o.png', 'king', 'http://www.i.com', '1');
INSERT INTO `td_s_friendlink` VALUES ('4', null, '2015-12-11 15:11:15', 'admin', '0755', '', 'admin', '2016-12-16 09:08:21', 'o2.png', '你好2', 'http://www.i.com', '1');

-- ----------------------------
-- Table structure for `td_s_grid_header`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_grid_header`;
CREATE TABLE `td_s_grid_header` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `field` varchar(100) DEFAULT NULL,
  `table_name` varchar(100) DEFAULT NULL,
  `title_zh_cn` varchar(100) DEFAULT NULL,
  `title_en` varchar(100) DEFAULT NULL,
  `company_id` bigint(20) DEFAULT NULL,
  `is_admin` bit(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_grid_header
-- ----------------------------
INSERT INTO `td_s_grid_header` VALUES ('1', null, null, '0755', null, null, null, 'name', 'Organization', '单位名称', 'Unit name', null, null);
INSERT INTO `td_s_grid_header` VALUES ('2', null, null, '0755', null, null, null, 'listTitle', 'Organization', '组织机构', 'Organizational institution', null, null);
INSERT INTO `td_s_grid_header` VALUES ('3', null, null, '0755', null, null, null, 'pname', 'Organization', '上级单位名称', 'Name of superior unit', null, null);
INSERT INTO `td_s_grid_header` VALUES ('4', null, null, '0755', null, null, null, 'linkman', 'Organization', '联系人', 'Contacts', null, null);
INSERT INTO `td_s_grid_header` VALUES ('5', null, null, '0755', null, null, null, 'linkphone', 'Organization', '联系电话', 'Contact phone', null, null);
INSERT INTO `td_s_grid_header` VALUES ('6', null, null, '0755', null, null, null, 'address', 'Organization', '单位地址', 'Unit address', null, null);
INSERT INTO `td_s_grid_header` VALUES ('7', null, null, '0755', null, null, null, 'addChildBtn', 'Organization', '添加下级单位', 'Add subordinate units', null, null);
INSERT INTO `td_s_grid_header` VALUES ('8', null, null, '0755', null, null, null, 'createOrgFail', 'Organization', '添加组织机构失败', 'Add Organizational Failure', null, null);
INSERT INTO `td_s_grid_header` VALUES ('9', null, null, '0755', null, null, null, 'editOrgFail', 'Organization', '编辑组织机构失败', 'Editorial organization failed', null, null);
INSERT INTO `td_s_grid_header` VALUES ('10', null, null, '0755', null, null, null, 'deleteOrgFail', 'Organization', '删除组织机构失败', 'Delete organization failed', null, null);
INSERT INTO `td_s_grid_header` VALUES ('11', null, null, '0755', null, null, null, 'rootRes', 'Resource', '资源', 'Resource', null, null);
INSERT INTO `td_s_grid_header` VALUES ('12', null, null, '0755', null, null, null, 'authorityManage', 'Resource', '权限管理', 'Authoritymanage', null, null);
INSERT INTO `td_s_grid_header` VALUES ('13', null, null, '0755', null, null, null, 'userManage', 'Resource', '用户管理', 'User Management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('14', null, null, '0755', null, null, null, 'roleManage', 'Resource', '角色管理', 'Role management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('15', null, null, '0755', null, null, null, 'resManage', 'Resource', '资源管理', 'Resource Management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('16', null, null, '0755', null, null, null, 'organizationManage', 'Resource', '组织机构', 'Organization management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('17', null, null, '0755', null, null, null, 'logManage', 'Resource', '日志管理', 'Log management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('18', null, null, '0755', null, null, null, 'systemLog', 'Resource', '系统日志', 'System log', null, null);
INSERT INTO `td_s_grid_header` VALUES ('19', null, null, '0755', null, null, null, 'oprationLog', 'Resource', '操作日志', 'Operation log', null, null);
INSERT INTO `td_s_grid_header` VALUES ('20', null, null, '0755', null, null, null, 'sysManage', 'Resource', '系统管理', 'System management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('21', null, null, '0755', null, null, null, 'sysbaseManage', 'Resource', '基础设置', 'Basic setting', null, null);
INSERT INTO `td_s_grid_header` VALUES ('22', null, null, '0755', null, null, null, 'linkManage', 'Resource', '友情链接', 'Friendship link', null, null);
INSERT INTO `td_s_grid_header` VALUES ('23', null, null, '0755', null, null, null, 'commentsManage', 'Resource', '评论管理', 'Comment management', null, null);
INSERT INTO `td_s_grid_header` VALUES ('24', null, null, '0755', null, null, null, 'siteCommentManage', 'Resource', '站内评论', 'In the station', null, null);

-- ----------------------------
-- Table structure for `td_s_operation_log`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_operation_log`;
CREATE TABLE `td_s_operation_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `info` varchar(1000) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `result` int(11) DEFAULT NULL,
  `type` int(11) DEFAULT NULL,
  `user_name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_operation_log
-- ----------------------------
INSERT INTO `td_s_operation_log` VALUES ('1', '2015-10-29 15:26:39', '创建角色，角色编号：14，角色名称：分公司113', 'flywind2', '1', '1', 'admin');
INSERT INTO `td_s_operation_log` VALUES ('2', '2015-10-29 16:57:56', '创建角色，角色编号：15，角色名称：分公司113', 'flywind2', '1', '1', 'admin');

-- ----------------------------
-- Table structure for `td_s_organization`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_organization`;
CREATE TABLE `td_s_organization` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `available` bit(1) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `parent_id` bigint(20) DEFAULT NULL,
  `parent_ids` varchar(1000) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `company_id` bigint(20) DEFAULT NULL,
  `address` varchar(200) DEFAULT NULL,
  `contact_name` varchar(100) DEFAULT NULL,
  `contact_number` varchar(20) DEFAULT NULL,
  `customerFax` varchar(200) DEFAULT NULL,
  `customerSiteName` varchar(200) DEFAULT NULL,
  `email` varchar(200) DEFAULT NULL,
  `type` smallint(6) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_organization
-- ----------------------------
INSERT INTO `td_s_organization` VALUES ('1', null, null, null, 'admin', '2017-02-10 09:21:03', null, 'Flywind社区', '0', '0/', '0755', null, '飞风娱乐网', 'Flywind', '0755-12345678', null, null, null, null);

-- ----------------------------
-- Table structure for `td_s_param`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_param`;
CREATE TABLE `td_s_param` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `business_type` int(11) DEFAULT NULL,
  `description` varchar(100) DEFAULT NULL,
  `param_key` int(11) DEFAULT NULL,
  `param_value` varchar(100) DEFAULT NULL,
  `sort` int(11) DEFAULT NULL,
  `param_value_en` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_param
-- ----------------------------
INSERT INTO `td_s_param` VALUES ('1', null, null, null, '', '', null, null, '1', 'skin-red', '1', '大红灯笼', '1', 'Red lantern');
INSERT INTO `td_s_param` VALUES ('2', null, null, null, '', '', null, null, '1', 'skin-green-light', '2', '绿色心情', '2', 'Green mood');
INSERT INTO `td_s_param` VALUES ('3', null, null, null, '', '', null, null, '1', 'skin-blue', '3', '灰色情调', '3', 'Gray mood');
INSERT INTO `td_s_param` VALUES ('4', null, null, null, '', '', null, null, '1', 'skin-black', '4', '白云黑土', '4', 'White cloud');
INSERT INTO `td_s_param` VALUES ('5', null, null, null, '', '', null, null, '1', 'skin-purple', '5', '郁金香', '5', 'Tulips');
INSERT INTO `td_s_param` VALUES ('6', null, null, null, '', '', null, null, '1', 'skin-green', '6', '绿黑', '6', 'Black and green');
INSERT INTO `td_s_param` VALUES ('7', null, null, null, '', '', null, null, '1', 'skin-yellow', '7', '小黄', '7', 'Yellow');
INSERT INTO `td_s_param` VALUES ('8', null, null, null, '', '', null, null, '1', 'skin-blue-light', '8', '蓝亮', '8', 'Lan Liang');
INSERT INTO `td_s_param` VALUES ('9', null, null, null, '', '', null, null, '1', 'skin-black-light', '9', '孔白', '9', 'Kong Bai');
INSERT INTO `td_s_param` VALUES ('10', null, null, null, '', '', null, null, '1', 'skin-purple-light', '10', '紫白', '10', 'The purple and white');
INSERT INTO `td_s_param` VALUES ('11', null, null, null, '', '', null, null, '1', 'skin-red-light', '11', '红白', '11', 'Red and white');
INSERT INTO `td_s_param` VALUES ('12', null, null, null, '', '', null, null, '1', 'skin-yellow-light', '12', '黄白', '12', 'Yellow white');
INSERT INTO `td_s_param` VALUES ('13', null, null, null, '3', '', null, null, '2', null, '17', 'TapestryStart V1.0', '0', 'TapestryStart V1.0');
INSERT INTO `td_s_param` VALUES ('14', null, null, null, '3', '', null, null, '2', null, '13', 'TapestryStart V1.1', '0', 'TapestryStart V1.1');
INSERT INTO `td_s_param` VALUES ('15', null, null, null, '3', '', null, null, '2', null, '14', 'Tapestry widgets', '0', 'Tapestry widgets');
INSERT INTO `td_s_param` VALUES ('16', null, null, null, '3', '', null, null, '2', null, '5', 'JavaScript教程', '0', 'JavaScript');
INSERT INTO `td_s_param` VALUES ('17', null, null, null, '3', '', null, null, '2', null, '6', 'Html教程', '0', 'Html');
INSERT INTO `td_s_param` VALUES ('18', null, null, null, '3', '', null, null, '2', null, '3', 'PHP教程', '0', 'PHP');
INSERT INTO `td_s_param` VALUES ('19', null, null, null, '3', '', null, null, '2', null, '8', 'Flash教程', '0', 'Flash');
INSERT INTO `td_s_param` VALUES ('20', null, null, null, '3', '', null, null, '2', null, '11', '心情说说', '0', 'Mood');
INSERT INTO `td_s_param` VALUES ('21', null, null, null, '3', '', null, null, '2', null, '2', '站内公告', '0', 'Notice');
INSERT INTO `td_s_param` VALUES ('22', null, null, null, '3', '', null, null, '2', null, '15', 'Tapestry cms', '0', 'Tapestry cms');
INSERT INTO `td_s_param` VALUES ('23', null, null, null, '3', '', null, null, '2', null, '1', 'Tapestry5.4', '0', 'Tapestry5.4');
INSERT INTO `td_s_param` VALUES ('24', null, null, null, '3', '', null, null, '2', null, '4', 'Tapestry5视频', '0', 'Tapestry5 video');
INSERT INTO `td_s_param` VALUES ('25', null, null, null, '3', '', null, null, '3', null, '1', '网页设计', '0', 'Web Design');
INSERT INTO `td_s_param` VALUES ('26', null, null, null, '3', '', null, null, '3', null, '2', 'App设计', '0', 'App Design');
INSERT INTO `td_s_param` VALUES ('27', null, null, null, '3', '', null, null, '4', 'theme-a-coffee', '1', '主题一咖啡', '0', 'Theme a coffee');
INSERT INTO `td_s_param` VALUES ('28', null, null, null, '3', '', null, null, '4', 'theme-a-dark', '2', '主题一黑暗', '0', 'Theme a dark');
INSERT INTO `td_s_param` VALUES ('29', null, null, null, '3', '', null, null, '4', 'theme-a-dust', '3', '主题一灰尘', '0', 'Theme a dust');
INSERT INTO `td_s_param` VALUES ('30', null, null, null, '3', '', null, null, '4', 'theme-a-light', '4', '主题一高亮', '0', 'Theme a light');
INSERT INTO `td_s_param` VALUES ('31', null, null, null, '3', '', null, null, '4', 'theme-a-lime', '5', '主题一绿黄', '0', 'Theme a lime');
INSERT INTO `td_s_param` VALUES ('32', null, null, null, '3', '', null, null, '4', 'theme-a-mint', '6', '主题一薄荷', '0', 'Theme a mint');
INSERT INTO `td_s_param` VALUES ('33', null, null, null, '3', '', null, null, '4', 'theme-a-navy', '7', '主题一深蓝', '0', 'Theme a navy');
INSERT INTO `td_s_param` VALUES ('34', null, null, null, '3', '', null, null, '4', 'theme-a-ocean', '8', '主题一海洋', '0', 'Theme a ocean');
INSERT INTO `td_s_param` VALUES ('35', null, null, null, '3', '', null, null, '4', 'theme-a-prickly-pear', '9', '主题一仙人球', '0', 'Theme a prickly pear');
INSERT INTO `td_s_param` VALUES ('36', null, null, null, '3', '', null, null, '4', 'theme-a-purple', '10', '主题一紫色', '0', 'Theme a purple');
INSERT INTO `td_s_param` VALUES ('37', null, null, null, '3', '', null, null, '4', 'theme-a-well-red', '11', '主题一红色', '0', 'Theme a well red');
INSERT INTO `td_s_param` VALUES ('38', null, null, null, '3', '', null, null, '4', 'theme-a-yellow', '12', '主题一黄色', '0', 'Theme a yellow');
INSERT INTO `td_s_param` VALUES ('39', null, null, null, '3', '', null, null, '4', 'theme-b-coffee', '13', '主题二咖啡', '0', 'Theme b coffee');
INSERT INTO `td_s_param` VALUES ('40', null, null, null, '3', '', null, null, '4', 'theme-b-dark', '14', '主题二黑暗', '0', 'Theme b dark');
INSERT INTO `td_s_param` VALUES ('41', null, null, null, '3', '', null, null, '4', 'theme-b-dust', '15', '主题二灰尘', '0', 'Theme b dust');
INSERT INTO `td_s_param` VALUES ('42', null, null, null, '3', '', null, null, '4', 'theme-b-light', '16', '主题二高亮', '0', 'Theme b light');
INSERT INTO `td_s_param` VALUES ('43', null, null, null, '3', '', null, null, '4', 'theme-b-lime', '17', '主题二绿黄', '0', 'Theme b lime');
INSERT INTO `td_s_param` VALUES ('44', null, null, null, '3', '', null, null, '4', 'theme-b-mint', '18', '主题二薄荷', '0', 'Theme b mint');
INSERT INTO `td_s_param` VALUES ('45', null, null, null, '3', '', null, null, '4', 'theme-b-navy', '19', '主题二深蓝', '0', 'Theme b navy');
INSERT INTO `td_s_param` VALUES ('46', null, null, null, '3', '', null, null, '4', 'theme-b-ocean', '20', '主题二海洋', '0', 'Theme b ocean');
INSERT INTO `td_s_param` VALUES ('47', null, null, null, '3', '', null, null, '4', 'theme-b-prickly-pear', '21', '主题二仙人球', '0', 'Theme b prickly pear');
INSERT INTO `td_s_param` VALUES ('48', null, null, null, '3', '', null, null, '4', 'theme-b-purple', '22', '主题二紫色', '0', 'Theme b purple');
INSERT INTO `td_s_param` VALUES ('49', null, null, null, '3', '', null, null, '4', 'theme-b-well-red', '23', '主题二红色', '0', 'Theme b well red');
INSERT INTO `td_s_param` VALUES ('50', null, null, null, '3', '', null, null, '4', 'theme-b-yellow', '24', '主题二黄色', '0', 'Theme b yellow');
INSERT INTO `td_s_param` VALUES ('51', null, null, null, '3', '', null, null, '4', 'theme-c-coffee', '25', '主题三咖啡', '0', 'Theme c coffee');
INSERT INTO `td_s_param` VALUES ('52', null, null, null, '3', '', null, null, '4', 'theme-c-dark', '26', '主题三黑暗', '0', 'Theme c dark');
INSERT INTO `td_s_param` VALUES ('53', null, null, null, '3', '', null, null, '4', 'theme-c-dust', '27', '主题三灰尘', '0', 'Theme c dust');
INSERT INTO `td_s_param` VALUES ('54', null, null, null, '3', '', null, null, '4', 'theme-c-light', '28', '主题三高亮', '0', 'Theme c light');
INSERT INTO `td_s_param` VALUES ('55', null, null, null, '3', '', null, null, '4', 'theme-c-lime', '29', '主题三绿黄', '0', 'Theme c lime');
INSERT INTO `td_s_param` VALUES ('56', null, null, null, '3', '', null, null, '4', 'theme-c-mint', '30', '主题三薄荷', '0', 'Theme c mint');
INSERT INTO `td_s_param` VALUES ('57', null, null, null, '3', '', null, null, '4', 'theme-c-navy', '31', '主题三深蓝', '0', 'Theme c navy');
INSERT INTO `td_s_param` VALUES ('58', null, null, null, '3', '', null, null, '4', 'theme-c-ocean', '32', '主题三海洋', '0', 'Theme c ocean');
INSERT INTO `td_s_param` VALUES ('59', null, null, null, '3', '', null, null, '4', 'theme-c-prickly-pear', '33', '主题三仙人球', '0', 'Theme c prickly pear');
INSERT INTO `td_s_param` VALUES ('60', null, null, null, '3', '', null, null, '4', 'theme-c-purple', '34', '主题三紫色', '0', 'Theme c purple');
INSERT INTO `td_s_param` VALUES ('61', null, null, null, '3', '', null, null, '4', 'theme-c-well-red', '35', '主题三红色', '0', 'Theme c well red');
INSERT INTO `td_s_param` VALUES ('62', null, null, null, '3', '', null, null, '4', 'theme-c-yellow', '36', '主题三黄色', '0', 'Theme c yellow');
INSERT INTO `td_s_param` VALUES ('63', null, null, null, '3', '', null, null, '5', null, '1', '分享', '0', 'Share');
INSERT INTO `td_s_param` VALUES ('64', null, null, null, '3', '', null, null, '5', null, '2', '问答', '0', 'QA');
INSERT INTO `td_s_param` VALUES ('65', null, null, null, '3', '', null, null, '5', null, '3', '招聘', null, 'Job');

-- ----------------------------
-- Table structure for `td_s_resource`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_resource`;
CREATE TABLE `td_s_resource` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `available` bit(1) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `parent_id` bigint(20) DEFAULT NULL,
  `parent_ids` varchar(1000) DEFAULT NULL,
  `permission` varchar(100) DEFAULT NULL,
  `type` varchar(50) DEFAULT NULL,
  `url` varchar(200) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `icon_cls` varchar(100) DEFAULT NULL,
  `level` int(11) DEFAULT NULL,
  `seq_num` int(11) DEFAULT NULL,
  `company_id` bigint(20) DEFAULT NULL,
  `resource_key` varchar(100) DEFAULT NULL,
  `name_en` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=154 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_resource
-- ----------------------------
INSERT INTO `td_s_resource` VALUES ('1', null, null, null, 'admin', '2016-01-26 16:08:13', '', '资源', '0', '0/', null, 'menu', null, '0755', null, '0', '1', null, null, 'Resource');
INSERT INTO `td_s_resource` VALUES ('64', '2015-10-27 10:54:02', 'admin', '', 'admin', '2016-01-26 16:38:53', '', '组织机构', '73', '0/1/73/', 'organization:view', 'menu', '/admin/sys/OrganizationList', '0755', null, '2', '1', null, null, 'Organizations');
INSERT INTO `td_s_resource` VALUES ('73', '2015-10-27 11:19:13', 'admin', '', 'admin', '2016-01-27 11:57:31', '', '权限管理', '1', '0/1/', 'authority:view', 'menu', null, '0755', 'fa-key', '1', '4', null, null, 'Authority');
INSERT INTO `td_s_resource` VALUES ('74', '2015-10-27 11:19:30', 'admin', '', 'admin', '2016-01-26 16:39:24', '', '用户管理', '73', '0/1/73/', 'user:view', 'menu', '/admin/sys/UserList', '0755', null, '2', '1', null, null, 'User list');
INSERT INTO `td_s_resource` VALUES ('75', '2015-10-27 11:19:45', 'admin', '', 'admin', '2016-01-26 16:39:53', '', '角色管理', '73', '0/1/73/', 'role:view', 'menu', '/admin/sys/RoleList', '0755', null, '2', '1', null, null, 'Role list');
INSERT INTO `td_s_resource` VALUES ('76', '2015-10-27 11:19:59', 'admin', '', 'admin', '2016-01-26 16:42:35', '', '资源管理', '73', '0/1/73/', 'resource:view', 'menu', '/admin/sys/ResourceList', '0755', null, '2', '1', null, null, 'Resource list');
INSERT INTO `td_s_resource` VALUES ('94', '2015-12-10 15:37:28', 'admin', '', 'admin', '2015-12-10 15:37:28', '', '评论管理', '1', '0/1/', 'comments:view', 'menu', null, '0755', 'fa  fa-comments-o', '1', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('95', '2015-12-10 15:38:02', 'admin', '', 'admin', '2015-12-10 15:38:02', '', '站内评论', '94', '0/1/94/', 'comments:view', 'menu', null, '0755', null, '2', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('99', '2015-12-10 17:28:31', 'admin', '', 'admin', '2016-12-19 09:08:29', '', '系统管理', '1', '0/1/', 'system:view', 'menu', null, '0755', 'fa-gear', '1', '5', null, null, 'System');
INSERT INTO `td_s_resource` VALUES ('100', '2015-12-10 17:29:02', 'admin', '', 'admin', '2016-01-26 16:44:43', '', '基础设置', '99', '0/1/99/', 'economy:view', 'menu', '/admin/sys/Economy', '0755', null, '2', '1', null, null, 'Basic setting');
INSERT INTO `td_s_resource` VALUES ('101', '2015-12-10 17:29:21', 'admin', '', 'admin', '2016-01-26 16:45:06', '', '友情链接', '99', '0/1/99/', 'friendlink:view', 'menu', '/admin/sys/FriendLinkList', '0755', null, '2', '1', null, null, 'Friendship link');
INSERT INTO `td_s_resource` VALUES ('102', '2016-01-22 11:23:19', 'admin', '', 'admin', '2016-12-19 09:07:15', '', '内容管理', '1', '0/1/', 'content:view', 'menu', null, '0755', 'fa-pencil-square-o', '1', '1', null, null, 'Content');
INSERT INTO `td_s_resource` VALUES ('103', '2016-01-22 13:56:51', 'admin', '', 'admin', '2016-01-26 16:38:16', '', '内容列表', '102', '0/1/102/', 'content:view', 'menu', '/admin/cms/ContentList', '0755', null, '2', '1', null, null, 'Content list');
INSERT INTO `td_s_resource` VALUES ('104', '2016-03-15 16:07:19', 'admin', '', 'admin', '2016-03-16 09:00:55', '', '留言管理', '99', '0/1/99/', 'contact:view', 'menu', '/admin/sys/ContactList', '0755', null, '2', '1', null, null, 'Message');
INSERT INTO `td_s_resource` VALUES ('105', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '评论管理', '99', '0/1/99/', 'comment:view', 'menu', '/admin/sys/CommentList', '0755', null, '2', '1', null, null, 'Comment list');
INSERT INTO `td_s_resource` VALUES ('106', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '101', '0/1/99/101/', 'friendlink:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('107', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '101', '0/1/99/101/', 'friendlink:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('108', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '101', '0/1/99/101/', 'friendlink:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('109', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '101', '0/1/99/101/', 'friendlink:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('110', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '版本日志', '99', '0/1/99/', 'versionlog:view', 'menu', '/admin/sys/VersionLogList', '0755', null, '2', '1', null, null, 'Version log');
INSERT INTO `td_s_resource` VALUES ('112', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '110', '0/1/99/110/', 'versionlog:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('113', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '110', '0/1/99/110/', 'versionlog:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('114', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '110', '0/1/99/110/', 'versionlog:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('115', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '110', '0/1/99/110/', 'versionlog:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('116', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '105', '0/1/99/105/', 'comment:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('117', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '105', '0/1/99/105/', 'comment:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('118', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '105', '0/1/99/105/', 'comment:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('119', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '104', '0/1/99/104/', 'contact:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('120', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '104', '0/1/99/104/', 'contact:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('121', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '104', '0/1/99/104/', 'contact:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('122', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '104', '0/1/99/104/', 'contact:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('123', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '74', '0/1/73/74/', 'user:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('124', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '74', '0/1/73/74/', 'user:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('125', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '74', '0/1/73/74/', 'user:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('126', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '74', '0/1/73/74/', 'user:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('127', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '75', '0/1/73/75/', 'role:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('128', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '75', '0/1/73/75/', 'role:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('129', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '75', '0/1/73/75/', 'role:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('130', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '75', '0/1/73/75/', 'role:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('131', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '76', '0/1/73/76/', 'resource:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('132', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '76', '0/1/73/76/', 'resource:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('133', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '76', '0/1/73/76/', 'resource:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('134', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '76', '0/1/73/76/', 'resource:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('136', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '添加', '103', '0/1/102/103/', 'content:add', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('137', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '编辑', '103', '0/1/102/103/', 'content:edit', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('138', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '删除', '103', '0/1/102/103/', 'content:delete', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('139', '2016-03-25 14:48:27', 'admin', '', 'admin', '2016-03-25 14:50:34', '', '查看', '103', '0/1/102/103/', 'content:view', 'button', '', '0755', null, '3', '1', null, null, '');
INSERT INTO `td_s_resource` VALUES ('140', '2016-06-17 18:58:10', 'admin', '', 'admin', '2016-12-19 09:11:04', '', '日志', '1', '0/1/', 'log:view', 'menu', null, '0755', 'fa-low-vision', '1', '5', null, null, 'Log');
INSERT INTO `td_s_resource` VALUES ('141', '2016-06-17 18:59:14', 'admin', '', 'admin', '2016-06-17 18:59:43', '', '系统日志', '140', '0/1/140/', 'syslog:view', 'menu', '/admin/log/SysLogList', '0755', null, '2', '1', null, null, 'Sys Log');
INSERT INTO `td_s_resource` VALUES ('142', '2016-06-17 19:01:55', 'admin', '', 'admin', '2016-06-23 11:38:29', '', '操作日志', '140', '0/1/140/', 'operationlog:view', 'menu', '/admin/log/OperationLogList', '0755', null, '2', '1', null, null, 'Operation log');
INSERT INTO `td_s_resource` VALUES ('143', '2016-10-26 09:56:51', 'admin', '', 'admin', '2016-10-26 09:57:40', '', '作品列表', '102', '0/1/102/', 'work:view', 'menu', '/admin/cms/WorkList', '0755', null, '2', '1', null, null, 'Works');
INSERT INTO `td_s_resource` VALUES ('144', '2016-10-26 09:58:37', 'admin', '', 'admin', '2016-10-26 09:58:37', '', '添加', '143', '0/1/102/143/', 'work:add', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('145', '2016-10-26 10:00:06', 'admin', '', 'admin', '2016-10-26 10:00:06', '', '编辑', '143', '0/1/102/143/', 'work:edit', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('146', '2016-10-26 10:00:44', 'admin', '', 'admin', '2016-10-26 10:00:44', '', '删除', '143', '0/1/102/143/', 'work:delete', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('147', '2016-10-26 10:01:12', 'admin', '', 'admin', '2016-10-26 10:01:12', '', '查看', '143', '0/1/102/143/', 'work:view', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('148', '2017-02-10 09:11:13', 'admin', '', 'admin', '2017-02-10 09:17:32', '', 'Flywind社区', '1', '0/1/', 'community:view', 'menu', null, '0755', 'fa fa-puzzle-piece', '1', '1', null, null, 'Community');
INSERT INTO `td_s_resource` VALUES ('149', '2017-03-08 14:39:14', 'admin', '', 'admin', '2017-03-08 16:06:30', '', '文章管理', '148', '0/1/148/', 'posts:view', 'menu', '/admin/tcms/PostsListSupper', '0755', null, '2', '1', null, null, 'Articles');
INSERT INTO `td_s_resource` VALUES ('150', '2017-03-08 14:40:09', 'admin', '', 'admin', '2017-03-08 14:40:09', '', '添加', '149', '0/1/148/149/', 'posts:add', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('151', '2017-03-08 14:40:38', 'admin', '', 'admin', '2017-03-08 14:40:38', '', '编辑', '149', '0/1/148/149/', 'posts:edit', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('152', '2017-03-08 14:41:42', 'admin', '', 'admin', '2017-03-08 14:41:42', '', '删除', '149', '0/1/148/149/', 'posts:delete', 'button', null, '0755', null, '3', '1', null, null, null);
INSERT INTO `td_s_resource` VALUES ('153', '2017-03-08 16:04:14', 'admin', '', 'admin', '2017-03-08 16:04:14', '', '回复管理', '148', '0/1/148/', 'discuss:view', 'menu', '/admin/tcms/DiscussListSupper', '0755', null, '2', '1', null, null, null);

-- ----------------------------
-- Table structure for `td_s_role`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_role`;
CREATE TABLE `td_s_role` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime NOT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `available` bit(1) DEFAULT NULL,
  `description` varchar(100) DEFAULT NULL,
  `role` varchar(100) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `name` varchar(100) DEFAULT NULL,
  `company_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_role
-- ----------------------------
INSERT INTO `td_s_role` VALUES ('1', '2015-10-19 10:37:22', '', null, 'admin', '2015-10-28 14:57:20', '', '超级管理员', '', '0755', 'role_sys', null);
INSERT INTO `td_s_role` VALUES ('4', '2016-05-26 19:04:32', 'admin', '', 'admin', '2017-02-10 09:19:03', '', 'Flywind社区角色', null, '0755', 'tcms', null);

-- ----------------------------
-- Table structure for `td_s_role_resource`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_role_resource`;
CREATE TABLE `td_s_role_resource` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `resource_id` bigint(20) NOT NULL,
  `role_id` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=136 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_role_resource
-- ----------------------------
INSERT INTO `td_s_role_resource` VALUES ('1', '73', '1');
INSERT INTO `td_s_role_resource` VALUES ('2', '74', '1');
INSERT INTO `td_s_role_resource` VALUES ('3', '75', '1');
INSERT INTO `td_s_role_resource` VALUES ('4', '76', '1');
INSERT INTO `td_s_role_resource` VALUES ('5', '99', '1');
INSERT INTO `td_s_role_resource` VALUES ('6', '100', '1');
INSERT INTO `td_s_role_resource` VALUES ('7', '101', '1');
INSERT INTO `td_s_role_resource` VALUES ('11', '64', '1');
INSERT INTO `td_s_role_resource` VALUES ('12', '64', '2');
INSERT INTO `td_s_role_resource` VALUES ('13', '73', '2');
INSERT INTO `td_s_role_resource` VALUES ('14', '74', '2');
INSERT INTO `td_s_role_resource` VALUES ('15', '75', '2');
INSERT INTO `td_s_role_resource` VALUES ('16', '76', '2');
INSERT INTO `td_s_role_resource` VALUES ('20', '99', '2');
INSERT INTO `td_s_role_resource` VALUES ('21', '100', '2');
INSERT INTO `td_s_role_resource` VALUES ('22', '101', '2');
INSERT INTO `td_s_role_resource` VALUES ('23', '102', '1');
INSERT INTO `td_s_role_resource` VALUES ('24', '103', '1');
INSERT INTO `td_s_role_resource` VALUES ('25', '104', '1');
INSERT INTO `td_s_role_resource` VALUES ('26', '105', '1');
INSERT INTO `td_s_role_resource` VALUES ('39', '106', '1');
INSERT INTO `td_s_role_resource` VALUES ('40', '107', '1');
INSERT INTO `td_s_role_resource` VALUES ('41', '108', '1');
INSERT INTO `td_s_role_resource` VALUES ('42', '109', '1');
INSERT INTO `td_s_role_resource` VALUES ('44', '110', '1');
INSERT INTO `td_s_role_resource` VALUES ('46', '112', '1');
INSERT INTO `td_s_role_resource` VALUES ('47', '113', '1');
INSERT INTO `td_s_role_resource` VALUES ('48', '114', '1');
INSERT INTO `td_s_role_resource` VALUES ('49', '115', '1');
INSERT INTO `td_s_role_resource` VALUES ('52', '116', '1');
INSERT INTO `td_s_role_resource` VALUES ('53', '117', '1');
INSERT INTO `td_s_role_resource` VALUES ('54', '118', '1');
INSERT INTO `td_s_role_resource` VALUES ('56', '119', '1');
INSERT INTO `td_s_role_resource` VALUES ('57', '120', '1');
INSERT INTO `td_s_role_resource` VALUES ('58', '121', '1');
INSERT INTO `td_s_role_resource` VALUES ('59', '122', '1');
INSERT INTO `td_s_role_resource` VALUES ('61', '123', '1');
INSERT INTO `td_s_role_resource` VALUES ('62', '124', '1');
INSERT INTO `td_s_role_resource` VALUES ('63', '125', '1');
INSERT INTO `td_s_role_resource` VALUES ('64', '126', '1');
INSERT INTO `td_s_role_resource` VALUES ('65', '127', '1');
INSERT INTO `td_s_role_resource` VALUES ('66', '128', '1');
INSERT INTO `td_s_role_resource` VALUES ('67', '129', '1');
INSERT INTO `td_s_role_resource` VALUES ('68', '130', '1');
INSERT INTO `td_s_role_resource` VALUES ('69', '131', '1');
INSERT INTO `td_s_role_resource` VALUES ('70', '132', '1');
INSERT INTO `td_s_role_resource` VALUES ('71', '133', '1');
INSERT INTO `td_s_role_resource` VALUES ('72', '134', '1');
INSERT INTO `td_s_role_resource` VALUES ('74', '136', '1');
INSERT INTO `td_s_role_resource` VALUES ('75', '137', '1');
INSERT INTO `td_s_role_resource` VALUES ('76', '138', '1');
INSERT INTO `td_s_role_resource` VALUES ('77', '139', '1');
INSERT INTO `td_s_role_resource` VALUES ('119', '140', '1');
INSERT INTO `td_s_role_resource` VALUES ('120', '141', '1');
INSERT INTO `td_s_role_resource` VALUES ('121', '142', '1');
INSERT INTO `td_s_role_resource` VALUES ('125', '143', '1');
INSERT INTO `td_s_role_resource` VALUES ('126', '144', '1');
INSERT INTO `td_s_role_resource` VALUES ('127', '145', '1');
INSERT INTO `td_s_role_resource` VALUES ('128', '146', '1');
INSERT INTO `td_s_role_resource` VALUES ('129', '147', '1');
INSERT INTO `td_s_role_resource` VALUES ('130', '148', '1');
INSERT INTO `td_s_role_resource` VALUES ('131', '149', '1');
INSERT INTO `td_s_role_resource` VALUES ('132', '150', '1');
INSERT INTO `td_s_role_resource` VALUES ('133', '151', '1');
INSERT INTO `td_s_role_resource` VALUES ('134', '152', '1');
INSERT INTO `td_s_role_resource` VALUES ('135', '153', '1');

-- ----------------------------
-- Table structure for `td_s_seting`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_seting`;
CREATE TABLE `td_s_seting` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `company_id` bigint(20) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `address` varchar(1024) DEFAULT NULL,
  `companyName` varchar(100) DEFAULT NULL,
  `copyright` varchar(100) DEFAULT NULL,
  `customerFax` varchar(100) DEFAULT NULL,
  `email` varchar(50) DEFAULT NULL,
  `icp` varchar(100) DEFAULT NULL,
  `icplink` varchar(1000) DEFAULT NULL,
  `phone` varchar(100) DEFAULT NULL,
  `style` varchar(12) DEFAULT NULL,
  `system_logo_path` varchar(100) DEFAULT NULL,
  `system_main_title` varchar(36) DEFAULT NULL,
  `system_min_logo_path` varchar(100) DEFAULT NULL,
  `system_sub_title` varchar(36) DEFAULT NULL,
  `webUrl` varchar(1000) DEFAULT NULL,
  `write_find_log` bit(1) DEFAULT NULL,
  `address_en` varchar(1024) DEFAULT NULL,
  `companyName_en` varchar(100) DEFAULT NULL,
  `copyright_en` varchar(100) DEFAULT NULL,
  `customerFax_en` varchar(100) DEFAULT NULL,
  `email_en` varchar(50) DEFAULT NULL,
  `icp_en` varchar(100) DEFAULT NULL,
  `icplink_en` varchar(1000) DEFAULT NULL,
  `phone_en` varchar(100) DEFAULT NULL,
  `system_logo_path_en` varchar(100) DEFAULT NULL,
  `system_main_title_en` varchar(36) DEFAULT NULL,
  `webUrl_en` varchar(1000) DEFAULT NULL,
  `system_keyword` varchar(200) DEFAULT NULL,
  `system_keyword_en` varchar(200) DEFAULT NULL,
  `nav_toggle` bit(1) DEFAULT NULL,
  `boxed_layout` bit(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_seting
-- ----------------------------
INSERT INTO `td_s_seting` VALUES ('1', null, '2015-12-14 14:10:17', 'admin', '0755', '', 'admin', '2017-03-09 08:17:57', '南山区2', '飞风娱乐网', '©2016 flywind.org 飞风娱乐网版权所有', '07551234567', '38204053@qq.com', '粤ICP备12009181号-1', 'http://www.beianbeian.com/beianxinxi/330b424c-0c9b-490c-a684-62ac7fe67f6a.html', '07551234567', '28', '/tapestry-cms/uploadImages/uploadData/logo_7d98073d-6f6e-4998-8a5a-72f344c0d788.png', '飞风娱乐网新版', null, null, 'www.flywind.org', '', 'Shen zhen nan shan qu 502', 'Flywind', '©2016 flywind.org  copyright', '07551234567', '38204053@qq.com', '粤ICP备12009181号-1', 'http://www.beianbeian.com/beianxinxi/330b424c-0c9b-490c-a684-62ac7fe67f6a.html', '07551234567', null, 'Welcome to flywind website', 'www.flywind.org', '视觉设计,网站设计,UI设计,手机UI设计,软件UI设计,tapestry video,tutorial,tapestry视频教程,tapestry5.3视频,PHP教程,飞风,飞风娱乐,tapestryStart', 'tapestry5,tapestry5.4,tapestry videos,flywind', '', '');

-- ----------------------------
-- Table structure for `td_s_user`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_user`;
CREATE TABLE `td_s_user` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `create_time` datetime DEFAULT NULL,
  `creater` varchar(36) DEFAULT NULL,
  `is_open` bit(1) DEFAULT NULL,
  `last_update_person` varchar(36) DEFAULT NULL,
  `last_update_time` datetime DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `locked` bit(1) DEFAULT NULL,
  `mobile` varchar(100) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `password` varchar(100) DEFAULT NULL,
  `phone` varchar(100) DEFAULT NULL,
  `user_name` varchar(100) DEFAULT NULL,
  `customer_code` varchar(36) NOT NULL,
  `company_id` bigint(20) DEFAULT NULL,
  `is_init_pwd` bit(1) DEFAULT NULL,
  `pic_url` varchar(100) DEFAULT NULL,
  `parent_id` varchar(400) DEFAULT NULL,
  `is_admin` bit(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_user
-- ----------------------------
INSERT INTO `td_s_user` VALUES ('1', null, null, '', 'admin', '2017-03-08 11:03:12', '38204053@qq.com', '', '18520087202', 'Flywind', 'e10adc3949ba59abbe56e057f20f883e', null, 'admin', '0755', '1', '', 'cms/uploadImages/head/head.png', '0/', '');
INSERT INTO `td_s_user` VALUES ('3', '2016-05-26 19:07:08', 'admin', '', 'admin', '2016-05-26 19:07:08', 'zou_ruixian1@163.com', '', '18520087202', 'Tapestry cms', 'e10adc3949ba59abbe56e057f20f883e', null, 'tapestrycms', '0755', '1', '', '/tapestry5-cms/uploadImages/head/head.png', '0/1/', '');
INSERT INTO `td_s_user` VALUES ('31', '2017-02-14 09:36:13', 'admin', '', 'flywind', '2017-03-09 09:33:54', '38204053@qq.com', '', '11116', 'king', '21218cca77804d2ba1922c33e0151105', null, 'flywind', '0755', '1', '', '/tapestry5-cms/uploadImages/head/flywind_83cd2dbb-1dc2-4c3b-a2cb-204fc15f67a3.jpg', '0/1/', '');
INSERT INTO `td_s_user` VALUES ('32', '2017-03-01 11:50:04', 'admin', '', null, null, '38204053@qq.com', '', null, null, 'e10adc3949ba59abbe56e057f20f883e', null, 'kitty', '0755', '1', '', '/tapestry5-cms/uploadImages/head/head.png', '0/1/', '');

-- ----------------------------
-- Table structure for `td_s_user_role`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_user_role`;
CREATE TABLE `td_s_user_role` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `role_id` bigint(20) NOT NULL,
  `user_id` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=59 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_user_role
-- ----------------------------
INSERT INTO `td_s_user_role` VALUES ('18', '1', '1');
INSERT INTO `td_s_user_role` VALUES ('20', '1', '18');
INSERT INTO `td_s_user_role` VALUES ('22', '17', '21');
INSERT INTO `td_s_user_role` VALUES ('23', '16', '22');
INSERT INTO `td_s_user_role` VALUES ('24', '16', '23');
INSERT INTO `td_s_user_role` VALUES ('25', '16', '24');
INSERT INTO `td_s_user_role` VALUES ('26', '16', '25');
INSERT INTO `td_s_user_role` VALUES ('57', '4', '31');
INSERT INTO `td_s_user_role` VALUES ('58', '4', '32');

-- ----------------------------
-- Table structure for `td_s_version_log`
-- ----------------------------
DROP TABLE IF EXISTS `td_s_version_log`;
CREATE TABLE `td_s_version_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `content` text,
  `customer_code` varchar(36) NOT NULL,
  `time` datetime DEFAULT NULL,
  `title` varchar(500) DEFAULT NULL,
  `content_en` text,
  `description` varchar(500) DEFAULT NULL,
  `description_en` varchar(500) DEFAULT NULL,
  `hide` int(11) DEFAULT NULL,
  `title_en` varchar(500) DEFAULT NULL,
  `version` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of td_s_version_log
-- ----------------------------
INSERT INTO `td_s_version_log` VALUES ('1', '1、修复datrgrid分页，在英文版下显示中文问题<br/>\n2、修复在产品模式下，访问没有授权的页面没有任何提示的问题<br/>\n3、给所有页面添加页面权限和角色权限<br/>\n4、修复IE8下浏览器兼容问题，支持IE8<br/>\n5、新增tapestrycms用户，开放Tapestry cms功能演示', '0755', '2016-05-27 10:50:43', 'V2.0.0更新日志', '1, repair the datrgrid page, under the English version of the Chinese problem <br/>\n2, repair in the product mode, access to unauthorized pages without any tips <br/>\n3, to add page permissions and role permissions to all pages <br/>\n4, to fix the browser compatibility issues under IE8, support IE8<br/>\n5, new tapestrycms users, open Tapestry CMS demo', null, null, '0', 'V2.0.0 update log', '2.0.0');
